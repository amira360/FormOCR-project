(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[111],{3072:function(t,e,a){"use strict";a.r(e);var n=a(13),s=a(89),o=a(1),r=a.n(o),c=a(633),i=(a(639),a(653),a(681)),u=a(3025),l=a(115);a(754),a(755),Object(u.a)((function(t){return{formControl:{margin:t.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:t.spacing(3)}}}));e.default=function(t){var e=r.a.useState({}),a=Object(s.a)(e,2),u=a[0],m=a[1],h=r.a.useState({}),p=Object(s.a)(h,2),d=(p[0],p[1],r.a.useState({})),f=Object(s.a)(d,2),j=(f[0],f[1],r.a.useState({})),b=Object(s.a)(j,2),g=b[0],O=b[1],S=r.a.useState({}),x=Object(s.a)(S,2),N=x[0],v=x[1],y=r.a.useState([]),I=Object(s.a)(y,2),J=(I[0],I[1]),T=r.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),A=Object(s.a)(T,2),C=A[0],w=(A[1],r.a.useState("")),z=Object(s.a)(w,2),P=z[0],_=z[1];Object(o.useEffect)((function(){var e=t.match.params.masterId,a=t.match.params.masterInstanceId,n={method:"POST",headers:{"X-Tenant":C,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({id:e})};fetch(l.n+"/api/master/getByMasterId",n).then((function(t){return new Promise((function(e,a){t.text().then((function(t){e(t.length?JSON.parse(t):null)})).catch((function(t){a(t)}))}))})).then((function(t){m(JSON.parse(t.json)),J(JSON.parse(t.master));var n={method:"POST",headers:{"X-Tenant":C,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({masterId:e,masterInstanceId:a})};fetch(l.n+"/api/master/getMasterInstance",n).then((function(t){return new Promise((function(e,a){t.text().then((function(t){e(t.length?JSON.parse(t):null)})).catch((function(t){a(t)}))}))})).then((function(t){console.log(t);var e=t.columns,a=t.data,n=t.masterName;_(n);var s=[];e.map((function(t){"submit"!==t[3]&&"soumettre"!==t[3]&&s.push(t[3])}));var o={};console.log(s),console.log(a),s.map((function(t,e){Number(a[0][e])?o[t]=Number(a[0][e]):o[t]=a[0][e]})),console.log(o),v(o),O(o)})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}),[]);return Object(n.jsx)("div",{children:Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{children:Object(n.jsx)("div",{className:"m-subheader",children:Object(n.jsx)("div",{className:"d-flex align-items-center",children:Object(n.jsx)("div",{className:"mr-auto col-xs-6 ",children:Object(n.jsx)("h4",{className:"m-subheader__title m-subheader__title--separator",children:Object(n.jsxs)("span",{className:"ng-tns-c2-0",children:["Aper\xe7u - ",P,"  "]})})})})})}),Object(n.jsx)(c.g,{children:Object(n.jsx)(i.Form,{form:u,submission:{data:N},options:{readOnly:!0},onChange:function(t){var e=t.data,a={},n=Object.keys(e),s=g,o=Object.keys(s);n.map((function(t){var e=o.filter((function(e){return t.toUpperCase()===e.toUpperCase()}));e&&(a[t]=s[e])})),v(a)},onSubmit:function(e){var a=t.match.params.masterId;console.log(e);var n={method:"POST",headers:{"X-Tenant":C,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({masterId:a,masterData:e.data})};fetch(l.n+"/api/master/saveData",n).then((function(t){return new Promise((function(e,a){t.text().then((function(t){e(t.length?JSON.parse(t):null)})).catch((function(t){a(t)}))}))})),t.history.push("/master/list/"+a)}})})]})})}}}]);
//# sourceMappingURL=111.83a76f30.chunk.js.map