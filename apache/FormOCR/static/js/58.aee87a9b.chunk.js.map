{"version":3,"sources":["views/Administration/users/EditUser.js","../node_modules/@material-ui/icons/esm/Save.js","../node_modules/@material-ui/icons/esm/Cancel.js"],"names":["EditUser","props","useState","firstname","setFirstname","lastname","setLastname","email","setEmail","phone","setPhone","usernamee","setUsernamee","lastnameState","setLastnameState","lastnameError","setLastnameError","firstnameError","setFirstnameError","firstnameState","setFirstnameState","emailState","setEmailState","emailError","setEmailError","phoneState","setPhoneState","phoneError","setPhoneError","oldPhoto","setOldPhoto","photo","setPhoto","image","setImage","React","JSON","parse","localStorage","getItem","domainId","domainName","useRef","userRoles","setUserRoles","selectedRoles","setSelectedRoles","useEffect","username","match","params","roles_data","method","headers","fetch","USER_SERVICE","then","response","json","data","rolesFromApi","selectedList","map","role","push","name","roleName","key","checked","default","catch","error","console","log","user","img","UserImage","firstName","lastName","roles","onRoleChange","e","_selectedRoles","value","i","length","splice","verifyLength","activeTab","variant","data-tab","noValidate","style","marginTop","row","className","sm","md","htmlFor","fontWeight","id","type","onChange","event","document","getElementById","files","target","exec","src","URL","createObjectURL","alert","loadFile","width","invalid","disabled","margin","inputId","some","item","position","xs","col","xl","block","color","onClick","savedPhoto","fd","FormData","append","setItem","body","url","request","user_data","stringify","history","window","location","reload","go","createSvgIcon","d"],"mappings":"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","file":"static/js/58.aee87a9b.chunk.js","sourcesContent":["import React, { useEffect,useRef, useState } from 'react';\n// import { Form, Field } from 'react-final-form';\nimport { InputText } from 'primereact/inputtext';\nimport { Button } from 'primereact/button';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Calendar } from 'primereact/calendar';\nimport { Password } from 'primereact/password';\nimport { Checkbox } from 'primereact/checkbox';\nimport { Dialog } from 'primereact/dialog';\nimport { Divider } from 'primereact/divider';\nimport { classNames } from 'primereact/utils';\nimport { Toast } from 'primereact/toast';\nimport { FileUpload } from 'primereact/fileupload';\nimport { ProgressBar } from 'primereact/progressbar';\nimport { Tooltip } from 'primereact/tooltip';\nimport { Tag } from 'primereact/tag';\nimport {\n    CButton,\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCol,\n    CForm,\n    CFormGroup,\n    CInput,\n    CInvalidFeedback,\n    CLabel, CNav, CNavItem, CNavLink,\n    CRow, CTabContent, CTabPane, CTabs\n} from \"@coreui/react\";\nimport Select from \"@material-ui/core/Select\";\nimport {Cancel, Save} from \"@material-ui/icons\";\nimport {SERVER_URL, USER_SERVICE} from \"../../../constants\";\nimport UserImage from \"./img/user.png\";\nimport './img css/imgStyle.scss';\n// import { CountryService } from '../service/CountryService';\n//import './FormDemo.css';\n\nconst EditUser = (props) => {\n    // const [countries, setCountries] = useState([]);\n    const [showMessage, setShowMessage] = useState(false);\n    const [checked, setChecked] = useState(false);\n    const [firstname, setFirstname] = useState(\"\");\n    const [lastname, setLastname] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [phone, setPhone] = useState(\"\");\n    const [usernamee, setUsernamee] = useState(\"\");\n    const [usernameState, setUsernameState] = useState(\"\");\n    const [usernameError, setUsernameError] = useState(\"\");\n    const [lastnameState, setLastnameState] = useState(\"success\");\n    const [lastnameError, setLastnameError] = useState(\"\");\n    const [firstnameError, setFirstnameError] = useState(\"\");\n    const [firstnameState, setFirstnameState] = useState(\"success\");\n    const [emailState, setEmailState] = useState(\"success\");\n    const [emailError, setEmailError] = useState(\"\");\n    const [phoneState, setPhoneState] = useState(\"success\");\n    const [phoneError, setPhoneError] = useState(\"\");\n    const [passwordState, setPasswordState] = useState(\"\");\n    const [passwordError, setPasswordError] = useState(\"\");\n    const [repeatPassword, setRepeatPassword] = useState(\"\");\n    const [repeatPasswordState, setRepeatPasswordState] = useState(\"success\");\n    const [repeatPasswordError, setRepeatPasswordError] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [oldPhoto, setOldPhoto] = useState(null);\n    const [photo, setPhoto] = useState(null);\n    const [image, setImage] = useState(null);\n    const [formData, setFormData] = useState({});\n    const [domainId, setDomainId] = React.useState(JSON.parse(localStorage.getItem('domain_data')).domainId);\n    const [domainName, setDomainName] = React.useState(JSON.parse(localStorage.getItem('domain_data')).domainName);\n    const [usernameAdmin, setUsernameAdmin] = React.useState(localStorage.getItem('username'));\n    // const countryservice = new CountryService();\n    const [totalSize, setTotalSize] = useState(0);\n    const toast = useRef(null);\n    const fileUploadRef = useRef(null);\n    const [userRoles, setUserRoles] = React.useState([]);\n    const [selectedRoles, setSelectedRoles] = useState();\n\n\n\n    useEffect(() => {\n        const {username} = props.match.params;\n        setUsernamee(username)\n        const roles_data = {\n            method: 'GET',\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n            }\n        };\n        fetch(USER_SERVICE + \"/api/auth/role/getRoles\", roles_data)\n            .then((response) => {\n                return response.json();\n            })\n            .then(data => {\n                var rolesFromApi = [];\n                var selectedList = [];\n                data.map(role => {\n                    rolesFromApi.push({\n                        name : role.roleName,\n                        key : role.roleName,\n                        checked: role.default\n                    })\n                    if(role.default === true ){\n                        selectedList.push({\n                            name : role.roleName,\n                            key : role.roleName,\n                            checked: role.default\n                        })\n                    }\n                })\n\n                setSelectedRoles(selectedList);\n                setUserRoles(rolesFromApi);\n\n            }).catch(error => {\n            console.log(error);\n        })\n        fetch(USER_SERVICE + \"/api/auth/user/getUserByUsername/\"+username, roles_data)\n            .then((response) => {\n                return response.json();\n            })\n            .then(data => {\n\n                const user = JSON.parse(data.user);\n                var img = null\n                if(data.photo){\n                    img = \"data:image/png;base64,\"+data.photo;\n                }else{\n                    img = UserImage;\n                }\n\n                setUsernamee(user.username)\n                setFirstname(user.firstName)\n                setLastname(user.lastName)\n                setPhone(user.phone)\n                setEmail(user.email)\n                setPhoto(img);\n                setOldPhoto(img);\n                setImage(img);\n                const roles = user.roles;\n                var selectedList = []\n                roles.map(role =>{\n                    selectedList.push({\n                        name : role.roleName,\n                        key : role.roleName,\n                        checked: role.default\n                    })\n                })\n                setSelectedRoles(selectedList)\n            })\n        // countryservice.getCountries().then(data => setCountries(data));\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n    const onRoleChange = (e) => {\n        let _selectedRoles = [...selectedRoles];\n\n        if (e.checked) {\n            _selectedRoles.push(e.value);\n        }\n        else {\n            for (let i = 0; i < _selectedRoles.length; i++) {\n                const selectedRoles = _selectedRoles[i];\n\n                if (selectedRoles.key === e.value.key) {\n                    _selectedRoles.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        setSelectedRoles(_selectedRoles);\n    }\n    const validate = (data) => {\n        let errors = {};\n\n        if (!data.name) {\n            errors.name = 'Name is required.';\n        }\n\n        if (!data.email) {\n            errors.email = 'Email is required.';\n        }\n        else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)) {\n            errors.email = 'Invalid email address. E.g. example@email.com';\n        }\n\n        if (!data.password) {\n            errors.password = 'Password is required.';\n        }\n\n        if (!data.accept) {\n            errors.accept = 'You need to agree to the terms and conditions.';\n        }\n\n        return errors;\n    };\n\n    const onSubmit = (data, form) => {\n        setFormData(data);\n        setShowMessage(true);\n\n        form.restart();\n    };\n    const handleSubmit = ()=>{\n\n\n\n        var savedPhoto = null\n        if ( firstnameState===\"success\" && lastnameState===\"success\"\n            && phoneState===\"success\" && emailState===\"success\"\n        ) {\n            if (photo !== oldPhoto) {\n                const fd = new FormData();\n                fd.append('image', photo, photo.name);\n                fd.append('domainId', domainId);\n                fd.append('domainName', domainName);\n                fd.append('username', usernamee);\n\n                localStorage.setItem(\"image\", photo)\n                const data = {\n                    method: 'POST',\n                    headers: {\n                        \"X-Tenant\": domainName,\n                        \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n                    },\n                    body: fd\n                };\n\n                fetch(USER_SERVICE+\"/api/auth/user/upload\", data)\n                    .then(response => response.json())\n                    .then(data => {\n                        savedPhoto = data.url\n                        const request = {\n                            domainId: domainId, url: savedPhoto, username: usernamee,\n                            firstname: firstname, lastname: lastname,\n                            email: email, phone: phone,  selectedRoles: selectedRoles\n                        }\n                        const user_data = {\n                            method: 'POST',\n                            headers: {\n                                \"X-Tenant\": domainName,\n                                'Content-Type': 'application/json',\n                                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n                            },\n                            body: JSON.stringify(request)\n                        };\n                        fetch(USER_SERVICE + \"/api/auth/user/edit\", user_data)\n                            .then(response => {\n                                console.log(response)\n                            })\n\n                        props.history.push(\"/admin/user/list\");\n                        window.location.reload()\n                        //send all data + url to the api to create new user\n                    })\n            } else {\n                const request = {\n                    domainId: domainId, username: usernamee,\n                    firstname: firstname, lastname: lastname,\n                    email: email, phone: phone,selectedRoles: selectedRoles\n                }\n                const user_data = {\n                    method: 'POST',\n                    headers: {\n                        \"X-Tenant\": domainName,\n                        'Content-Type': 'application/json',\n                        \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n                    },\n                    body: JSON.stringify(request)\n                };\n                fetch(USER_SERVICE + \"/api/auth/user/edit\", user_data)\n                    .then(response => {\n                        console.log(response)\n                    })\n                props.history.push(\"/admin/user/list\");\n                props.history.go(0)\n\n                //send all data + url to the api to create new user\n            }\n        }\n    }\n\n\n\n    const onUpload = () => {\n        toast.current.show({severity: 'info', summary: 'Success', detail: 'File Uploaded'});\n    }\n\n\n\n    const verifyLength = (value, length) => {\n        if (value.length >= length) {\n            return true;\n        }\n        return false;\n    };\n\n\n    const verifyUsername = (username) => {\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n            },\n            body: JSON.stringify({username: username})\n        };\n\n        fetch(USER_SERVICE + '/api/auth/verifyUsername', requestOptions)\n            .then(response => {\n                return new Promise((resolve, reject) => {\n                    response.text().then(body => {\n                        resolve(\n                            body.length ? JSON.parse(body) : null\n                        );\n                    }).catch(err => {\n                        reject(err);\n                    });\n                });\n            })\n            .then(data =>\n            {\n                if (data === null) {\n                    setUsernameState(\"success\");\n                } else {\n                    setUsernameState(\"existe\");\n                    setUsernameError(\"Nom d'utilisateur indisponible!\")\n                }\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n\n    var loadFile = function (event) {\n        var image = document.getElementById(\"output\");\n        const files = event.target.files\n        // Allowing file type\n        const allowedExtensions =\n            /(\\.jpg|\\.jpeg|\\.png|\\.gif)$/i;\n\n        /*let reader = new FileReader();\n        reader.readAsDataURL(files[0] )*/\n        if (!allowedExtensions.exec(files[0].name)) {\n            alert( \"Format invalid!\")\n        }\n        else {\n            setPhoto(files[0])\n            image.src = URL.createObjectURL(files[0]);\n\n        }\n    };\n    return (\n        <>\n            <CCard>\n                <CCardHeader>\n                    <h3>Modifier l'utilisateur</h3>\n                </CCardHeader>\n\n                <CCardBody>\n                    <CTabs activeTab=\"user\">\n                        <CNav variant=\"tabs\">\n                            <CNavItem>\n                                <CNavLink data-tab=\"user\">\n                                    Information d'utilisateur\n                                </CNavLink>\n                            </CNavItem>\n                            <CNavItem>\n                                <CNavLink data-tab=\"role\">\n                                    Roles\n                                </CNavLink>\n                            </CNavItem>\n                        </CNav>\n                        <CTabContent>\n                            <CTabPane data-tab=\"user\">\n                                <CForm  noValidate style={{marginTop: \"20px\"}}>\n                                    <CFormGroup row className=\"my-0\">\n                                        <CCol sm={12} md={6}>\n                                            <div className=\"profile-pic\" >\n                                                <label className=\"-label\" htmlFor=\"file\" >\n                                                    <i style={{fontWeight:\"bold\"}} className=\"pi pi-camera\"></i>\n                                                    <span style={{fontWeight:\"bold\"}}>Changer l'image</span>\n                                                </label>\n                                                <input id=\"file\" type=\"file\" onChange={event => loadFile(event)} />\n                                                <img src={image} id=\"output\"\n                                                     width=\"200\"/>\n                                            </div>\n                                        </CCol>\n                                        <CCol sm={12} md={6}>\n                                            <div className=\"row\">\n                                                <CFormGroup>\n                                                    <CLabel htmlFor=\"lastname\">Nom</CLabel>\n                                                    <CInput  invalid={lastnameState === \"error\" } id=\"lastname\"\n                                                             onChange={e =>\n                                                             {\n                                                                 setLastname(e.target.value)\n                                                                 if(verifyLength(e.target.value, 3) ){\n                                                                     setLastnameState(\"success\");\n\n                                                                 } else {\n                                                                     setLastnameState(\"error\");\n                                                                     setLastnameError(\"Le nom est obligatoire !\")\n                                                                 }\n                                                             }}\n                                                             value={lastname} />\n                                                    <CInvalidFeedback className=\"help-block\">\n                                                        {lastnameError}\n                                                    </CInvalidFeedback>\n                                                </CFormGroup>\n                                            </div>\n                                            <div className=\"row\">\n                                                <CFormGroup>\n                                                    <CLabel htmlFor=\"firstname\">Prénom</CLabel>\n                                                    <CInput style={{width:\"100%\"}} id=\"firstname\"\n                                                            invalid={firstnameState === \"error\" }\n                                                            onChange={e =>\n                                                            {\n                                                                setFirstname(e.target.value)\n                                                                if(verifyLength(e.target.value, 3) ){\n                                                                    setFirstnameState(\"success\");\n                                                                } else {\n                                                                    setFirstnameState(\"error\");\n                                                                    setFirstnameError(\"Le prénom est obligatoire !\")\n                                                                }\n                                                            }}\n                                                            value={firstname} />\n                                                    <CInvalidFeedback className=\"help-block\">\n                                                        {firstnameError}\n                                                    </CInvalidFeedback>\n                                                </CFormGroup>\n                                            </div>\n                                        </CCol>\n                                    </CFormGroup>\n\n                                    <CFormGroup row className=\"my-0\">\n                                        <CCol sm={12} md={6}>\n                                            <CFormGroup>\n                                                <CLabel htmlFor=\"username\">Nom d'utilisateur</CLabel>\n                                                <CInput\n                                                   id=\"username\"\n                                                   value={usernamee}\n                                                   disabled\n                                                />\n\n                                            </CFormGroup>\n                                        </CCol>\n                                        <CCol sm={12} md={6}>\n                                            <CFormGroup>\n                                                <CLabel htmlFor=\"email\">Email</CLabel>\n                                                <CInput id=\"email\"\n                                                        invalid={emailState === \"error\" }\n                                                        onChange={e =>\n                                                        {\n                                                            setEmail(e.target.value)\n                                                            if(verifyLength(e.target.value, 3) ){\n                                                                setEmailState(\"success\");\n                                                            } else {\n                                                                setEmailState(\"error\");\n                                                                setEmailError(\"L'adresse email  est obligatoire !\")\n                                                            }\n                                                        }}\n\n                                                        value={email} />\n                                                <CInvalidFeedback className=\"help-block\">\n                                                    {emailError}\n                                                </CInvalidFeedback>\n                                            </CFormGroup>\n                                        </CCol>\n                                    </CFormGroup>\n                                    <CFormGroup row className=\"my-0\">\n\n                                        <CCol sm={12} md={6}>\n                                            <CFormGroup>\n                                                <CLabel htmlFor=\"phone\">Téléphone</CLabel>\n                                                <CInput id=\"phone\"\n                                                        invalid={phoneState === \"error\" }\n                                                        onChange={e =>\n                                                        {\n                                                            setPhone(e.target.value)\n                                                            if(verifyLength(e.target.value, 3) ){\n                                                                setPhoneState(\"success\");\n                                                            } else {\n                                                                setPhoneState(\"error\");\n                                                                setPhoneError(\"Le numéro de téléphone email  est obligatoire !\")\n                                                            }\n                                                        }}\n                                                        value={phone}  />\n                                                <CInvalidFeedback className=\"help-block\">\n                                                    {phoneError}\n                                                </CInvalidFeedback>\n                                            </CFormGroup>\n                                        </CCol>\n\n                                        {/*<CCol sm={12} md={6}>\n                        <div className=\"p-field-checkbox\">\n                            <Checkbox inputId=\"default\" name=\"defaut\" value=\"defaut\" onChange={e => setChecked(e.checked)} checked={checked} />\n                            <label htmlFor=\"default\"> Defaut</label>\n\n                        </div>\n                        </CCol>*/}\n\n                                    </CFormGroup>\n                                </CForm>\n\n                            </CTabPane>\n                            <CTabPane data-tab=\"role\">\n                                <CCardBody>\n                                    {\n                                        userRoles.map((role) => {\n                                            return (\n                                                <div key={role.key} className=\"field-checkbox\" style={{margin:\"10px\"}}>\n                                                    <Checkbox  inputId={role.key} name=\"role\" value={role} onChange={onRoleChange} checked={selectedRoles.some((item) => item.key === role.key)} />\n                                                    <label style={{position: \"absolute\"}} htmlFor={role.key}> &nbsp;{role.name}</label>\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </CCardBody>\n                            </CTabPane>\n                        </CTabContent>\n                    </CTabs>\n\n\n                    <CRow xs=\"4\" style={{marginTop: \"50px\"}}>\n\n                        <CCol col=\"6\" sm=\"4\" md=\"2\" xl className=\"mb-3 mb-xl-0\">\n                            <CButton block variant=\"outline\" color=\"info\" id=\"workflowSave\" onClick={handleSubmit}><Save/> Enregister</CButton>\n                        </CCol>\n                        <CCol col=\"6\" sm=\"4\" md=\"2\" xl className=\"mb-3 mb-xl-0\">\n                            <CButton block variant=\"outline\" color=\"danger\"\n                                     onClick={()=> props.history.push(\"/admin/user/list\")}><Cancel />\n                                Annuler</CButton>\n                        </CCol>\n\n                    </CRow>\n                </CCardBody>\n            </CCard>\n        </>\n\n    );\n}\n\nexport default EditUser","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"\n}), 'Save');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"\n}), 'Cancel');"],"sourceRoot":""}