(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[67],{3049:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(89),s=a(633),i=(a(639),a(642),a(1)),o=a.n(i),c=(a(662),a(168)),d=a(716),l=a(3033),u=a(115),m=(a(685),a(686),a(687),a(688),a(717)),h=a(718);a(689);t.default=function(e){var t=o.a.useState([]),a=Object(r.a)(t,2),b=(a[0],a[1],o.a.useState("")),g=Object(r.a)(b,2),f=(g[0],g[1],o.a.useState("")),p=Object(r.a)(f,2),j=(p[0],p[1],o.a.useState("")),v=Object(r.a)(j,2),O=(v[0],v[1],o.a.useState([])),x=Object(r.a)(O,2),S=(x[0],x[1],o.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainId)),A=Object(r.a)(S,2),N=A[0],P=(A[1],o.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName)),F=Object(r.a)(P,2),C=F[0],I=(F[1],o.a.useState([])),k=Object(r.a)(I,2),y=(k[0],k[1]),M=o.a.useState([]),w=Object(r.a)(M,2),J=w[0],_=w[1];Object(c.c)((function(e){return e.sidebarShow})),Object(i.useRef)(null);Object(i.useEffect)((function(){var e=[];fetch(u.v+"/api/auth/role/getRoles").then((function(e){return e.json()})).then((function(t){console.log(t),t.map((function(t){e.push({value:t.roleName,label:t.roleName,key:t.roleId})})),y(e)})).catch((function(e){console.log(e)}));var t=[];fetch(u.v+"/api/auth/user/getUsersByDomain/"+N).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){var a=[];e.map((function(e){a.push({value:e.userId,label:e.firstName+" "+e.lastName})})),t=a}));var a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization"),"X-Tenant":C},body:JSON.stringify({domainId:N})};fetch(u.c+"/api/dashboard/getAll",a).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(a){var n=JSON.parse(a.dashboards),r=JSON.parse(a.user_access),s=JSON.parse(a.admin_access),i=JSON.parse(a.access_role);console.log(r);var o=[];n.map((function(a){console.log(a);var n=[],c="",d="",l="";r.length>0&&(n=r.filter((function(e){return e.dashboardId===a.id})),console.log(n),n.length>0&&n.map((function(e){var a=t.filter((function(t){return t.value===e.userId}));null===a||void 0===a||a.map((function(e){c=c+e.label+"\n"}))})));var u=[];s.length>0&&(u=s.filter((function(e){return e.dashboardId===a.id}))).length>0&&u.map((function(t){var a=e.filter((function(e){return e.key===t.roleId}));null===a||void 0===a||a.map((function(e){d+=e.label+"\n"}))}));var m=[];i.length>0&&(m=i.filter((function(e){return e.dashboardId===a.id}))).length>0&&m.map((function(t){var a=e.filter((function(e){return e.key===t.roleId}));null===a||void 0===a||a.map((function(e){l+=e.label+"\n"}))})),o.push({id:a.id,name:a.name,users_access:c,admins_access:d,roles_access:l})})),console.log(o);var c=[];o.map((function(e){c.push({Nom:e.name,"Contr\xf4le d'acc\xe8s (R\xf4les)":e.roles_access,"Contr\xf4le d'acc\xe8s (Admin)":e.admins_access,"Contr\xf4le d'acc\xe8s (User)":e.users_access,id:e.id})})),_(c)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(s.O,{children:Object(n.jsx)(s.k,{children:Object(n.jsxs)(s.f,{style:{zIndex:"10 !important"},children:[Object(n.jsxs)(s.j,{style:{backgroundColor:"#494399"},children:[Object(n.jsx)("span",{style:{color:"#FFFFFF",fontWeight:"bold"},children:"Tableau de bord"}),Object(n.jsxs)("div",{className:"card-header-actions",children:[Object(n.jsxs)(s.I,{style:{color:"#FFFFFF"},onClick:function(){return e.history.push("/admin/dashboard/create")},rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:[Object(n.jsx)(d.a,{}),"Ajouter un nouveau"]}),Object(n.jsx)(s.I,{style:{color:"#FFFFFF",paddingLeft:"10px"},children:Object(n.jsx)("i",{size:"2xl",className:"pi pi-bars",onClick:function(e){return console.log(e)}})})]})]}),Object(n.jsx)(s.g,{children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)(m.DataTable,{value:J,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[5,10,25],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"{currentPage} of {totalPages} pages ({totalRecords} items)",className:"p-datatable-sm p-datatable-striped p-datatable-gridlines",children:[Object(n.jsx)(h.Column,{field:function(e){return Object(n.jsx)("td",{children:Object(n.jsxs)(s.o,{className:"m-1",children:[Object(n.jsx)(s.r,{style:{padding:"0px"},children:Object(n.jsx)("i",{size:"2xl",className:"pi pi-bars"})}),Object(n.jsx)(s.q,{className:"mp-0",children:Object(n.jsxs)(s.p,{to:"/admin/dashboard/edit/"+e.id,children:[Object(n.jsx)(l.a,{})," \xa0\xa0 \xc9diter"]})})]})})},style:{width:"50px"}}),Object(n.jsx)(h.Column,{field:"Nom",header:"Nom du tableau de board",sortable:!0}),Object(n.jsx)(h.Column,{field:"Contr\xf4le d'acc\xe8s (R\xf4les)",header:"Contr\xf4le d'acc\xe8s (R\xf4les)",sortable:!0}),Object(n.jsx)(h.Column,{field:"Contr\xf4le d'acc\xe8s (Admin)",header:"Contr\xf4le d'acc\xe8s (Admin)",sortable:!0}),Object(n.jsx)(h.Column,{field:"Contr\xf4le d'acc\xe8s (User)",header:"Contr\xf4le d'acc\xe8s (User)",sortable:!0})]})})})]})})})})}},642:function(e,t,a){"use strict";t.a=[{id:0,name:"John Doe",registered:"2018/01/01",role:"Guest",status:"Pending"},{id:1,name:"Samppa Nori",registered:"2018/01/01",role:"Member",status:"Active"},{id:2,name:"Estavan Lykos",registered:"2018/02/01",role:"Staff",status:"Banned"},{id:3,name:"Chetan Mohamed",registered:"2018/02/01",role:"Admin",status:"Inactive"},{id:4,name:"Derick Maximinus",registered:"2018/03/01",role:"Member",status:"Pending"},{id:5,name:"Friderik D\xe1vid",registered:"2018/01/21",role:"Staff",status:"Active"},{id:6,name:"Yiorgos Avraamu",registered:"2018/01/01",role:"Member",status:"Active"},{id:7,name:"Avram Tarasios",registered:"2018/02/01",role:"Staff",status:"Banned"},{id:8,name:"Quintin Ed",registered:"2018/02/01",role:"Admin",status:"Inactive"},{id:9,name:"En\xe9as Kwadwo",registered:"2018/03/01",role:"Member",status:"Pending"},{id:10,name:"Agapetus Tade\xe1\u0161",registered:"2018/01/21",role:"Staff",status:"Active"},{id:11,name:"Carwyn Fachtna",registered:"2018/01/01",role:"Member",status:"Active"},{id:12,name:"Nehemiah Tatius",registered:"2018/02/01",role:"Staff",status:"Banned"},{id:13,name:"Ebbe Gemariah",registered:"2018/02/01",role:"Admin",status:"Inactive"},{id:14,name:"Eustorgios Amulius",registered:"2018/03/01",role:"Member",status:"Pending"},{id:15,name:"Leopold G\xe1sp\xe1r",registered:"2018/01/21",role:"Staff",status:"Active"},{id:16,name:"Pompeius Ren\xe9",registered:"2018/01/01",role:"Member",status:"Active"},{id:17,name:"Pa\u0109jo Jadon",registered:"2018/02/01",role:"Staff",status:"Banned"},{id:18,name:"Micheal Mercurius",registered:"2018/02/01",role:"Admin",status:"Inactive"},{id:19,name:"Ganesha Dubhghall",registered:"2018/03/01",role:"Member",status:"Pending"},{id:20,name:"Hiroto \u0160imun",registered:"2018/01/21",role:"Staff",status:"Active"},{id:21,name:"Vishnu Serghei",registered:"2018/01/01",role:"Member",status:"Active"},{id:22,name:"Zbyn\u011bk Phoibos",registered:"2018/02/01",role:"Staff",status:"Banned"},{id:23,name:"Aulus Agmundr",registered:"2018/01/01",role:"Member",status:"Pending"},{id:42,name:"Ford Prefect",registered:"2001/05/25",role:"Alien",status:"Don't panic!"}]},662:function(e,t,a){"use strict";a(13),a(1),a(633),a(653),a(642)},716:function(e,t,a){"use strict";var n=a(1),r=a(1054);t.a=Object(r.a)(n.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")}}]);
//# sourceMappingURL=67.9ce60d2c.chunk.js.map