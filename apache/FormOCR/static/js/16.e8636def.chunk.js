(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[16],{1171:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n='{\n               "components":  [\n                 { "type": "button",\n                "theme": "primary",\n                "disableOnInvalid": true,\n                "action": "submit",\n                "block": false,\n                "rightIcon": "",\n                "leftIcon": "",\n                "size": "md",\n                "key": "submit",\n                "tableView": false,\n                "label": "soumettre",\n                "input": true,\n                "autofocus": false,\n                "tags": [\n                ],\n                "conditional": {\n                "show": "",\n                "when": null,\n                "eq": ""\n                },\n                "properties": {\n                }\n                }],\n               "display": "form"\n               }'},1249:function(e,t,a){"use strict";a.d(t,"a",(function(){return rt})),a.d(t,"b",(function(){return ct})),a.d(t,"c",(function(){return bt})),a.d(t,"d",(function(){return jt.a})),a.d(t,"e",(function(){return vt})),a.d(t,"f",(function(){return yt})),a.d(t,"g",(function(){return Gt}));var n=a(13),o=a(39),s=a(1),r=a.n(s),i=a(21),c=a(633),l=a(680),m=a(89),u=a(115);var d=a(743),p=a(658),h=a(904),f=a.n(h),b=a(865),j=(a(685),a(686),a(687),a(688),a(689)),g=a(639),O=(a(653),a(681)),x=a(3025),S=(a(754),a(755),a(695)),v=a(696),y=a(922),N=a(700),I=a(699),w=a(1169),k=a.n(w),z=a(731),C=a.n(z),P=a(732),J=a.n(P);C()(k.a),J()(k.a);var _=function(e){Object(N.a)(a,e);var t=Object(I.a)(a);function a(e){var n;Object(S.a)(this,a),(n=t.call(this,e)).state={height:200,width:200},n.printPage=n.printPage.bind(Object(y.a)(n)),n.createFieldsNamesTree=n.createFieldsNamesTree.bind(Object(y.a)(n)),console.log(localStorage.getItem("processHistory")),n.state={userData:{},domainName:JSON.parse(localStorage.getItem("domain_data")).domainName,workflowMasterId:"",processInstanceId:"",formIds:[],nodeDataTable:[],processKey:"",historics:[],formDataHistoric:[],formsData:localStorage.getItem("processHistory"),chartFig:null,chartOptions:{series:[{data:[1,2,3]}],chart:{height:400,type:"column"},xAxis:{labels:{useHTML:!0,formatter:function(){return""}}}},series:[{name:"Gases",data:[{name:"Argon",y:.9,color:"#3498db"},{name:"Nitrogen",y:78.1,color:"#9b59b6"},{name:"Oxygen",y:20.9,color:"#2ecc71"},{name:"Trace Gases",y:.1,color:"#f1c40f"}]}]};var o=e.processInstanceId,s=e.workflowMasterId,r={method:"GET",headers:{"X-Tenant":n.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}},i=localStorage.getItem("username");fetch(u.v+"/api/auth/user/getUserByUsername/"+i,r).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){n.setState({userData:JSON.parse(e.user)})})).catch((function(e){console.log(e)})),n.setState({workflowMasterId:s}),console.log(o),console.log(s),n.setState({processInstanceId:o});localStorage.getItem("username");localStorage.setItem("processInstanceId",o);var c={method:"POST",headers:{"X-Tenant":n.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({processInstanceId:o})};return fetch(u.s+"/api/process/auth/historic",c).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){console.log(e),console.log(JSON.parse(e.historicVariableInstances));var t=JSON.parse(e.historicVariableInstances);JSON.parse(e.historicTaskInstances);n.setState({processKey:t[0].processDefinitionKey}),n.setState({historics:t});var a=[],o=[],s=[];t.map((function(e){"object"===typeof e.value&&(o.push({formCode:e.variableName}),a.push(e.value))})),console.log(a),console.log(o);var r=[],i=JSON.parse(localStorage.getItem("formsJson"));console.log(i),a.map((function(e,t){if(null!==e&&void 0!==i[t]){s.push(e);var a=n.createFieldsNamesTree(i[t].components,!0,0);r.push(a)}})),n.setState({formDataHistoric:s}),console.log(r),console.log(s),n.setState({nodeDataTable:r}),n.setState({formIds:o}),console.log(o)})),n}return Object(v.a)(a,[{key:"createFieldsNamesTree",value:function(e,t,a){var n=this,o=[];return console.log(e),e.map((function(e,t){"object"===typeof e.components?"datagrid"!==e.type?o.push({label:e.title,id:e.id,fieldKey:e.key,children:n.createFieldsNamesTree(e.components,!0,0)}):e.components.map((function(e,t){"object"===typeof e.components?o.push({label:e.label,id:e.id,fieldKey:e.key,children:n.createFieldsNamesTree(e.components,!0,0)}):"object"===typeof e.columns?e.columns.map((function(e){"object"===typeof e.components&&e.components.map((function(e,t){"object"===typeof e.components?"datagrid"!==e.type?o.push({label:e.label,id:e.id,fieldKey:e.key,children:n.createFieldsNamesTree(e.components,!0,0)}):e.components.map((function(e,t){"object"===typeof e.components?o.push({label:e.label,id:e.id,fieldKey:e.key,children:n.createFieldsNamesTree(e.components,!0,0)}):o.push({label:e.label,id:e.id,fieldKey:e.key})})):o.push({label:e.label,id:e.id,fieldKey:e.key})}))})):o.push({label:e.label,id:e.id,fieldKey:e.key})})):"object"===typeof e.columns?e.columns.map((function(e){"object"===typeof e.components&&e.components.map((function(e,t){"object"===typeof e.components?"datagrid"!==e.type?o.push({label:e.label,id:e.id,fieldKey:e.key,children:n.createFieldsNamesTree(e.components,!0,0)}):e.components.map((function(e,t){"object"===typeof e.components?o.push({label:e.label,id:e.id,fieldKey:e.key,children:n.createFieldsNamesTree(e.components,!0,0)}):o.push({label:e.label,id:e.id,fieldKey:e.key})})):o.push({label:e.label,id:e.id,fieldKey:e.key})}))})):o.push({label:e.label,id:e.id,fieldKey:e.key})})),o}},{key:"printPage",value:function(e){var t=null,a=document.getElementById("divToPrint");f()(a,{useCORS:!0}).then((function(e){var a=190*e.height/e.width+300,n=e.toDataURL("img/png"),o=new b.default("p","mm","a4");o.addImage(n,"PNG",10,10,190,a),t=o.output("bloburl"),document.getElementById("tab").style.display="none",document.getElementById("test").style.display="block",document.getElementById("test").src=t}))}},{key:"render",value:function(){var e,t=this,a=!0,o=localStorage.getItem("workflowMasterName"),s=(new Date).toLocaleString();return Object(n.jsx)("div",{children:Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{children:Object(n.jsx)("div",{className:"m-subheader",children:Object(n.jsxs)("div",{className:"d-flex align-items-center",children:[Object(n.jsx)("div",{className:"mr-auto col-xs-6 ",children:Object(n.jsx)("h4",{className:"m-subheader__title m-subheader__title--separator",children:Object(n.jsxs)("span",{className:"ng-tns-c2-0",children:[o," "]})})}),Object(n.jsx)("div",{className:"card-header-actions"})]})})}),Object(n.jsx)(c.g,{style:{minHeight:"300px"},children:Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{id:"tab",children:Object(n.jsxs)("div",{className:"container",id:"divToPrint",children:[Object(n.jsx)("div",{className:"text-center",children:Object(n.jsxs)("div",{className:"row py-3",children:[Object(n.jsx)("div",{className:"col-12 mb-3",children:Object(n.jsx)("h3",{children:this.state.domainName})}),Object(n.jsxs)("div",{className:"col-12 mb-3",children:["T\xe9l\xe9charg\xe9 par ",this.state.userData.firstName," ",this.state.userData.lastName," le ",s]})]})}),Object(n.jsx)("div",{children:null===(e=this.state.nodeDataTable)||void 0===e?void 0:e.map((function(e,o){return Object(n.jsx)("div",{className:"row",children:null===e||void 0===e?void 0:e.map((function(e){var s;return Object(n.jsxs)("table",{style:{textAlign:"left",width:"100%"},className:"table table-striped table-bordered",children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{style:{backgroundColor:"#4a7bc4",color:"#fff"},children:Object(n.jsx)("th",{scope:"col",colSpan:"8",children:e.label})})}),Object(n.jsx)("tbody",{children:null===(s=e.children)||void 0===s?void 0:s.map((function(s){var r=t.state.formDataHistoric[o];return console.log(s),console.log(r),r[s.fieldKey]&&"object"!==typeof r[s.fieldKey]?Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{style:{width:"35%"},children:s.label}),Object(n.jsx)("td",{style:{width:"65%"},children:null!==r[s.fieldKey]?r[s.fieldKey]:null})]},s.id):r[s.fieldKey]&&"object"===typeof r[s.fieldKey]&&!Array.isArray(r[s.fieldKey])?(console.log(r[s.fieldKey]),Object(n.jsxs)("tr",{children:[s.children.map((function(e,t){return Object(n.jsx)("td",{children:e.label})})),r[s.fieldKey].map((function(e,t){s.children.map((function(t,a){return Object(n.jsx)("td",{children:null!==e[t.fieldKey]?r[s.fieldKey]:null})}))}))]},s.id)):"dataGrid"===s.fieldKey&&r.dataGrid&&a&&"object"===typeof r.dataGrid?(console.log(r.dataGrid),a=!1,Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("tr",{children:[e.children.map((function(e){return Object(n.jsx)("th",{scope:"col",children:e.label})}))," "]},e.id),r.dataGrid.map((function(t,a){return Object(n.jsxs)("tr",{children:[" ",e.children.map((function(e,a){return Object(n.jsx)("td",{children:null!==t[e.fieldKey]?r[s.fieldKey]:null})}))]})}))]})):void 0}))})]})}))})}))})]})}),Object(n.jsx)("iframe",{id:"test",style:{position:"absolute",right:0,display:"none",height:"300px"},width:"100%"})]})})]})})}}]),a}(s.Component),T=_,F=(a(802),a(661)),D=(Object(x.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),function(e){var t=Object(s.useRef)(null),a=r.a.useState(""),o=Object(m.a)(a,2),i=(o[0],o[1],r.a.useState("")),h=Object(m.a)(i,2),g=(h[0],h[1],r.a.useState("")),x=Object(m.a)(g,2),S=(x[0],x[1],r.a.useState("")),v=Object(m.a)(S,2),y=(v[0],v[1],r.a.useState([])),N=Object(m.a)(y,2),I=(N[0],N[1]),w=r.a.useState([]),k=Object(m.a)(w,2),z=k[0],C=k[1],P=r.a.useState(""),J=Object(m.a)(P,2),_=(J[0],J[1],r.a.useState([])),D=Object(m.a)(_,2),A=(D[0],D[1],r.a.useState("")),K=Object(m.a)(A,2),M=(K[0],K[1]),B=r.a.useState(""),E=Object(m.a)(B,2),L=E[0],G=E[1],H=r.a.useState(""),X=Object(m.a)(H,2),U=(X[0],X[1],r.a.useState([])),R=Object(m.a)(U,2),V=(R[0],R[1],r.a.useState([])),W=Object(m.a)(V,2),q=(W[0],W[1]),Q=r.a.useState([]),Y=Object(m.a)(Q,2),Z=(Y[0],Y[1]),$=r.a.useState([]),ee=Object(m.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState([]),oe=Object(m.a)(ne,2),se=(oe[0],oe[1],r.a.useState([])),re=Object(m.a)(se,2),ie=(re[0],re[1]),ce=r.a.useState([]),le=Object(m.a)(ce,2),me=(le[0],le[1],r.a.useState({})),ue=Object(m.a)(me,2),de=(ue[0],ue[1],r.a.useState([])),pe=Object(m.a)(de,2),he=(pe[0],pe[1],r.a.useState([])),fe=Object(m.a)(he,2),be=(fe[0],fe[1],r.a.useState(!1)),je=Object(m.a)(be,2),ge=je[0],Oe=je[1],xe=r.a.useState("center"),Se=Object(m.a)(xe,2),ve=(Se[0],Se[1]),ye=r.a.useState(""),Ne=Object(m.a)(ye,2),Ie=Ne[0],we=Ne[1],ke=r.a.useState(localStorage.getItem("workflowMasterName")),ze=Object(m.a)(ke,2),Ce=ze[0],Pe=(ze[1],r.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName)),Je=Object(m.a)(Pe,2),_e=(Je[0],Je[1],r.a.useState(!0)),Te=Object(m.a)(_e,2),Fe=Te[0],De=Te[1],Ae=[{label:"Imprimer",icon:"pi pi-print",command:function(){Me()}},{label:"Imprimer (Navigateur)",icon:"pi pi-print",command:function(){window.print()}}],Ke={displayMaximizable:Oe},Me=function(e){Ke.displayMaximizable(!0),localStorage.setItem("processHistory",te),e&&ve(e)},Be=function(e){Ke["".concat(e)](!1)};Object(s.useEffect)((function(){var t=e.match.params.processInstanceId,a=e.match.params.workflowMasterId;we(a),G(t);var n=JSON.parse(localStorage.getItem("domain_data")).domainName;localStorage.getItem("username");localStorage.setItem("processInstanceId",t);var o={method:"POST",headers:{"X-Tenant":n,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({processInstanceId:t})};fetch(u.s+"/api/process/auth/historic",o).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){var t=JSON.parse(e.historicVariableInstances);JSON.parse(e.historicTaskInstances);console.log(t),M(t[0].processDefinitionKey),Z(t);var a=[],o=[];t.map((function(e){if("object"===typeof e.value){e.variableName;e.variableName.toUpperCase()===e.variableName&&a.push({formCode:e.variableName}),o.push(e.value)}})),I(a),C(o);var s={method:"POST",headers:{"X-Tenant":n,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({formCodes:a})};console.log(a),fetch(u.g+"/api/form/getByFormCodes",s).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){if(console.log(e),null!==e){localStorage.setItem("formsJson",e.forms_json);var t=JSON.parse(e.forms_json),a=[];t.map((function(e,t){a.push.apply(a,Object(l.a)(e.components))})),console.log(a),ie(a),console.log(t),ae(t)}})).catch((function(e){console.log(e)})),q(JSON.parse(e.historicVariableInstances)),console.log(JSON.parse(e.historicVariableInstances)),De(!1)})).catch((function(e){console.log(e)}))}),[]);var Ee,Le=Fe;return Object(n.jsxs)("div",{children:[Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{children:Object(n.jsx)("div",{className:"m-subheader",children:Object(n.jsxs)("div",{className:"d-flex align-items-center",children:[Object(n.jsxs)("div",{className:"mr-auto col-xs-6 ",children:[Object(n.jsx)("h4",{className:"m-subheader__title m-subheader__title--separator",children:Object(n.jsxs)("span",{className:"ng-tns-c2-0",children:["Aper\xe7u  -  ",Ce]})}),"              "]}),Object(n.jsxs)("div",{className:"card-header-actions",children:[Object(n.jsx)(j.Menu,{model:Ae,popup:!0,ref:t}),Object(n.jsx)(c.I,{className:"c-subheader-nav-link",style:{paddingLeft:"15px",paddingRight:"20px"},children:Object(n.jsx)("i",{size:"2xl",className:"pi pi-bars",onClick:function(e){return t.current.toggle(e)}})})]})]})})}),Object(n.jsxs)(c.g,{children:[Le&&Object(n.jsx)(F.ProgressBar,{mode:"indeterminate",style:{height:"6px"}}),te.map((function(e,t){return Object(n.jsx)(O.Form,{form:te[te.length-1-t],options:{readOnly:!0},submission:{data:z[te.length-1-t]}})}))]})]}),Object(n.jsx)(d.Dialog,{visible:ge,maximizable:!0,modal:!0,style:{width:"70vw"},footer:(Ee="displayMaximizable",Object(n.jsxs)("div",{children:[Object(n.jsx)(p.Button,{label:"Imprimer",icon:"pi pi-check",onClick:function(){return function(e){var t=null,a=document.getElementById("divToPrint");f()(a,{useCORS:!0}).then((function(e){var a=e.toDataURL("img/png"),n=190*e.height/e.width,o=n,s=new b.default("p","mm","a4"),r=0;for(s.addImage(a,"PNG",10,r,190,n),o-=295;o>=5;)r=o-n,s.addPage(),s.addImage(a,"PNG",10,r,190,n),o-=295;t=s.output("bloburl"),document.getElementById("tab").style.display="none",document.getElementById("test").style.display="block",document.getElementById("test").src=t}))}()},autoFocus:!0}),Object(n.jsx)(p.Button,{label:"Annuler",icon:"pi pi-times",onClick:function(){return Be(Ee)},className:"p-button-text"})]})),onHide:function(){return Be("displayMaximizable")},children:Object(n.jsx)(T,{processInstanceId:L,workflowMasterId:Ie})})]})}),A=a(169),K=a(1171),M=a(733),B=function(e){Object(N.a)(a,e);var t=Object(I.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).showSuccess=n.showSuccess.bind(Object(y.a)(n)),n.state={visible:!0,username:localStorage.getItem("username"),formName:"",formCode:"",historicFormsIds:[],submitFormFields:{},accessControl:[],formId:"",formIds:[],editabeFormsIds:[],formDataHistoric:[],data:[],formFields:[],taskForms:[],form:{},forms:[],user_roles:[],roles:[],role:{label:"",value:""},components:[],component:{},newComponents:[],HistoricFormsData:[],formKey:"",formsData:[{autoriteDapprobation:localStorage.getItem("username"),statutApprouve:"",commentaireDeLapprivoiseur:""}],historics:null,processKey:"",processInstanceId:"",domainName:JSON.parse(localStorage.getItem("domain_data")).domainName,domainId:JSON.parse(localStorage.getItem("domain_data")).domainId,taskId:""},n.handleFormSubmit=n.handleFormSubmit.bind(Object(y.a)(n)),n}return Object(v.a)(a,[{key:"showSuccess",value:function(){this.toast.show({severity:"success",summary:"La fin du processus",detail:"Le processus est termin\xe9 avec succ\xe8s",life:3e3})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.taskId;this.setState({submitFormFields:JSON.parse(K.a)});var a=this.props.match.params.processDefinitionKey;this.setState({processKey:a});var n=this.props.match.params.processInstanceId;this.setState({taskId:t});var o=JSON.parse(localStorage.getItem("domain_data")).domainName,s=localStorage.getItem("username"),r={method:"POST",headers:{"X-Tenant":this.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({processInstanceId:n})};fetch(u.s+"/api/process/auth/historic",r).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){var a=JSON.parse(t.historicVariableInstances),n=(JSON.parse(t.historicTaskInstances),[]),o=[];a.map((function(s){if("string"!==typeof s.value){if(void 0!==s.value){Object.keys(s.value);n.push({formCode:s.variableName})}var r=s.value;Object.keys(r);o.push(r),e.setState({formDataHistoric:o}),e.setState({historicFormsIds:n}),e.setState({historics:a});JSON.parse(t.taskForms)}}));JSON.parse(t.taskForms);e.setState({data:JSON.parse(t.historicVariableInstances)})})).catch((function(e){console.log(e)}));var i={method:"POST",headers:{"X-Tenant":this.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({domainName:o,username:s,processDefinitionKey:a,processInstanceId:n})};fetch(u.s+"/api/process/getTaskForm",i).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){if(e.setState({processInstanceId:n}),null!=t.taskForms){var a=t.taskForms,o=t.validationConstraints,s=JSON.parse(a),r=[];s.map((function(e){r.push({formCode:e})})),e.setState({form:r});var i=[],c=JSON.parse(o),m=[];e.state.historicFormsIds.map((function(e,t){i.push({id:e.formCode,constraint:"readonly"}),m.push(e.formCode)})),c.map((function(e,t){0===m.filter((function(e){return e===r[t].formCode})).length&&i.push({id:r[t].formCode,constraint:e})})),e.setState({formFields:i});var u=[];i.map((function(e,t){"readonly"!==e.constraint&&u.push({formCode:e.id})})),e.setState({editabeFormsIds:u});[].concat(Object(l.a)(e.state.historicFormsIds),r);e.getFormsByFormCodes(r),e.setState({visible:!1})}else alert("No task To do ! ")})).catch((function(e){console.log(e)}))}},{key:"handleInputChange",value:function(e){}},{key:"handleFormBuilderChange",value:function(e){this.setState({formBuilder:e.target.value.components})}},{key:"handleChangeMultiple",value:function(e){for(var t=e.target.options,a=[],n=0,o=t.length;n<o;n+=1)t[n].selected&&a.push(t[n].value);this.setState({accessControl:a})}},{key:"getFormsByFormCodes",value:function(e){var t=this,a={method:"POST",headers:{"X-Tenant":this.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({formCodes:e})};fetch(u.g+"/api/form/getByFormCodes",a).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){var a=JSON.parse(e.forms_json),n=[],o=[];a.map((function(e,t){o.push(e.components),n.push(e.components)})),t.setState({componentsData:n}),t.setState({forms:a})})).catch((function(e){console.log(e)}))}},{key:"formFunction",value:function(e,t){var a=this;if("readonly"===this.state.formFields[t].constraint)return Object(n.jsx)(O.Form,{form:e,options:{readOnly:!0},submission:{data:this.state.formDataHistoric[t]}});if("FORAPP"===this.state.formFields[t].id){var o=this.state.formsData;return Object(n.jsx)(O.Form,{form:e,options:{readOnly:!1},submission:{data:o},onChange:function(e){var n=Object(l.a)(a.state.formsData);n[t]=e.data,o=Object(l.a)(a.state.formsData),a.setState({formsData:n})}})}return Object(n.jsx)(O.Form,{form:e,options:{readOnly:!1},onChange:function(e){var n=Object(l.a)(a.state.formsData);n[t]=e.data,a.setState({formsData:n})}})}},{key:"handleFormSubmit",value:function(e){var t,a=this,n=(e.data,JSON.parse(localStorage.getItem("domain_data")).domainName),o=localStorage.getItem("username"),s=this.state.editabeFormsIds,r=this.state.formsData.filter((function(e){return void 0!==e})),i={method:"POST",headers:{"X-Tenant":this.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify((t={formCodes:s,taskId:this.state.taskId,username:o,domainId:this.state.domainId,domainName:n},Object(A.a)(t,this.state.taskId,r),Object(A.a)(t,"processDefinitionKey",this.state.processKey),Object(A.a)(t,"processInstanceId",this.state.processInstanceId),t))};fetch(u.s+"/api/process/executeProcess",i).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){!0===e.is_complete&&(a.showSuccess(),a.props.history.push("/dashboard"))})).catch((function(e){console.log(e)}))}},{key:"handleDelete",value:function(e){var t=this.state.accessControl.filter((function(t){return t!==e}));this.setState({accessControl:t})}},{key:"render",value:function(){var e=this,t=this.state.visible;this.state.formsData[0];return Object(n.jsxs)("div",{children:[Object(n.jsx)(M.Toast,{ref:function(t){return e.toast=t}}),Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{children:Object(n.jsx)("div",{className:"m-subheader",children:Object(n.jsx)("div",{className:"d-flex align-items-center",children:Object(n.jsx)("div",{className:"mr-auto col-xs-6 ",children:Object(n.jsx)("h4",{className:"m-subheader__title m-subheader__title--separator",children:Object(n.jsx)("span",{className:"ng-tns-c2-0",children:this.state.formName})})})})})}),Object(n.jsxs)(c.g,{children:[t&&Object(n.jsx)(F.ProgressBar,{mode:"indeterminate",style:{height:"6px"}}),this.state.forms.map((function(t,a){if("readonly"===e.state.formFields[a].constraint){var o=e.state.formDataHistoric.length-1-a;return Object(n.jsx)(O.Form,{form:t,options:{readOnly:!0},submission:{data:e.state.formDataHistoric[o]}})}return Object(n.jsx)(O.Form,{form:t,options:{readOnly:!1},submission:{data:e.state.formsData[0]},onChange:function(t){var a=Object(l.a)(e.state.formsData);a[0]=t.data,a[0].autoriteDapprobation=localStorage.getItem("username"),a[0],e.setState({formsData:a})}})})),!t&&Object(n.jsx)(O.Form,{form:this.state.submitFormFields,onSubmit:function(t){return e.handleFormSubmit(t)}})]})]})]})}}]),a}(s.Component),E=B,L=function(e){Object(N.a)(a,e);var t=Object(I.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).state={visible:!0,formName:"",formFields:[],submitFormFields:{},formCode:"",accessControl:[],formCodes:[],forms:[],user_roles:[],roles:[],role:{label:"",value:""},components:[],componentsData:[],component:{},formsData:[],newComponents:[],formKey:"",processKey:"",processInstanceId:"",domainName:JSON.parse(localStorage.getItem("domain_data")).domainName},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.processKey;this.setState({submitFormFields:JSON.parse(K.a)}),this.setState({processKey:t}),this.handleFormSubmit=this.handleFormSubmit.bind(this);var a=JSON.parse(localStorage.getItem("domain_data")).domainName,n={method:"POST",headers:{"X-Tenant":a,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({processKey:t,domainName:a})};fetch(u.s+"/api/process/createNewInstance",n).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){t.length&&e.setState({formId:t[0].id});var a=[],n=[];t.map((function(e,t){n.push({formCode:e.id}),void 0===e.validationConstraints[0]?a.push({id:e.id,label:e.label,constraint:null}):a.push({id:e.id,label:e.label,constraint:e.validationConstraints[0].name})})),e.setState({formCodes:n}),e.setState({formFields:a}),void 0!==e.state.formCodes[0]?(e.getFormsByFormCodes(n),e.setState({visible:!1})):e.props.history.push("/dashboard")})).catch((function(e){console.log(e)}))}},{key:"handleInputChange",value:function(e){}},{key:"handleFormBuilderChange",value:function(e){this.setState({formBuilder:e.target.value.components})}},{key:"handleChangeMultiple",value:function(e){for(var t=e.target.options,a=[],n=0,o=t.length;n<o;n+=1)t[n].selected&&a.push(t[n].value);this.setState({accessControl:a})}},{key:"getFormsByFormCodes",value:function(e){var t=this,a={method:"POST",headers:{"X-Tenant":this.state.domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({formCodes:e})};fetch(u.g+"/api/form/getByFormCodes",a).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){var a=JSON.parse(e.forms_json),n=[],o=[];a.map((function(e,t){o.push(e.components),n.push(e.components)})),t.setState({componentsData:n}),t.setState({forms:a})})).catch((function(e){console.log(e)}))}},{key:"handleDelete",value:function(e){var t=this.state.accessControl.filter((function(t){return t!==e}));this.setState({accessControl:t})}},{key:"formFunction",value:function(e,t){var a=this;return"readonly"===this.state.formFields[t].constraint?Object(n.jsx)(O.Form,{form:e,options:{readOnly:!0},onChange:function(e){console.log(e.data);e.data,a.state.data.find((function(e){return e.name.includes(a.state.formCodes[t])}))}}):Object(n.jsx)(O.Form,{form:e,options:{readOnly:!1},onChange:function(e){var n=Object(l.a)(a.state.formsData);n[t]=e.data,a.setState({formsData:n})}})}},{key:"handleFormSubmit",value:function(e){var t=this,a=(this.state.formKey,this.state.formsData),n=JSON.parse(localStorage.getItem("domain_data")).domainName,o=JSON.parse(localStorage.getItem("domain_data")).domainId,s=localStorage.getItem("username"),r={method:"POST",headers:{"X-Tenant":n,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({username:s,domainId:o,domainName:n,startEvent:a,formCodes:this.state.formCodes,processDefinitionKey:this.state.processKey})};fetch(u.s+"/api/process/startProcess",r).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){t.setState({processInstanceId:e.processInstanceId}),t.props.history.push("/process/instances/"+localStorage.getItem("processName"))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.visible;return Object(n.jsx)("div",{children:Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{children:this.state.formName}),Object(n.jsxs)(c.g,{children:[t&&Object(n.jsx)(F.ProgressBar,{mode:"indeterminate",style:{height:"6px"}}),this.state.forms.map((function(t,a){return e.formFunction(t,a)})),!t&&Object(n.jsx)(O.Form,{form:this.state.submitFormFields,onSubmit:function(t){return e.handleFormSubmit(t)}})]})]})})}}]),a}(s.Component),G=L,H=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(36)]).then(a.bind(null,3037))})),X=r.a.lazy((function(){return Promise.all([a.e(1),a.e(65)]).then(a.bind(null,1440))})),U=r.a.lazy((function(){return Promise.all([a.e(1),a.e(11),a.e(71)]).then(a.bind(null,3038))})),R=r.a.lazy((function(){return Promise.all([a.e(1),a.e(11),a.e(89)]).then(a.bind(null,3039))})),V=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(51)]).then(a.bind(null,3040))})),W=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(60)]).then(a.bind(null,3041))})),q=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(61)]).then(a.bind(null,3042))})),Q=r.a.lazy((function(){return Promise.all([a.e(1),a.e(5),a.e(18),a.e(64)]).then(a.bind(null,3043))})),Y=r.a.lazy((function(){return Promise.all([a.e(5),a.e(10),a.e(13),a.e(18),a.e(85)]).then(a.bind(null,3044))})),Z=r.a.lazy((function(){return Promise.all([a.e(1),a.e(17),a.e(106)]).then(a.bind(null,3046))})),$=r.a.lazy((function(){return Promise.all([a.e(1),a.e(17),a.e(107)]).then(a.bind(null,3047))})),ee=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(12),a.e(39),a.e(38)]).then(a.bind(null,3111))})),te=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(67)]).then(a.bind(null,3049))})),ae=r.a.lazy((function(){return Promise.all([a.e(1),a.e(10),a.e(12),a.e(15),a.e(98)]).then(a.bind(null,3118))})),ne=r.a.lazy((function(){return Promise.all([a.e(1),a.e(10),a.e(12),a.e(15),a.e(97)]).then(a.bind(null,3119))})),oe=r.a.lazy((function(){return Promise.all([a.e(5),a.e(6),a.e(43)]).then(a.bind(null,3051))})),se=r.a.lazy((function(){return Promise.all([a.e(5),a.e(6),a.e(44)]).then(a.bind(null,3052))})),re=r.a.lazy((function(){return Promise.all([a.e(5),a.e(6),a.e(63)]).then(a.bind(null,3053))})),ie=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(46)]).then(a.bind(null,3054))})),ce=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(4),a.e(31)]).then(a.bind(null,3055))})),le=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(4),a.e(32)]).then(a.bind(null,3056))})),me=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(3),a.e(4),a.e(30)]).then(a.bind(null,3057))})),ue=r.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(7),a.e(105)]).then(a.bind(null,1497))})),de=r.a.lazy((function(){return Promise.all([a.e(1),a.e(72)]).then(a.bind(null,3058))})),pe=r.a.lazy((function(){return a.e(99).then(a.bind(null,3059))})),he=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(34)]).then(a.bind(null,3060))})),fe=r.a.lazy((function(){return Promise.all([a.e(9),a.e(92)]).then(a.bind(null,3061))})),be=r.a.lazy((function(){return Promise.all([a.e(1),a.e(66)]).then(a.bind(null,1504))})),je=r.a.lazy((function(){return Promise.all([a.e(1),a.e(73)]).then(a.bind(null,3062))})),ge=r.a.lazy((function(){return a.e(100).then(a.bind(null,3063))})),Oe=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(37)]).then(a.bind(null,3064))})),xe=r.a.lazy((function(){return Promise.all([a.e(114),a.e(96)]).then(a.bind(null,3122))})),Se=r.a.lazy((function(){return Promise.all([a.e(33),a.e(103)]).then(a.bind(null,3065))})),ve=r.a.lazy((function(){return Promise.all([a.e(9),a.e(101)]).then(a.bind(null,3109))})),ye=r.a.lazy((function(){return Promise.all([a.e(9),a.e(88)]).then(a.bind(null,3069))})),Ne=r.a.lazy((function(){return Promise.all([a.e(9),a.e(87)]).then(a.bind(null,3070))})),Ie=r.a.lazy((function(){return Promise.all([a.e(6),a.e(69)]).then(a.bind(null,3071))})),we=r.a.lazy((function(){return a.e(111).then(a.bind(null,3072))})),ke=r.a.lazy((function(){return a.e(110).then(a.bind(null,3073))})),ze=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(62)]).then(a.bind(null,3074))})),Ce=r.a.lazy((function(){return a.e(95).then(a.bind(null,3075))})),Pe=r.a.lazy((function(){return Promise.all([a.e(9),a.e(102)]).then(a.bind(null,3076))})),Je=r.a.lazy((function(){return a.e(91).then(a.bind(null,3114))})),_e=r.a.lazy((function(){return Promise.resolve().then(a.bind(null,2403))})),Te=r.a.lazy((function(){return a.e(78).then(a.bind(null,2503))})),Fe=r.a.lazy((function(){return a.e(81).then(a.bind(null,2504))})),De=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(52)]).then(a.bind(null,3077))})),Ae=r.a.lazy((function(){return Promise.all([a.e(3),a.e(5),a.e(10),a.e(13),a.e(83)]).then(a.bind(null,3078))})),Ke=r.a.lazy((function(){return Promise.all([a.e(3),a.e(5),a.e(10),a.e(13),a.e(84)]).then(a.bind(null,3079))})),Me=r.a.lazy((function(){return Promise.all([a.e(1),a.e(3),a.e(74)]).then(a.bind(null,3080))})),Be=r.a.lazy((function(){return Promise.all([a.e(1),a.e(3),a.e(75)]).then(a.bind(null,3081))})),Ee=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(54)]).then(a.bind(null,3082))})),Le=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(49)]).then(a.bind(null,3083))})),Ge=r.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(7),a.e(56)]).then(a.bind(null,3084))})),He=r.a.lazy((function(){return Promise.all([a.e(0),a.e(4),a.e(58)]).then(a.bind(null,3085))})),Xe=r.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(7),a.e(77)]).then(a.bind(null,3086))})),Ue=r.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(7),a.e(55)]).then(a.bind(null,3087))})),Re=r.a.lazy((function(){return Promise.all([a.e(0),a.e(4),a.e(57)]).then(a.bind(null,3088))})),Ve=r.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(7),a.e(76)]).then(a.bind(null,3089))})),We=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(4),a.e(29)]).then(a.bind(null,3090))})),qe=r.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(7),a.e(68)]).then(a.bind(null,3091))})),Qe=r.a.lazy((function(){return a.e(59).then(a.bind(null,1498))})),Ye=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(48)]).then(a.bind(null,3092))})),Ze=r.a.lazy((function(){return Promise.all([a.e(3),a.e(5),a.e(6),a.e(40)]).then(a.bind(null,3093))})),$e=r.a.lazy((function(){return Promise.all([a.e(3),a.e(5),a.e(6),a.e(41)]).then(a.bind(null,3094))})),et=r.a.lazy((function(){return Promise.all([a.e(3),a.e(5),a.e(6),a.e(42)]).then(a.bind(null,3095))})),tt=r.a.lazy((function(){return Promise.all([a.e(35),a.e(109)]).then(a.bind(null,3116))})),at=[{path:"/admin/messaging/list",name:"Liste de messagerie",component:r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(45)]).then(a.bind(null,3096))}))},{path:"/admin/messaging/send",name:"Envoyer un message",component:r.a.lazy((function(){return Promise.all([a.e(1),a.e(11),a.e(70)]).then(a.bind(null,3097))}))},{path:"/admin/messaging/preview/:messageId",name:"Apper\xe7u de message",component:r.a.lazy((function(){return Promise.all([a.e(1),a.e(11),a.e(86)]).then(a.bind(null,3098))}))},{path:"/admin/subscription",exact:!0,name:"Abonnement",component:me},{path:"/admin/organization/subscription",name:"Abonnement",component:ue},{path:"/admin/subscription/edit/:tenant",name:"Modifier",component:ce},{path:"/admin/subscription/preview/:tenant",name:"Apper\xe7u",component:le},{path:"/admin/cartography/list",name:"Liste de cartographie",component:r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(50)]).then(a.bind(null,3099))}))},{path:"/admin/dependencies/list",name:"Liste de matrice de d\xe9pendance",component:r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(47)]).then(a.bind(null,3100))}))},{path:"/admin/dependencies/create",name:"Cr\xe9er une matrice de d\xe9pendance",component:r.a.lazy((function(){return Promise.all([a.e(1),a.e(19),a.e(90)]).then(a.bind(null,3101))}))},{path:"/admin/dependencies/preview/:dependencyId",name:"Apper\xe7u de matrice de d\xe9pendance",component:r.a.lazy((function(){return Promise.all([a.e(1),a.e(19),a.e(104)]).then(a.bind(null,3115))}))},{path:"/admin/report/list",name:"Liste des rapports",component:r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(53)]).then(a.bind(null,3102))}))},{path:"/admin/settings",name:"Profile de l'entreprise",component:qe},{path:"/admin/company/profile/edit",name:"Modifier le profile de l'entreprise",component:We},{path:"/domain/:token",name:"Domaine",component:Te},{path:"/register/:token",name:"S'inscrire",component:Fe},{path:"/dashboard",exact:!0,name:"Tableau de bord",component:ee},{path:"/admin/dashboard/create",name:"Cr\xe9er un tableau de board",component:ne},{path:"/admin/dashboard/list",name:"tableaux de board",component:te},{path:"/admin/dashboard/edit/:dashboardId",name:"Modifier le tableau de board",component:ae},{path:"/tree",name:"Tree",component:xe},{path:"/calendar",name:"Calendar",component:tt},{path:"/orgchart",name:"Users OrgChart",component:Qe},{path:"/allmenu",name:"Tree",component:_e},{path:"/menu",name:"Menu",component:Se},{path:"/demo",name:"Demo",component:ve},{path:"/demoCheck",name:"DemoChekbox",component:Pe},{path:"/advancedTables",name:"Advanced Tables",component:Je},{path:"/admin/form/list",name:"G\xe9n\xe9rateur de formulaires",component:H},{path:"/admin/form/create",name:"Cr\xe9er un formulaire",component:X},{path:"/admin/form/edit/:formCode/:formId",name:"Modifier le formulaire",component:de},{path:"/admin/indexView/edit/:workflowMasterId",name:"Vue d'index",component:Ie},{path:"/admin/form/preview/:formCode",name:"Aper\xe7u du formulaire",component:pe},{path:"/admin/master/create",name:"Cr\xe9er un ma\xeetre",component:be},{path:"/admin/master/list",name:"Constructeur de ma\xeetre",component:Oe},{path:"/admin/master/edit/:masterId",name:"Modifier le ma\xeetre",component:je},{path:"/admin/master/preview/:masterId",name:"Aper\xe7u du ma\xeetre",component:ge},{path:"/admin/master/menuMapping/:masterId",name:"Mappage du menu",component:ye},{path:"/admin/master/listMapping/:masterId",name:"Vue d'index ma\xeetre",component:Ne},{path:"/master/list/:masterId",name:"Liste des instances de ma\xeetre",component:ze},{path:"/master/view/:masterId/:masterInstanceId",name:"Aper\xe7u",component:we},{path:"/master/newInstance/:masterId",name:"Ajouter un nouveau",component:ke},{path:"/admin/notification/create",name:"Cr\xe9er une notification",component:U},{path:"/admin/notification/list",name:"G\xe9n\xe9rateur de notifications",component:V},{path:"/admin/notification/edit/:notificationId",name:"Modifier la notification",component:R},{path:"/admin/workflow/list",name:"G\xe9n\xe9rateur de flux de travail",component:W},{path:"/admin/workflow/create",name:"Cr\xe9er flux de travail",component:Q},{path:"/admin/workflow/edit/:workflowId",name:"Modifier le flux de travail",component:Y},{path:"/admin/workflowMaster/menuMapping/:workflowMasterId",name:"Mappage du menu",component:fe},{path:"/admin/workflowMaster/create",name:"Cr\xe9er ma\xeetre de flux de travail",component:Z},{path:"/admin/workflowMaster/notificationSettings",name:"param\xe9trage de notification",component:$},{path:"/admin/workflowMaster/list",name:"G\xe9n\xe9rateur de ma\xeetre de flux de travail",component:q},{path:"/admin/script/create",name:"Cr\xe9er un script",component:Me},{path:"/admin/script/list",name:"G\xe9n\xe9rateur de scripts",component:Ee},{path:"/admin/script/edit/:scriptId",name:"Modifier le script",component:Be},{path:"/admin/print/create",name:"Cr\xe9er une impression",component:Ae},{path:"/admin/print/list",name:"Constructeur d'impression",component:De},{path:"/admin/print/edit/:printId",name:"Modifier l'impression",component:Ke},{path:"/report/view",name:"Rapport",component:Ce},{path:"/admin/user/list",name:"Utilisateurs",component:Le},{path:"/admin/user/create",name:"Cr\xe9er un nouveau utilisateur",component:Ge},{path:"/admin/user/edit/:username",name:"Modifier l'utilisateur",component:He},{path:"/admin/user/preview/:username",name:"Aper\xe7u de l'utilisateur",component:Xe},{path:"/user/edit/:username",name:"Modifier votre profile",component:Re},{path:"/user/preview/:username",name:"Profile",component:Ve},{path:"/user/change/pwd",name:"Profile",component:Ue},{path:"/admin/role/list",name:"Roles",component:Ye},{path:"/admin/role/create",name:"Cr\xe9er un r\xf4le",component:Ze},{path:"/admin/role/edit/:roleId",name:"Cr\xe9er un r\xf4le",component:$e},{path:"/admin/role/preview/:roleId",name:"Cr\xe9er un r\xf4le",component:et},{path:"/admin/norme/create",name:"Cr\xe9er une norme",component:oe},{path:"/admin/norme/edit/:normId",name:"Modifier la norme",component:se},{path:"/admin/norme/preview/:normId",name:"Aper\xe7u de la norme",component:re},{path:"/admin/norme/list",name:"List des normes",component:ie},{path:"/process/instances/:processKey/:workflowMasterId",name:"Instances",component:he},{path:"/NewInstance/:processKey",exact:!0,name:"New Instance",component:G},{path:"/NewInstance/:processKey/:workflowMasterId/:processInstanceId",name:"New Instance",component:r.a.lazy((function(){return a.e(108).then(a.bind(null,3103))}))},{path:"/userNotification/:workflowMasterName/:taskName/:textFields/:processDefinitionKey/:processInstanceId/:taskId",name:"User Notification",component:function(e){var t=r.a.useState([]),a=Object(m.a)(t,2),o=(a[0],a[1],r.a.useState({})),l=Object(m.a)(o,2),d=(l[0],l[1]),p=r.a.useState(""),h=Object(m.a)(p,2),f=h[0],b=h[1],j=r.a.useState(""),g=Object(m.a)(j,2),O=g[0],x=g[1],S=r.a.useState(""),v=Object(m.a)(S,2),y=(v[0],v[1],r.a.useState("")),N=Object(m.a)(y,2),I=N[0],w=N[1],k=r.a.useState(""),z=Object(m.a)(k,2),C=z[0],P=z[1],J=r.a.useState(""),_=Object(m.a)(J,2),T=_[0],F=_[1],D=r.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),A=Object(m.a)(D,2),K=A[0],M=(A[1],Object(i.i)());return Object(s.useEffect)((function(){var t=e.match.params.taskId;b(t);var a=e.match.params.processDefinitionKey,n=e.match.params.workflowMasterName,o=e.match.params.textFields,s=e.match.params.taskName;w(n),"null"!==o&&F(o),P(s),x(a);var r={method:"GET",headers:{"X-Tenant":K,"Content-Type":"application/json"}};fetch(u.s+"/api/process/auth/getTaskById/"+t,r).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){console.log(e),null!=e&&d(e)})).catch((function(e){console.log(e)}))})),Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{color:"rose",icon:!0,children:Object(n.jsx)("h4",{children:"Notification d'utilisateur"})}),Object(n.jsx)(c.g,{children:Object(n.jsxs)(c.O,{children:[Object(n.jsxs)(c.k,{xs:"10",children:[Object(n.jsx)("div",{style:{fontSize:"16px"},className:"font-weight-bold",children:I}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"text-muted font-weight-bold",children:C}),Object(n.jsx)("div",{className:"text-muted",children:T})]})]}),Object(n.jsx)(c.k,{xs:"2",children:Object(n.jsx)(c.e,{color:"info",className:"float-right",onClick:function(t){return function(t){var a=M.processInstanceId,n=localStorage.getItem("username");e.history.push("/execute/"+O+"/"+a+"/"+f+"/"+n)}()},children:"Compl\xe9ter"})})]})})]})}},{path:"/groupNotification/:workflowMasterName/:taskName/:textFields/:processDefinitionKey/:processInstanceId/:taskId",name:"Group Notification",component:function(e){var t=r.a.useState([]),a=Object(m.a)(t,2),o=(a[0],a[1],r.a.useState({})),i=Object(m.a)(o,2),l=(i[0],i[1]),d=r.a.useState(""),p=Object(m.a)(d,2),h=p[0],f=p[1],b=r.a.useState(null),j=Object(m.a)(b,2),g=j[0],O=(j[1],r.a.useState("")),x=Object(m.a)(O,2),S=(x[0],x[1],r.a.useState("")),v=Object(m.a)(S,2),y=v[0],N=v[1],I=r.a.useState(""),w=Object(m.a)(I,2),k=w[0],z=w[1],C=r.a.useState(""),P=Object(m.a)(C,2),J=P[0],_=P[1],T=r.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),F=Object(m.a)(T,2),D=F[0];return F[1],Object(s.useEffect)((function(){var t=e.match.params.taskId,a=e.match.params.processDefinitionKey,n=e.match.params.workflowMasterName,o=e.match.params.textFields,s=e.match.params.taskName;N(n),"null"!==o&&_(o),z(s),f(a);var r={method:"GET",headers:{"X-Tenant":D,"Content-Type":"application/json"}};fetch(u.s+"/api/process/auth/getTaskById/"+t,r).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){console.log(e),null!=e&&l(e)})).catch((function(e){console.log(e)}))})),Object(n.jsxs)("div",{children:[" ",g,Object(n.jsxs)(c.f,{children:[Object(n.jsx)(c.j,{color:"rose",icon:!0,children:Object(n.jsx)("h4",{children:"Notifications de groupe"})}),Object(n.jsx)(c.g,{children:Object(n.jsxs)(c.O,{children:[Object(n.jsxs)(c.k,{xs:"10",children:[Object(n.jsx)("div",{style:{fontSize:"16px"},className:"font-weight-bold",children:y}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"text-muted font-weight-bold",children:k}),Object(n.jsx)("div",{className:"text-muted",children:J})]})]}),Object(n.jsx)(c.k,{xs:"2",children:Object(n.jsx)(c.e,{color:"info",className:"float-right",onClick:function(t){t.preventDefault();var a=e.match.params.taskId,n=e.match.params.processInstanceId;console.log(a);var o={method:"POST",headers:{"X-Tenant":D,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({username:localStorage.getItem("username"),taskId:a,processInstanceId:n})};fetch(u.s+"/api/process/auth/claimTask",o).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){1===t&&function(t){var a=e.match.params.taskId,n=e.match.params.processInstanceId,o=localStorage.getItem("username");e.history.push("/execute/"+h+"/"+n+"/"+a+"/"+o)}()})).catch((function(e){console.log(e)}))},children:"D\xe9mander"})})]})})]})]})}},{path:"/historic/:processInstanceId/:workflowMasterId",name:"Process History",component:D},{path:"/execute/:processDefinitionKey/:processInstanceId/:taskId/:username",name:"Form Task",component:E}],nt=a(170),ot=Object(n.jsx)("div",{className:"pt-3 text-center",children:Object(n.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),st=function(){return Object(n.jsx)("main",{className:"c-main",onLoad:function(){return Object(n.jsx)("i",{className:"pi pi-spin pi-spinner",color:"primary",style:{fontSize:"2em"}})},children:Object(n.jsx)(c.l,{fluid:!0,children:Object(n.jsx)(s.Suspense,{fallback:ot,children:Object(n.jsxs)(i.d,{children:[at.map((function(e,t){return e.component&&Object(n.jsx)(i.b,{path:e.path,exact:e.exact,name:e.name,render:function(t){return Object(n.jsx)(c.s,{children:Object(n.jsx)(e.component,Object(o.a)({},t))})}},t)})),Object(n.jsx)(i.a,{from:"/",to:"/dashboard"})]})})})})},rt=r.a.memo(st),it=function(){return Object(n.jsx)(c.t,{fixed:!1})},ct=r.a.memo(it),lt=a(33),mt=a.n(lt),ut=a(52),dt=a(168),pt=a(923),ht=a.n(pt),ft=a.p+"static/media/ISCT-Group.53881521.png",bt=Object(i.j)((function(e){var t=Object(i.g)(),a=Object(nt.a)(),o=r.a.useState(""),l=Object(m.a)(o,2),d=(l[0],l[1]);Object(s.useEffect)((function(){if(void 0===JSON.parse(localStorage.getItem("domain_data"))||null===JSON.parse(localStorage.getItem("domain_data")))localStorage.clear(),t.push("/domain");else{var e=function(){var e=Object(ut.a)(mt.a.mark((function e(){var a,n,o;return mt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ht()(u.f,{reconnect:!0}),null!==localStorage.getItem("domain_data")&&(n=JSON.parse(localStorage.getItem("domain_data")).domainName,o={method:"GET",headers:{"X-Tenant":n,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}},fetch(u.s+"/api/process/auth/getTasksForNotification/"+n+"/"+localStorage.getItem("username"),o).then((function(e){if(400!==e.status)return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}));localStorage.clear(),t.push("/domain")})).then((function(e){null!=e&&a.emit("send_notif",{username:localStorage.getItem("username"),group_tasks:e.group_tasks,group_historic:e.group_historic,user_historic:e.user_historic,groupProcessDefinitionKeys:e.groupProcessDefinitionKeys,groupProcessInstanceIds:e.groupProcessInstanceIds,user_tasks:e.user_tasks,userProcessDefinitionKeys:e.userProcessDefinitionKeys,userProcessInstanceIds:e.userProcessInstanceIds})})).catch((function(e){console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d(JSON.parse(localStorage.getItem("domain_data")).domainName);JSON.parse(localStorage.getItem("domain_data")).domainName;(function(){var e=Object(ut.a)(mt.a.mark((function e(){return mt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==a&&null!==a&&null!==JSON.parse(localStorage.getItem("domain_data"))&&void 0!==JSON.parse(localStorage.getItem("domain_data"))?(JSON.parse(localStorage.getItem("domain_data")).domainId,JSON.parse(localStorage.getItem("domain_data")).domainName):(localStorage.clear(),t.push("/domain"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),e()}}));var p=Object(dt.b)(),h=Object(dt.c)((function(e){return e.sidebarShow}));return Object(n.jsxs)(c.w,{withSubheader:!0,children:[Object(n.jsx)(c.bb,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var e=!![!1,"responsive"].includes(h)||"responsive";p({type:"set",sidebarShow:e})}}),Object(n.jsx)(c.bb,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var e=![!0,"responsive"].includes(h)&&"responsive";p({type:"set",sidebarShow:e})}}),Object(n.jsx)(c.x,{className:"mx-auto d-lg-none",to:"/",children:Object(n.jsx)(c.z,{src:ft,height:56})}),Object(n.jsx)(c.y,{className:"d-md-down-none mr-auto"}),Object(n.jsxs)(c.y,{className:"px-3",children:[Object(n.jsx)(vt,{}),Object(n.jsx)(yt,{}),Object(n.jsx)(jt.a,{})]}),function(){var e=localStorage.getItem("domain_expiration_date");if(void 0!==e&&null!==e){var t=Number(e.substr(6,4)),a=Number(e.substr(3,2)),o=Number(e.substr(0,2)),s=((new Date).toLocaleString(),(new Date).getFullYear()),r=Number((new Date).toLocaleString("en-US",{month:"2-digit"})),i=Number((new Date).toLocaleString("en-US",{day:"2-digit"}));if(t===s){if(a===r&&o-i<=5)return Object(n.jsx)(c.X,{className:"px-3 justify-content-between",children:Object(n.jsxs)("div",{className:"d-md-down-none mfe-2 c-subheader-nav center",style:{textAlign:"center"},children:["Le demo expirera le ",Object(n.jsxs)("span",{style:{color:"red",fontWeight:"bold"},children:[" \xa0 ",e]}),Object(n.jsxs)(c.I,{className:"c-subheader-nav-link",href:"#",style:{color:"blue"},children:[Object(n.jsx)(g.a,{name:"cil-credit-card",alt:"Abonnez-vous maintenant"})," \xa0 Abonnez-vous maintenant!"]})]})});if(a===r+1&&2!==r&&30-i+o<=5)return Object(n.jsx)(c.X,{className:"px-3 justify-content-between",children:Object(n.jsxs)("div",{className:"d-md-down-none mfe-2 c-subheader-nav center",style:{textAlign:"center"},children:["Le demo expirera le ",Object(n.jsxs)("span",{style:{color:"red",fontWeight:"bold"},children:[" \xa0 ",e]}),Object(n.jsxs)(c.I,{className:"c-subheader-nav-link",href:"#",style:{color:"blue"},children:[Object(n.jsx)(g.a,{name:"cil-credit-card",alt:"Abonnez-vous maintenant"})," \xa0 Abonnez-vous maintenant!"]})]})});if(a===r+1&&2===r&&28-i+o<=5)return Object(n.jsx)(c.X,{className:"px-3 justify-content-between",children:Object(n.jsxs)("div",{className:"d-md-down-none mfe-2 c-subheader-nav center",style:{textAlign:"center"},children:["Le demo expirera le ",Object(n.jsxs)("span",{style:{color:"red",fontWeight:"bold"},children:[" \xa0 ",e]}),Object(n.jsxs)(c.I,{className:"c-subheader-nav-link",href:"#",style:{color:"blue"},children:[Object(n.jsx)(g.a,{name:"cil-credit-card",alt:"Abonnez-vous maintenant"})," \xa0 Abonnez-vous maintenant!"]})]})})}if(t===s+1&&1===a&&12===r&&31-i+o<=5)return Object(n.jsx)(c.X,{className:"px-3 justify-content-between",children:Object(n.jsxs)("div",{className:"d-md-down-none mfe-2 c-subheader-nav center",style:{textAlign:"center"},children:["Le demo expirera le ",Object(n.jsxs)("span",{style:{color:"red",fontWeight:"bold"},children:[" \xa0 ",e]}),Object(n.jsxs)(c.I,{className:"c-subheader-nav-link",href:"#",style:{color:"blue"},children:[Object(n.jsx)(g.a,{name:"cil-credit-card",alt:"Abonnez-vous maintenant"})," \xa0 Abonnez-vous maintenant!"]})]})})}}()]})})),jt=a(1373),gt=a(3029),Ot=a(3032),xt=a(3033),St=a(167),vt=function(e){var t=r.a.useState(null),a=Object(m.a)(t,2),o=(a[0],a[1],r.a.useState([])),i=Object(m.a)(o,2),l=(i[0],i[1]),d=r.a.useState([]),p=Object(m.a)(d,2),h=p[0],f=p[1],b=r.a.useState([]),j=Object(m.a)(b,2),g=(j[0],j[1],r.a.useState([])),O=Object(m.a)(g,2),x=(O[0],O[1]),S=r.a.useState([]),v=Object(m.a)(S,2),y=v[0],N=v[1],I=r.a.useState([]),w=Object(m.a)(I,2),k=w[0],z=w[1],C=r.a.useState([]),P=Object(m.a)(C,2),J=(P[0],P[1],r.a.useState(null)),_=Object(m.a)(J,2),T=(_[0],_[1],r.a.useState(null)),F=Object(m.a)(T,2),D=(F[0],F[1],r.a.useState([[]])),A=Object(m.a)(D,2),K=A[0],M=A[1],B=r.a.useState([]),E=Object(m.a)(B,2),L=(E[0],E[1],r.a.useState([])),G=Object(m.a)(L,2),H=(G[0],G[1],r.a.useState("")),X=Object(m.a)(H,2),U=(X[0],X[1],r.a.useState("")),R=Object(m.a)(U,2),V=(R[0],R[1]),W=r.a.useState(localStorage.getItem("username")),q=Object(m.a)(W,2),Q=q[0];q[1];Object(s.useEffect)((function(){ht()(u.f,{reconnect:!0}).on("receive_notif_"+Q,(function(e){if(z([]),f([]),N([]),l([]),x([]),null!==e){var t=JSON.parse(e.group_tasks),a=JSON.parse(e.group_historic);z(t);var n=[],o=[];t.map((function(e,t){var s=[];e.fieldList.map((function(e){var n=!1;a[t].map((function(t){t.value[e]&&!1===n&&(s.push({label:t.value[e],value:e}),n=!0)}))})),n.push(s);var r="";s.map((function(e){if(""!==r&&"sNo"!==e.value&&(r+=" | "),"sNo"===e.value){var t=e.label+" | "+r;r=t}else r+=e.label})),""===r&&(r="null"),o.push(r),V(r)})),M(o);var s=JSON.parse(e.groupProcessDefinitionKeys);f(s);var r=JSON.parse(e.groupProcessInstanceIds);N(r)}}))}),[]);var Y=k.length;return Object(n.jsx)("div",{children:Object(n.jsxs)(c.o,{inNav:!0,className:"c-header-nav-item mx-2",id:"1",children:[Object(n.jsxs)(c.r,{className:"c-header-nav-link",caret:!1,children:[Object(n.jsx)(gt.a,{}),0!==Y?Object(n.jsx)(c.b,{shape:"pill",color:"danger",children:Y}):null]}),Object(n.jsxs)(c.q,{className:"pt-0",placement:"bottom-end",style:{width:"400px"},children:[Object(n.jsx)(c.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(n.jsxs)("strong",{children:[Y," Notifications de groupe"]})}),k.map((function(e,t){if(null!==e)return Object(n.jsx)(c.p,{header:!0,tag:"div",children:Object(n.jsxs)("div",{className:"message",children:[Object(n.jsx)("div",{className:"pt-3 mr-3 float-left",children:Object(n.jsx)("div",{className:"c-avatar",children:Object(n.jsxs)(c.o,{id:k[t].step,children:[Object(n.jsx)(c.r,{style:{marginTop:"-40px"},children:Object(n.jsx)(Ot.a,{})}),Object(n.jsx)(c.q,{small:!0,children:Object(n.jsx)(c.p,{children:Object(n.jsxs)(St.b,{to:"/groupNotification/"+k[t].workflowMasterName+"/"+k[t].step+"/"+K[t]+"/"+h[t]+"/"+y[t]+"/"+k[t].taskId,children:[Object(n.jsx)(xt.a,{})," \xa0\xa0D\xe9mander"]})})})]})})}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"text-muted",style:{fontSize:"14px"},children:k[t].workflowMasterName})}),Object(n.jsx)("div",{className:"text-truncate",style:{fontSize:"12px"},children:k[t].step}),Object(n.jsx)("div",{className:"text-truncate",children:"null"!==K[t]?K[t]:" "})]})})}))]})]})})},yt=function(e){var t=r.a.useState(null),a=Object(m.a)(t,2),o=(a[0],a[1],r.a.useState([])),i=Object(m.a)(o,2),l=i[0],d=i[1],p=r.a.useState([]),h=Object(m.a)(p,2),f=(h[0],h[1],r.a.useState([])),b=Object(m.a)(f,2),j=(b[0],b[1]),O=r.a.useState([]),x=Object(m.a)(O,2),S=x[0],v=x[1],y=r.a.useState([]),N=Object(m.a)(y,2),I=N[0],w=N[1],k=r.a.useState([]),z=Object(m.a)(k,2),C=(z[0],z[1]),P=r.a.useState(null),J=Object(m.a)(P,2),_=(J[0],J[1],r.a.useState(null)),T=Object(m.a)(_,2),F=(T[0],T[1],r.a.useState(localStorage.getItem("username"))),D=Object(m.a)(F,2),A=D[0],K=(D[1],r.a.useState([[]])),M=Object(m.a)(K,2),B=M[0],E=M[1],L=r.a.useState(""),G=Object(m.a)(L,2),H=(G[0],G[1]);Object(s.useEffect)((function(){ht()(u.f,{reconnect:!0}).on("receive_notif_"+A,(function(e){if(C([]),j([]),w([]),d([]),v([]),null!==e.user_tasks){var t=JSON.parse(e.user_tasks),a=JSON.parse(e.user_historic);d(t);var n=[],o=[];t.map((function(e,t){var s=[];e.fieldList.map((function(e){var n=!1;a[t].map((function(t){t.value[e]&&!1===n&&(s.push({label:t.value[e],value:e}),n=!0)}))})),n.push(s);var r="";s.map((function(e){if(""!==r&&"sNo"!==e.value&&(r+=" | "),"sNo"===e.value){var t=e.label+" | "+r;r=t}else r+=e.label})),""===r&&(r="null"),o.push(r),H(r)})),E(o);var s=JSON.parse(e.userProcessDefinitionKeys);v(s);var r=JSON.parse(e.userProcessInstanceIds);w(r)}}))}),[]);var X=l.length;return Object(n.jsxs)(c.o,{inNav:!0,className:"c-header-nav-item mx-2",id:"1",children:[Object(n.jsxs)(c.r,{className:"c-header-nav-link",caret:!1,children:[Object(n.jsx)(g.a,{name:"cil-list"}),0!==X?Object(n.jsx)(c.b,{shape:"pill",color:"warning",children:X}):null]}),Object(n.jsxs)(c.q,{className:"pt-0 ",placement:"bottom-end",style:{width:"400px"},children:[Object(n.jsx)(c.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(n.jsxs)("strong",{children:[X," Notification d'utilisateur"]})}),l.map((function(e,t){if(null!==e)return Object(n.jsx)(c.p,{header:!0,tag:"div",children:Object(n.jsxs)("div",{className:"message",children:[Object(n.jsx)("div",{className:"pt-3 mr-3 float-left",children:Object(n.jsx)("div",{className:"c-avatar",children:Object(n.jsxs)(c.o,{id:e.step,children:[Object(n.jsx)(c.r,{style:{marginTop:"-40px"},children:Object(n.jsx)(Ot.a,{})}),Object(n.jsx)(c.q,{small:!0,children:Object(n.jsx)(c.p,{children:Object(n.jsxs)(St.b,{to:"/userNotification/"+e.workflowMasterName+"/"+e.step+"/"+B[t]+"/"+S[t]+"/"+I[t]+"/"+e.taskId,children:[Object(n.jsx)(xt.a,{})," \xa0\xa0Compl\xe9ter"]})})})]})})}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"text-muted",style:{fontSize:"14px"},children:e.workflowMasterName})}),Object(n.jsx)("div",{className:"text-truncate",style:{fontSize:"12px"},children:e.step}),Object(n.jsx)("div",{className:"text-truncate",children:"null"!==B[t]?B[t]:" "})]})})}))]})]})},Nt=(a(1256),a(2403),a(2404),g.a,function(e){e=(e+="").replace("#","");if(!/[0-9A-Fa-f]/g.test(e)||3!==e.length&&6!==e.length)throw new Error("input is not a valid hex color.");if(3===e.length){var t=e[0],a=e[1],n=e[2];e=t+t+a+a+n+n}var o=(e=e.toUpperCase(e))[0]+e[1],s=e[2]+e[3],r=e[4]+e[5];return parseInt(o,16)+", "+parseInt(s,16)+", "+parseInt(r,16)}),It=["#9c27b0","#ab47bc","#8e24aa","#af2cc5","#7b1fa2"],wt=["#ff9800","#ffa726","#fb8c00","#ffa21a","#f57c00","#faf2cc","#fcf8e3"],kt=["#f44336","#ef5350","#e53935","#f55a4e","#d32f2f","#ebcccc","#f2dede"],zt=["#4caf50","#66bb6a","#43a047","#5cb860","#388e3c","#d0e9c6","#dff0d8"],Ct=["#00acc1","#26c6da","#00acc1","#00d3ee","#0097a7","#c4e3f3","#d9edf7"],Pt=["#e91e63","#ec407a","#d81b60","#eb3573","#c2185b"],Jt=["#999","#777","#3C4858","#AAAAAA","#D2D2D2","#DDD","#555555","#333","#eee","#ccc","#e4e4e4","#E5E5E5","#f9f9f9","#f5f5f5","#495057","#e7e7e7","#212121","#c8c8c8","#505050"],_t="#000",Tt="#FFF",Ft=(Nt(_t),Nt(_t),Nt(_t),{boxShadow:"0 4px 20px 0 rgba("+Nt(_t)+",.14), 0 7px 10px -5px rgba("+Nt(It[0])+",.4)"}),Dt={boxShadow:"0 4px 20px 0 rgba("+Nt(_t)+",.14), 0 7px 10px -5px rgba("+Nt(Ct[0])+",.4)"},At={boxShadow:"0 4px 20px 0 rgba("+Nt(_t)+",.14), 0 7px 10px -5px rgba("+Nt(zt[0])+",.4)"},Kt={boxShadow:"0 4px 20px 0 rgba("+Nt(_t)+",.14), 0 7px 10px -5px rgba("+Nt(wt[0])+",.4)"},Mt={boxShadow:"0 4px 20px 0 rgba("+Nt(_t)+",.14), 0 7px 10px -5px rgba("+Nt(kt[0])+",.4)"},Bt={boxShadow:"0 4px 20px 0 rgba("+Nt(_t)+",.14), 0 7px 10px -5px rgba("+Nt(Pt[0])+",.4)"},Et=(Object(o.a)({background:"linear-gradient(60deg, "+wt[1]+", "+wt[2]+")"},Kt),Object(o.a)({background:"linear-gradient(60deg, "+zt[1]+", "+zt[2]+")"},At),Object(o.a)({background:"linear-gradient(60deg, "+kt[1]+", "+kt[2]+")"},Mt),Object(o.a)({background:"linear-gradient(60deg, "+Ct[1]+", "+Ct[2]+")"},Dt),Object(o.a)({background:"linear-gradient(60deg, "+It[1]+", "+It[2]+")"},Ft),Object(o.a)({background:"linear-gradient(60deg, "+Pt[1]+", "+Pt[2]+")"},Bt),Nt(_t),Nt(_t),Object(o.a)({margin:"0 20px 10px",paddingTop:"10px",borderTop:"1px solid "+Jt[8],height:"auto"},{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"300",lineHeight:"1.5em"}),Nt(_t),Nt(_t),Nt(_t),Nt(Jt[6]),Nt(_t),Nt(_t),Nt(_t),{color:Jt[2],textDecoration:"none",fontWeight:"300",marginTop:"30px",marginBottom:"25px",minHeight:"32px",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif","& small":{color:Jt[1],fontSize:"65%",fontWeight:"400",lineHeight:"1"}}),Lt=(Object(o.a)(Object(o.a)({},Et),{},{marginTop:"0",marginBottom:"3px",minHeight:"auto","& a":Object(o.a)(Object(o.a)({},Et),{},{marginTop:".625rem",marginBottom:"0.75rem",minHeight:"auto"})}),a(875),function(e){var t=Object(dt.b)(),a=Object(dt.c)((function(e){return e.sidebarShow})),o=r.a.useState([]),l=Object(m.a)(o,2),d=l[0],p=l[1],h=r.a.useState(localStorage.getItem("workflowMasterAdded")),f=Object(m.a)(h,2),b=f[0],j=(f[1],r.a.useState(null)),O=Object(m.a)(j,2),x=O[0],S=O[1],v=r.a.useState(""),y=Object(m.a)(v,2),N=(y[0],y[1]),I=Object(i.g)();return Object(s.useEffect)((function(){if(null===JSON.parse(localStorage.getItem("domain_data")))I.push("/domain");else{var e=function(){var e=Object(ut.a)(mt.a.mark((function e(){var a;return mt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",headers:{"X-Tenant":t,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}},e.next=3,fetch(u.o+"/api/menu/auth/allMenu/"+s,a).then((function(e){return new Promise((function(t,a){console.log(e),200!==e.status?I.push("/domain"):e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){if(null!==e){var t=JSON.parse(e.menu_ims),a=JSON.parse(t.menu),o=JSON.parse(t.submenu),s={};a.map((function(e,t){if(s.name=e.name,s._tag=e._tag,s.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"===e._tag)s.to=e.to;else{var a=o[t],r=[],c={};a.map((function(e){c._tag=e._tag,c.name=e.name,c.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),c.to=e.to,c.exact=!1,r.push(c),c={}})),s._children=r}i.push(s),s={}}));var c=JSON.parse(JSON.parse(e.menu_master).menu),l=JSON.parse(JSON.parse(e.menu_master).submenu),m={};c.map((function(e,t){if(m.name=e.name,m._tag=e._tag,m.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"===e._tag)m.to=e.to;else{var a=l[t],o=[],s={};a.map((function(e){s._tag=e._tag,s.name=e.name,s.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),s.to=e.to,o.push(s),s={}})),m._children=o}r.push(m),m={}}));JSON.parse(JSON.parse(e.menu).menu);var u=[],d={},h=JSON.parse(localStorage.getItem("userRoles")),f=JSON.parse(localStorage.getItem("userPermissions"));console.log(h),console.log(f);var b=[];f.length&&f.map((function(e){e.map((function(e){b.push(e.key)}))})),JSON.parse(JSON.parse(e.menu).menu).map((function(e){if(null!==h&&null!==f)if("Administration"===e.name){if(b.includes(e.key)){e._children;if(d._tag=e._tag,d.name=e.name,d.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"!==e._tag){var t=e._children,a=[],o={};t.map((function(e){b.includes(e.key)&&(o._tag=e._tag,o.name=e.name,o.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"===e._tag&&(o.to=e.to,a.push(o),o={}))})),d._children=a}else d.to=e.to;u.push(d),d={}}}else{if(d._tag=e._tag,d.name=e.name,d.icon=Object(n.jsx)(g.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"!==e._tag){var s=e._children;a=[],o={};s.map((function(t){o._tag=t._tag,o.name=t.name,o.icon=Object(n.jsx)(g.a,{name:t.icon,customClasses:"c-sidebar-nav-icon"}),"SGI"===e.name&&"QMS"===t.name&&(o._children=i),"Ma\xeetres"===e.name&&"QMS"===t.name&&(o._children=r),a.push(o),o={}})),d._children=a}else d.to=e.to;u.push(d),d={}}})),p(u)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N(JSON.parse(localStorage.getItem("domain_data")).domainName);var t=JSON.parse(localStorage.getItem("domain_data")).domainName,a=null,o=localStorage.getItem("domain_image");a=""!==o?o.includes("data:image/")?o:"data:image/png;base64,"+o:ft,S(a);var s=localStorage.getItem("username"),r=[],i=[];e()}}),[b]),Object(n.jsxs)(c.Q,{show:a,onShowChange:function(e){return t({type:"set",sidebarShow:e})},children:[Object(n.jsx)(c.R,{className:"d-md-down-none",to:"/",style:{backgroundColor:Tt},children:Object(n.jsx)(c.z,{src:x,height:56})}),Object(n.jsx)(c.S,{children:Object(n.jsx)(c.m,{style:{whiteSpace:"break-spaces !important"},items:d,components:{CSidebarNavDivider:c.T,CSidebarNavDropdown:c.U,CSidebarNavItem:c.V,CSidebarNavTitle:c.W}})})]})}),Gt=r.a.memo(Lt)},1256:function(e,t,a){"use strict";a.r(t);var n=a(13),o=(a(1),a(1249)),s=(a(923),a(21)),r=a(170);a(115),a(173);t.default=function(){Object(s.g)(),Object(r.a)();return Object(n.jsxs)("div",{className:"c-app c-default-layout",children:[Object(n.jsx)(o.g,{}),Object(n.jsxs)("div",{className:"c-wrapper",children:[Object(n.jsx)(o.c,{}),Object(n.jsx)("div",{className:"c-body",children:Object(n.jsx)(o.a,{})}),Object(n.jsx)(o.b,{})]})]})}},1373:function(e,t,a){"use strict";(function(e){var n=a(13),o=a(89),s=a(1),r=a.n(s),i=a(21),c=a(633),l=a(639),m=(a(923),a(115));a(875);t.a=function(t){var a=Object(i.g)(),u=r.a.useState(""),d=Object(o.a)(u,2),p=d[0],h=d[1],f=r.a.useState(""),b=Object(o.a)(f,2),j=b[0],g=b[1],O=r.a.useState(localStorage.getItem("image")),x=Object(o.a)(O,2),S=x[0],v=x[1];Object(s.useEffect)((function(){var e=null;if(null===localStorage.getItem("domain_data"))localStorage.clear(),a.push("/domain");else{h(localStorage.getItem("username")),g(JSON.parse(localStorage.getItem("domain_data")).domainName);var t={method:"GET",headers:{"X-Tenant":JSON.parse(localStorage.getItem("domain_data")).domainName,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(m.v+"/api/auth/user/getUserByUsername/"+localStorage.getItem("username"),t).then((function(e){return e.json()})).then((function(t){JSON.parse(t.user);e=t.photo?"data:image/png;base64,"+t.photo:"img/user.png",v(e)}))}}),[S]);return Object(n.jsxs)(c.o,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(n.jsx)(c.r,{className:"c-header-nav-link",caret:!1,children:Object(n.jsx)("div",{className:"c-avatar",children:Object(n.jsx)(c.z,{src:S,className:"c-avatar-img",alt:"img"})})}),Object(n.jsxs)(c.q,{className:"pt-0",placement:"bottom-end",children:[Object(n.jsx)(c.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(n.jsx)("strong",{children:"Account"})}),Object(n.jsxs)(c.p,{children:[Object(n.jsx)(l.a,{name:"cil-home",className:"mfe-2"}),j]}),Object(n.jsxs)(c.p,{children:[Object(n.jsx)(l.a,{name:"cil-user",className:"mfe-2"}),p]}),Object(n.jsx)(c.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(n.jsx)("strong",{children:"Settings"})}),Object(n.jsxs)(c.p,{href:"#/user/preview/"+p,children:[Object(n.jsx)(l.a,{name:"cil-user",className:"mfe-2"}),"Profile"]}),Object(n.jsxs)(c.p,{href:"#/user/change/pwd",children:[Object(n.jsx)(l.a,{name:"cil-settings",className:"mfe-2"}),"Changer le mot de passe"]}),Object(n.jsxs)(c.p,{onClick:function(){localStorage.clear(),e.localStorage.clear(),a.push("/domain")},children:[Object(n.jsx)(l.a,{name:"cil-lock-locked",className:"mfe-2"}),"Logout"]})]})]})}}).call(this,a(90))},2403:function(e,t,a){"use strict";a.r(t);var n=a(13),o=a(89),s=a(1),r=a.n(s),i=a(115);t.default=function(){var e=r.a.useState([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=r.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),m=Object(o.a)(l,2),u=m[0];m[1];return Object(s.useEffect)((function(){var e={method:"GET",headers:{"X-Tenant":u,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(i.o+"/api/menu/auth/allMenu",e).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){console.log(JSON.parse(e.menu)),c(JSON.parse(e.menu))}))}),[]),Object(n.jsx)("div",{children:a})}},2417:function(e,t){},653:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(39),o=a(13),s=a(171),r=a(1),i=a.n(r),c=a(633),l=function(e){var t=e.name,a=e.text,r=Object(s.a)(e,["name","text"]),i=t?"https://coreui.io/react/docs/components/".concat(t):e.href;return Object(o.jsx)("div",{className:"card-header-actions",children:Object(o.jsx)(c.I,Object(n.a)(Object(n.a)({},r),{},{href:i,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:Object(o.jsx)("small",{className:"text-muted",children:a||"docs"})}))})},m=i.a.memo(l)},875:function(e,t,a){"use strict";t.a=a.p+"static/media/user.921dff75.png"}}]);
//# sourceMappingURL=16.e8636def.chunk.js.map