{"version":3,"sources":["views/Masters/AddNew.js"],"names":["makeStyles","theme","formControl","margin","spacing","marginLeft","minWidth","maxWidth","chips","display","flexWrap","chip","noLabel","marginTop","AddNewMasterInstance","props","React","useState","form","setForm","setFormData","JSON","parse","localStorage","getItem","domainName","useEffect","masterId","match","params","form_data","method","headers","body","stringify","id","fetch","MASTER_SERVICE","then","response","Promise","resolve","reject","text","length","catch","err","data","json","master","error","console","log","className","onSubmit","masterData","history","push"],"mappings":"iOA2BkBA,aAAW,SAACC,GAAD,MAAY,CACrCC,YAAa,CACTC,OAAQF,EAAMG,QAAQ,GACtBC,WAAY,iBACZC,SAAU,IACVC,SAAU,KAEdC,MAAO,CACHC,QAAS,OACTC,SAAU,QAEdC,KAAM,CACFR,OAAQ,GAEZS,QAAS,CACLC,UAAWZ,EAAMG,QAAQ,QA2GlBU,UA7Fc,SAACC,GAAW,IAAD,EAEZC,IAAMC,SAAS,IAFH,mBAE7BC,EAF6B,KAEvBC,EAFuB,OAGJH,IAAMC,SAAS,IAHX,gCAIJD,IAAMC,SAAS,KAJX,mBAInBG,GAJmB,aAKAJ,IAAMC,SAASI,KAAKC,MAAMC,aAAaC,QAAQ,gBAAgBC,YAL/D,mBAK7BA,EAL6B,UAOpCC,qBAAU,WAAM,IAEJC,EAAaZ,EAAMa,MAAMC,OAAzBF,SACFG,EAAY,CACdC,OAAQ,OAERC,QAAS,CACL,WAAYP,EACZ,eAAgB,mBAChB,cAAiB,UAAYF,aAAaC,QAAQ,kBAEtDS,KAAMZ,KAAKa,UAAU,CAACC,GAAKR,KAE/BS,MAAMC,IAAiB,4BAA4BP,GAC9CQ,MAAK,SAAAC,GACF,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACzBH,EAASI,OAAOL,MAAK,SAAAL,GACjBQ,EACIR,EAAKW,OAASvB,KAAKC,MAAMW,GAAQ,SAEtCY,OAAM,SAAAC,GACLJ,EAAOI,YAIlBR,MAAK,SAAAS,GAGF5B,EAAQE,KAAKC,MAAMyB,EAAKC,OACxB5B,EAAYC,KAAKC,MAAMyB,EAAKE,YAG/BJ,OAAM,SAAAK,GACHC,QAAQC,IAAIF,QACZ,IA+BZ,OACI,8BACI,eAAC,IAAD,WACI,cAAC,IAAD,UACI,qBAAKG,UAAU,cAAf,SACI,qBAAKA,UAAU,4BAAf,SACI,qBAAKA,UAAU,oBAAf,SAAmC,oBAC/BA,UAAU,mDADqB,SAC8B,sBAAMA,UAAU,cAAhB,iCAK7E,cAAC,IAAD,UACI,cAAC,OAAD,CAAMnC,KAAMA,EAAQoC,SA1CrB,SAAAP,GAAQ,IACXpB,EAAaZ,EAAMa,MAAMC,OAAzBF,SAEFG,EAAY,CACdC,OAAQ,OAERC,QAAS,CACL,WAAYP,EACZ,eAAgB,mBAChB,cAAiB,UAAYF,aAAaC,QAAQ,kBAEtDS,KAAMZ,KAAKa,UAAU,CAACP,SAAWA,EAAU4B,WAAYR,EAAKA,QAEhEI,QAAQC,IAAKL,EAAKA,MAEjBX,MAAMC,IAAiB,uBAAuBP,GAC3CQ,MAAK,SAAAC,GACJ,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BH,EAASI,OAAOL,MAAK,SAAAL,GACnBQ,EACER,EAAKW,OAASvB,KAAKC,MAAMW,GAAQ,SAElCY,OAAM,SAAAC,GACPJ,EAAOI,YAIhB/B,EAAMyC,QAAQC,KAAK,gBAAgB9B","file":"static/js/110.ab653981.chunk.js","sourcesContent":["import React, {useEffect} from 'react'\nimport {\n    CButton,\n    CCard,\n    CCardBody,\n    CCardFooter,\n    CCardHeader,\n    CCol,\n    CFormGroup,\n    CInput, CSelect,\n    CLabel, CNavbar, CNavbarBrand, CRow, CForm, CInputGroup, CInvalidFeedback,\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport { DocsLink } from 'src/reusable'\nimport { Link } from 'react-router-dom'\nimport {FormBuilder} from 'react-formio';\nimport {makeStyles, withStyles} from '@material-ui/core/styles';\nimport {Form} from 'react-formio';\nimport {SERVER_URL, MASTER_SERVICE} from '../../constants';\n\nimport 'formiojs/dist/formio.full.min';\nimport 'formiojs/dist/formio.full.min.css';\nimport {Cancel, Save} from \"@material-ui/icons\";\nimport {Chip} from \"@material-ui/core\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Input from \"@material-ui/core/Input\";\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n        margin: theme.spacing(1),\n        marginLeft: 0+'px !important',\n        minWidth: 220,\n        maxWidth: 300,\n    },\n    chips: {\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    chip: {\n        margin: 2,\n    },\n    noLabel: {\n        marginTop: theme.spacing(3),\n    },\n}));\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n    PaperProps: {\n        style: {\n            maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n            width: 250,\n        },\n    },\n};\n\nconst AddNewMasterInstance = (props) => {\n\n    const [form, setForm] = React.useState({});\n    const [formName, setFormName] = React.useState({});\n    const [formData, setFormData] = React.useState({});\n    const [domainName, setDomainName] = React.useState(JSON.parse(localStorage.getItem('domain_data')).domainName);\n\n    useEffect(()=> {\n\n        const { masterId } = props.match.params;\n        const form_data = {\n            method: 'POST',\n\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n            },\n            body: JSON.stringify({id : masterId})\n        };\n        fetch(MASTER_SERVICE + '/api/master/getByMasterId',form_data)\n            .then(response => {\n                return new Promise((resolve, reject) => {\n                    response.text().then(body => {\n                        resolve(\n                            body.length ? JSON.parse(body) : null\n                        );\n                    }).catch(err => {\n                        reject(err);\n                    });\n                });\n            })\n            .then(data => {\n\n                //  setComponents(JSON.parse(data.form_json).components)\n                setForm(JSON.parse(data.json))\n                setFormData(JSON.parse(data.master));\n                // this.props.history.push(\"/admin/formView\");\n            })\n            .catch(error => {\n                console.log(error);\n            })},[])\n\n    const submit = data =>{\n        const { masterId } = props.match.params;\n\n        const form_data = {\n            method: 'POST',\n\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n            },\n            body: JSON.stringify({masterId : masterId, masterData: data.data})\n        };\n        console.log( data.data)\n\n         fetch(MASTER_SERVICE + '/api/master/saveData',form_data)\n           .then(response => {\n             return new Promise((resolve, reject) => {\n               response.text().then(body => {\n                 resolve(\n                   body.length ? JSON.parse(body) : null\n                 );\n               }).catch(err => {\n                 reject(err);\n               });\n             });\n           })\n        props.history.push(\"/master/list/\"+masterId);\n    }\n    return (\n        <div>\n            <CCard>\n                <CCardHeader>\n                    <div className=\"m-subheader\">\n                        <div className=\"d-flex align-items-center\">\n                            <div className=\"mr-auto col-xs-6 \"><h4\n                                className=\"m-subheader__title m-subheader__title--separator\"><span className=\"ng-tns-c2-0\">Ajouter  </span>\n                            </h4></div>\n                        </div>\n                    </div>\n                </CCardHeader>\n                <CCardBody>\n                    <Form form={form}   onSubmit={submit}  />\n                </CCardBody>\n            </CCard>\n        </div>\n    )\n\n\n}\nexport default AddNewMasterInstance;"],"sourceRoot":""}