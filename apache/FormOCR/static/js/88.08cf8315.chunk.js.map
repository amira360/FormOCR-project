{"version":3,"sources":["views/Administration/masterBuilder/MenuMapping/MasterMapping.js","../node_modules/@material-ui/icons/esm/Add.js"],"names":["MasterMapping","props","useState","showLeafIcon","showLine","setSelectedMenu","showIcon","masterKey","setMasterKey","menuLevel","setMenuLevel","treeKeys","setTreeKeys","React","menu","setMenu","JSON","parse","localStorage","getItem","domainName","username","useHistory","useEffect","ims_tab","menu_data","method","headers","fetch","MASTER_MENU_SERVICE","then","response","Promise","resolve","reject","text","body","length","catch","err","sgi_data","ims_menu","ims_submenu","submenu","ims_item","map","ims_val","index","title","name","key","id","icon","customClasses","_tag","to","push","ims_child","expanded","sub_ims_tab","sub_ims_item","child","children","MENU_SERVICE","data","KeysList","tab","navTab","navItem","filter","d","nav","_children","childNavTab","childNavItem","expandedKeys","onExpand","onSelect","selectedKeys","info","node","ims_submenu_id","indexOf","substr","treeData","onClick","masterId","match","params","master_data","stringify","MASTER_SERVICE","master","menu_object","mastersqmsmenuid","MASTER_QMS_SUBMENU_SERVICE","insertId","alert","history","window","location","reload","handleSubmit","color","className","active","tabIndex","style","textAlign","createSvgIcon"],"mappings":"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","file":"static/js/88.08cf8315.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport { Tree, Switch } from 'antd';\nimport { CarryOutOutlined, FormOutlined } from '@ant-design/icons';\nimport {MASTER_MENU_SERVICE,MASTER_QMS_SUBMENU_SERVICE, MASTER_SERVICE, MENU_SERVICE, SERVER_URL} from \"../../../../constants\";\nimport CIcon from \"@coreui/icons-react\";\nimport {useHistory} from \"react-router-dom\";\nimport {CButton, CCardHeader, CCol, CRow, CCardBody, CCard, CCardFooter} from \"@coreui/react\";\nimport {Add} from \"@material-ui/icons\";\n\nconst MasterMapping = (props) => {\n    const [showLine, setShowLine] = useState({\n        showLeafIcon: false,\n    });\n    const [selectedMenu, setSelectedMenu] = useState({})\n\n    const [showIcon, setShowIcon] = useState(true);\n    const [masterKey, setMasterKey] = useState(null);\n    const [menuLevel, setMenuLevel] = useState(null);\n    const [treeKeys, setTreeKeys] = useState([]);\n    const [menu, setMenu] = React.useState([]);\n    const [domainName, setDomainName] = React.useState(JSON.parse(localStorage.getItem('domain_data')).domainName);\n    const [username, setUsername] = React.useState(localStorage.getItem(\"username\"))\n    /*const onSelect = (selectedKeys, info) => {\n           console.log('selected', selectedKeys, info);\n           setSelectedMenu(info.node);\n           var master_selected_key = 0;\n           var sub_menu_id = '';\n           var menu_id = '';\n           var masters_submenu_id = '';\n           var ims_submenu_id = '';\n           var key = info.node.key;\n           if(key.indexOf(\"-\") !== -1){\n               menu_id = key.substr(0, key.indexOf(\"-\"));\n               console.log(menu_id)\n               key = key.substr(key.indexOf(\"-\")+1,key.length-1)\n               /!*if(menu_id === \"3\"){\n                   if(key.indexOf(\"-\") !== -1){\n                       const sub_menu_id = key.substr(0, key.indexOf(\"-\"));\n                       key = key.substr(key.indexOf(\"-\")+1, key.length-1)\n                       console.log(sub_menu_id)\n                       if(key.indexOf(\"-\") !== -1){\n                           ims_submenu_id = key.substr(0, key.indexOf(\"-\"));\n                           console.log(ims_submenu_id)\n                           key = key.substr(key.indexOf(\"-\")+1, key.length-1)\n                           console.log(\"master sub menu \")\n                           master_selected_key = master_submenu_id\n                           setMasterKey(master_selected_key)\n                          // setMenuLevel(\"IMSSubmenu\")\n                       }else{\n                           master_submenu_id = key\n                           console.log(master_submenu_id)\n                           console.log(\"master menu\")\n                           master_selected_key = master_submenu_id\n                           setMasterKey(master_selected_key)\n                           setMenuLevel(\"MasterMenu\")\n                       }\n                   }else{\n                       sub_menu_id = key\n                       console.log(sub_menu_id)\n                       console.log(\"sub menu  \")\n                       master_selected_key = sub_menu_id\n                       setMasterKey(master_selected_key)\n                       setMenuLevel(\"Submenu\")\n\n                   }\n               }else*!/ if (menu_id === \"4\"){\n                   if(key.indexOf(\"-\") !== -1){\n                       sub_menu_id = key.substr(0, key.indexOf(\"-\"));\n                       console.log(sub_menu_id)\n                       key = key.substr(key.indexOf(\"-\")+1,key.length-1)\n                       if(key.indexOf(\"-\") !== -1){\n                           masters_submenu_id = key.substr(0, key.indexOf(\"-\"));\n                           console.log(masters_submenu_id)\n                           key = key.substr(key.indexOf(\"-\")+1,key.length-1)\n                           console.log(\"masters sub menu \")\n                           master_selected_key = masters_submenu_id\n                           setMasterKey(master_selected_key)\n                          // setMenuLevel(\"MastersSubmenu\")\n                       }else{\n                           masters_submenu_id = key\n                           console.log(masters_submenu_id)\n                           console.log(\"masters menu\")\n                           master_selected_key = masters_submenu_id\n                           setMasterKey(master_selected_key)\n                           //setMenuLevel(\"MastersMenu\")\n\n                       }\n                   }else{\n                       sub_menu_id = key;\n                       console.log(sub_menu_id)\n                       console.log(\"sub menu qms masters\")\n                       master_selected_key = sub_menu_id\n                       setMasterKey(master_selected_key)\n                       //setMenuLevel(\"Submenu\")\n\n                   }\n               }else{\n                   sub_menu_id = key;\n                   console.log(sub_menu_id)\n                   console.log(\"sub menu other than ims qnd masters \")\n                   master_selected_key = sub_menu_id\n                   setMasterKey(master_selected_key)\n                  // setMenuLevel(\"IMSSubmenu\")\n\n               }\n           }else{\n               menu_id = key\n               console.log(menu_id)\n               console.log(\"menu \")\n               master_selected_key = menu_id\n               setMasterKey(master_selected_key)\n               setMenuLevel(\"Menu\")\n           }\n\n       };*/\n    const onSelect = (selectedKeys, info) => {\n        setSelectedMenu(info.node);\n        var ims_selected_key = 0;\n        var sub_menu_id = '';\n        var menu_id = '';\n        var masters_submenu_id = '';\n\n        var ims_submenu_id = '';\n        var key = info.node.key;\n        if(key.indexOf(\"-\") !== -1){\n            menu_id = key.substr(0, key.indexOf(\"-\"));\n            key = key.substr(key.indexOf(\"-\")+1,key.length-1)\n            // if(menu_id === \"3\"){\n            if(key.indexOf(\"-\") !== -1){\n                const sub_menu_id = key.substr(0, key.indexOf(\"-\"));\n                key = key.substr(key.indexOf(\"-\")+1, key.length-1)\n                if(key.indexOf(\"-\") !== -1){\n                    ims_submenu_id = key.substr(0, key.indexOf(\"-\"));\n                    key = key.substr(key.indexOf(\"-\")+1, key.length-1)\n                    ims_selected_key = ims_submenu_id\n                    setMasterKey(ims_selected_key)\n                    // setMenuLevel(\"IMSSubmenu\")\n                }else{\n                    ims_submenu_id = key\n                   // console.log(ims_submenu_id)\n                   // console.log(\"ims menu\")\n                    ims_selected_key = ims_submenu_id\n                    setMasterKey(ims_selected_key)\n                    setMenuLevel(\"IMSMenu\")\n                }\n            }else{\n                sub_menu_id = key\n             //   console.log(sub_menu_id)\n            //    console.log(\"sub menu  \")\n                ims_selected_key = sub_menu_id\n                setMasterKey(ims_selected_key)\n                setMenuLevel(\"Submenu\")\n\n            }\n            /*  }else if (menu_id === \"4\"){\n                  if(key.indexOf(\"-\") !== -1){\n                      sub_menu_id = key.substr(0, key.indexOf(\"-\"));\n                      console.log(sub_menu_id)\n                      key = key.substr(key.indexOf(\"-\")+1,key.length-1)\n                      if(key.indexOf(\"-\") !== -1){\n                          masters_submenu_id = key.substr(0, key.indexOf(\"-\"));\n                          console.log(masters_submenu_id)\n                          key = key.substr(key.indexOf(\"-\")+1,key.length-1)\n                          console.log(\"masters sub menu \")\n                          ims_selected_key = masters_submenu_id\n                          setImsKey(ims_selected_key)\n                          //setMenuLevel(\"MastersSubmenu\")\n                      }else{\n                          masters_submenu_id = key\n                          console.log(masters_submenu_id)\n                          console.log(\"masters menu\")\n                          ims_selected_key = masters_submenu_id\n                          setImsKey(ims_selected_key)\n                         // setMenuLevel(\"MastersMenu\")\n\n                      }\n                  }else{\n                      sub_menu_id = key;\n                      console.log(sub_menu_id)\n                      console.log(\"sub menu qms masters\")\n                      ims_selected_key = sub_menu_id\n                      setImsKey(ims_selected_key)\n                      //setMenuLevel(\"Submenu\")\n\n                  }\n              }else{\n                  sub_menu_id = key;\n                  console.log(sub_menu_id)\n                  console.log(\"sub menu other than ims qnd masters \")\n                  ims_selected_key = sub_menu_id\n                  setImsKey(ims_selected_key)\n                 // setMenuLevel(\"IMSSubmenu\")\n\n              }*/\n        }else{\n            menu_id = key\n         //   console.log(menu_id)\n          //  console.log(\"menu \")\n            ims_selected_key = menu_id\n            setMasterKey(ims_selected_key)\n            setMenuLevel(\"Menu\")\n\n        }};\n\n    const history = useHistory()\n   /* useEffect(()=>{\n        /!*  const token = getLocalToken();\n          console.log(token)\n          if(token === 'undefined'){\n            history.push(\"/domain\");\n          }*!/\n        var masters_tab = [];\n\n\n        fetch(SERVER_URL + '/api/menu/auth/allMastersMenu')\n            .then(response => {\n                    return new Promise((resolve, reject) => {\n                        response.text().then(body => {\n                            resolve(\n                                body.length ? JSON.parse(body) : null\n                            );\n                        }).catch(err => {\n                            reject(err);\n                        });\n                    });\n                }\n                //     console.log(response.json())\n                //  console.log(response)\n            )\n            .then(masters_data => {\n                const masters_menu = JSON.parse(masters_data.menu);\n                var masters_item = {};\n\n                masters_menu.map(masters_val => {\n                    masters_item.title = masters_val.name;\n                    masters_item.key = \"4-18-\"+masters_val.id;\n                    masters_item.icon = <CIcon name={masters_val.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                    masters_tab.push(masters_item);\n                    masters_item = {};\n\n                 if(masters_val._tag === \"CSidebarNavItem\"){\n                            masters_item.to = masters_val.to;\n                            masters_tab.push(masters_item);\n                            masters_item = {};\n                        }else{\n                            const masters_child = masters_val._children;\n                            var sub_masters_tab = []\n                            var sub_masters_item = {}\n                            masters_child.map(child =>{\n                                sub_masters_item.title = child.name;\n                                sub_masters_item.key = \"-18-\"+masters_val.id+\"-\"+child.id;\n                                sub_masters_item.icon = <CIcon name={child.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                                sub_masters_item.to = child.to\n                                sub_masters_tab.push(sub_masters_item)\n                                sub_masters_item = {}\n                            })\n                            masters_item.children = sub_masters_item\n                        }\n                        masters_tab.push(masters_item);\n                        masters_item = {};\n})\n                // console.log(childNavItem)\n            })\n        fetch(SERVER_URL + '/api/menu/auth/allMenu')\n            .then(response => {\n                    return new Promise((resolve, reject) => {\n                        response.text().then(body => {\n                            resolve(\n                                body.length ? JSON.parse(body) : null\n                            );\n                        }).catch(err => {\n                            reject(err);\n                        });\n                    });\n                }\n                //     console.log(response.json())\n                //  console.log(response)\n            )\n            .then(data => {\n                // alert(data)\n                var tab = JSON.parse(data.menu);\n                var navTab = [];\n                var navItem ={};\n\n                var newTab = tab.filter(d => d.name === \"Masters\")\n                newTab.map(nav =>{\n                    navItem.key = nav.id;\n                    navItem.title = nav.name;\n                    navItem.icon = <CIcon name={nav.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                    if(nav._tag !== \"CSidebarNavItem\"){\n                        const children = nav._children;\n                        var childNavTab = [];\n                        var childNavItem ={};\n                        children.map(child =>{\n                            childNavItem.key = nav.id+child.id;\n                            childNavItem.title = child.name;\n                            childNavItem.icon = <CIcon name={child.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                            if(child._tag === \"CSidebarNavItem\"){\n                                //  childNavItem.to = child.to;\n                                childNavTab.push(childNavItem)\n                                childNavItem = {};\n                            }else {\n\n                                if (nav.name === \"Masters\" && child.name === \"QMS\") {\n                                    childNavItem.children = masters_tab;\n                                }\n                                childNavTab.push(childNavItem)\n                                childNavItem = {};\n                            }\n                        })\n                        navItem.children = childNavTab;\n                    }\n                    navTab.push(navItem)\n                    navItem = {};\n                })\n                //console.log(navTab)\n                // menu = navTab;\n                console.log(navTab)\n                // setMenu(navTab)\n\n            })\n    },[])\n*/\n    useEffect(()=>{\n        /*  const token = getLocalToken();\n          console.log(token)\n          if(token === 'undefined'){\n            history.push(\"/domain\");\n          }*/\n\n        var ims_tab = [];\n        const menu_data = {\n            method: 'GET',\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n            }\n        };\n        fetch(MASTER_MENU_SERVICE + '/api/menu/auth/allMastersMenu/'+username,menu_data)\n            .then(response => {\n                    return new Promise((resolve, reject) => {\n                        response.text().then(body => {\n                            resolve(\n                                body.length ? JSON.parse(body) : null\n                            );\n                        }).catch(err => {\n                            reject(err);\n                        });\n                    });\n                }\n                //     console.log(response.json())\n                //  console.log(response)\n            )\n            .then(sgi_data => {\n                //console.log(sgi_data)\n                const ims_menu = JSON.parse(sgi_data.menu);\n                const ims_submenu = JSON.parse(sgi_data.submenu);\n                var ims_item = {};\n                ims_menu.map((ims_val, index) => {\n                    ims_item.title = ims_val.name;\n                    ims_item.key = \"3-17-\"+ims_val.id;\n                    ims_item.icon = <CIcon name={ims_val.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n\n                    if(ims_val._tag === \"CSidebarNavItem\"){\n                        ims_item.to = ims_val.to;\n                        ims_tab.push(ims_item);\n                        ims_item = {};\n                    }else{\n                        const ims_child = ims_submenu[index]\n                        ims_item.expanded = true\n                        var sub_ims_tab = []\n                        var sub_ims_item = {}\n                        ims_child.map(child =>{\n                            sub_ims_item.title = child.name;\n                            sub_ims_item.key = \"4-18-\"+ims_val.id+\"-\"+child.id;\n                            sub_ims_item.icon = <CIcon name={child.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                            sub_ims_item.to = child.to\n                            sub_ims_tab.push(sub_ims_item)\n                            sub_ims_item = {}\n                        })\n                        ims_item.children = sub_ims_tab\n                    }\n                    ims_tab.push(ims_item);\n                    ims_item = {};\n                })\n            })\n\n        fetch(MENU_SERVICE + '/api/menu/auth/allMenu/'+username, menu_data)\n            .then(response => {\n                    return new Promise((resolve, reject) => {\n                        response.text().then(body => {\n                            resolve(\n                                body.length ? JSON.parse(body) : null\n                            );\n                        }).catch(err => {\n                            reject(err);\n                        });\n                    });\n                }\n                //     console.log(response.json())\n                //  console.log(response)\n            )\n            .then(data => {\n                var KeysList = [];\n                // alert(data)\n                var tab = JSON.parse(JSON.parse(data.menu).menu);\n                //var submenu_tab =  JSON.parse(JSON.parse(data.menu).submenu);\n                var navTab = [];\n                var navItem ={};\n\n                var newTab = tab.filter(d =>  d.name === \"Maîtres\")\n                newTab.map(nav =>{\n                    navItem.key = nav.id;\n                    navItem.title = nav.name;\n                    navItem.icon = <CIcon name={nav.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                    if(nav._tag !== \"CSidebarNavItem\"){\n                        const children = nav._children;\n\n\n                        var childNavTab = [];\n                        var childNavItem ={};\n                        children.map(child =>{\n                            childNavItem.key = nav.id+\"-\"+child.id;\n                            childNavItem.title = child.name;\n                            childNavItem.icon = <CIcon name={child.icon} customClasses=\"c-sidebar-nav-icon\"/>;\n                            if(child._tag === \"CSidebarNavItem\"){\n                                //  childNavItem.to = child.to;\n                                childNavTab.push(childNavItem)\n                                childNavItem = {};\n                            }else {\n                                if (nav.name === \"Maîtres\" && child.name === \"QMS\") {\n                                    childNavItem.children = ims_tab;\n                                    KeysList.push(childNavItem.key)\n                                }\n                                /*  if (nav.name === \"Masters\" && child.name === \"QMS\") {\n                                      childNavItem.children = masters_tab;\n                                  }*/\n                                childNavTab.push(childNavItem)\n                                childNavItem = {};\n                            }\n                        })\n                        navItem.children = childNavTab;\n                        KeysList.push(navItem.key)\n                    }\n                    navTab.push(navItem)\n                    navItem = {};\n                })\n                //console.log(navTab)\n                // menu = navTab;\n                setMenu(navTab)\n              //  console.log(navTab)\n                setTreeKeys(KeysList)\n             //   console.log(KeysList)\n\n            })\n    },[])\n const handleSubmit = ()=>{\n      //  console.log(masterKey)\n        // alert(masterKey)\n       // console.log(menuLevel)\n        const masterId = props.match.params.masterId;\n        const master_data = {\n            method: 'POST',\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")},\n            body: JSON.stringify({id : masterId})\n        };\n        fetch(MASTER_SERVICE + '/api/master/getByMasterId',master_data)\n            .then(response => {\n                return new Promise((resolve, reject) => {\n                    response.text().then(body => {\n                        resolve(\n                            body.length ? JSON.parse(body) : null\n                        );\n                    }).catch(err => {\n                        reject(err);\n                    });\n                });\n            })\n            .then(data => {\n            const master_data = JSON.parse(data.master)\n                var menu_object = {name : master_data.name, _tag: 'CSidebarNavItem',\n                    icon: 'cil-border-all',\n                    to: '/master/list/'+master_data.id, mastersqmsmenuid: masterKey, menuLevel: menuLevel }\n                const menu_data = {\n                    method: 'POST',\n                    headers: {\n                        \"X-Tenant\": domainName,\n                        'Content-Type': 'application/json',\n                        \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")},\n                    body: JSON.stringify(menu_object)\n                };\n                fetch(MASTER_QMS_SUBMENU_SERVICE + '/api/masterSubMenu/addMenu',menu_data)\n                    .then(response => {\n                        return new Promise((resolve, reject) => {\n                            response.text().then(body => {\n                                resolve(\n                                    body.length ? JSON.parse(body) : null\n                                );\n                            }).catch(err => {\n                                reject(err);\n                            });\n                        });\n                    })\n                    .then(data =>{\n\n                        if(data.insertId === \"\"){\n                            alert(\"please select a repository\")\n\n                        }else{\n                            props.history.push(\"/admin/master/list\");\n                            window.location.reload()\n                           // props.history.push(\"/workflow\")\n                        }\n                    })\n            })\n    }\n\n    return (\n        <div>\n          <div>\n\n            <Tree\n                showLine={showLine}\n                showIcon={showIcon}\n                expandedKeys={[...treeKeys]}\n                onExpand={setTreeKeys}\n                onSelect={onSelect}\n                treeData={menu}\n            />\n        </div>\n         <CCardFooter>\n                            <CButton onClick={()=> handleSubmit()}  color=\"success\" className=\"mt-3 -item-right\" active tabIndex={-1} style={{textAlign: \"right\"}}><Add/>Submit</CButton>\n                        </CCardFooter>\n                        </div>\n    );\n};\nexport default MasterMapping;\n","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');"],"sourceRoot":""}