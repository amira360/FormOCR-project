(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[89],{3039:function(e,t,c){"use strict";c.r(t);var a=c(39),n=c(13),i=c(89),o=c(1),s=c.n(o),r=c(633),l=(c(639),c(653),c(681),c(3025)),j=c(701),h=c(115),b=(c(754),c(755),c(697)),u=c(704),d=c(679),O=c(1062),m=c.n(O),x=Object(l.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=Object(j.a)(Object(a.a)({},x),{withTheme:!0})((function(e){var t=s.a.useState(!0),c=Object(i.a)(t,2),a=(c[0],c[1],s.a.useState(!0)),l=Object(i.a)(a,2),j=(l[0],l[1],s.a.useState("")),O=Object(i.a)(j,2),f=O[0],g=O[1],v=s.a.useState(""),p=Object(i.a)(v,2),S=(p[0],p[1],s.a.useState("")),N=Object(i.a)(S,2),k=(N[0],N[1],s.a.useState("")),C=Object(i.a)(k,2),y=(C[0],C[1],s.a.useState("support@isct-group.com")),F=Object(i.a)(y,2),A=F[0],T=F[1],H=s.a.useState(""),I=Object(i.a)(H,2),w=I[0],J=I[1],z=s.a.useState(""),B=Object(i.a)(z,2),R=B[0],V=B[1],D=s.a.useState(""),G=Object(i.a)(D,2),M=G[0],E=G[1],P=s.a.useState(""),W=Object(i.a)(P,2),X=W[0],_=W[1],L=s.a.useState(""),U=Object(i.a)(L,2),q=(U[0],U[1],s.a.useState("")),K=Object(i.a)(q,2),Q=K[0],Y=K[1],Z=s.a.useState(""),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ce=s.a.useState(""),ae=Object(i.a)(ce,2),ne=ae[0],ie=ae[1],oe=s.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainId),se=Object(i.a)(oe,2),re=se[0],le=(se[1],s.a.useState([])),je=Object(i.a)(le,2),he=je[0],be=je[1],ue=s.a.useState([]),de=Object(i.a)(ue,2),Oe=de[0],me=de[1],xe=s.a.useState([]),fe=Object(i.a)(xe,2),ge=(fe[0],fe[1],s.a.useState([])),ve=Object(i.a)(ge,2),pe=ve[0],Se=ve[1],Ne=s.a.useState(""),ke=Object(i.a)(Ne,2),Ce=ke[0],ye=ke[1],Fe=s.a.useState(""),Ae=Object(i.a)(Fe,2),Te=Ae[0],He=Ae[1],Ie=s.a.useState(""),we=Object(i.a)(Ie,2),Je=we[0],ze=we[1],Be=s.a.useState(""),Re=Object(i.a)(Be,2),Ve=Re[0],De=Re[1],Ge=s.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),Me=Object(i.a)(Ge,2),Ee=Me[0];Me[1],x();Object(o.useEffect)((function(){var t={method:"GET",headers:{"X-Tenant":Ee,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(h.v+"/api/auth/role/getRoles",t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=[];e.map((function(e){t.push({value:e.roleName,label:e.roleName})})),Se(t),console.log(pe)})).catch((function(e){console.log(e)}));var c=e.match.params.notificationId;He(c),console.log(localStorage.getItem("Authorization"));var a={method:"POST",headers:{"X-Tenant":Ee,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({notificationId:c})};fetch(h.k+"/api/notification/getByNotificationId",a).then((function(e){return new Promise((function(t,c){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){c(e)}))}))})).then((function(e){console.log(e);var t=JSON.parse(e.notification),c=e.notification_msg;ze(c);JSON.parse(e.notification);var a=JSON.parse(e.notificationRoles);console.log(t.enabled);var n=[];a.map((function(e){n.push({value:e.roleName,label:e.roleName})})),be(n);var i=JSON.parse(e.notificationToRoles);n=[],i.map((function(e){n.push({value:e.roleName,label:e.roleName})})),me(n),Y(t.enabled),_(t.notificationBcc),E(t.notificationCc),T(t.notificationFrom),g(t.notificationName),te(t.version),V(t.notificationSubject),J(t.notificationTo),De(t.sno)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(r.k,{xs:"12",sm:"12",children:Object(n.jsxs)(r.f,{children:[Object(n.jsx)(r.j,{children:Object(n.jsx)("h2",{children:"Modifier la notification"})}),Object(n.jsx)(r.g,{children:Object(n.jsxs)(r.u,{noValidate:!0,children:[Object(n.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"SNo",children:"S No"}),Object(n.jsx)(r.A,{id:"SNo",value:Ve,disabled:!0})]})}),Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"notificationName",children:"Nom de la notification"}),Object(n.jsx)(r.A,{id:"notificationName",onChange:function(e){return g(e.target.value)},value:f})]})})]}),Object(n.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"version",children:"Version"}),Object(n.jsx)(r.A,{invalid:"error"===ne,id:"version",value:ee,onChange:function(e){var t,c;te(e.target.value),t=e.target.value,c=3,t.length>=c?ie("success"):(ie("error"),ye("invalid notificationVersion !"))}}),Object(n.jsx)(r.G,{className:"help-block",children:Ce})]})}),Object(n.jsx)(r.k,{sm:12,md:6,children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"AccessControlUser",children:"Contr\xf4le d'acc\xe8s"}),Object(n.jsx)(d.a,{name:"form-field-name2",placeholder:"Global",value:he,options:pe,onChange:be,isMulti:!0})]})})]}),Object(n.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"From",children:"De"}),Object(n.jsx)(r.A,{id:"From",value:"support@isct-group.com",disabled:!0})]})}),Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{variant:"custom-checkbox",inline:!0,children:[Object(n.jsx)(r.B,{custom:!0,id:"inline-checkbox2",name:"inline-checkbox2",checked:Q,onChange:function(e){Y(e.target.checked),console.log(e.target.checked)}}),Object(n.jsx)(r.H,{variant:"custom-checkbox",htmlFor:"inline-checkbox2",children:"Activer la notification par e-mail"})]})})]}),Object(n.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"To",children:"\xc0"}),Object(n.jsx)(r.A,{id:"To",onChange:function(e){return J(e.target.value)},value:w})]})}),Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"Subject",children:"Sujet"}),Object(n.jsx)(r.A,{id:"Subject",onChange:function(e){return V(e.target.value)},value:R})]})})]}),Object(n.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(n.jsx)(r.k,{sm:12,md:6,children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"AccessControlUser",children:"\xc0 (Roles)"}),Object(n.jsx)(d.a,{name:"form-field-name2",placeholder:"Global",value:Oe,onChange:me,options:pe,isMulti:!0})]})}),Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"Cc",children:"Cc"}),Object(n.jsx)(r.A,{id:"Cc",onChange:function(e){return E(e.target.value)},value:M})]})})]}),Object(n.jsx)(r.v,{row:!0,className:"my-0",children:Object(n.jsx)(r.k,{xs:"6",children:Object(n.jsxs)(r.v,{children:[Object(n.jsx)(r.H,{htmlFor:"Bcc",children:"Cci"}),Object(n.jsx)(r.A,{id:"Bcc",onChange:function(e){return _(e.target.value)},value:X})]})})}),Object(n.jsxs)(r.f,{children:[Object(n.jsx)(r.j,{style:{backgroundColor:"#F5F5F5"},children:"Body"}),Object(n.jsx)(r.g,{style:{padding:"0px"},children:Object(n.jsx)(m.a,{data:Je,onChange:function(e){ze(e.editor.getData())}})})]}),Object(n.jsxs)(r.O,{xs:"4",children:[Object(n.jsx)(r.k,{xs:"2",className:"text-md-right",children:Object(n.jsxs)(r.e,{color:"success",id:"formSave",onClick:function(t){t.preventDefault();var c=[],a=[];he.map((function(e){c.push(e.label)})),Oe.map((function(e){a.push(e.label)}));var n={method:"POST",headers:{"X-Tenant":Ee,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({name:f,version:ee,notificationRoles:c,notificationFrom:A,enabled:Q,notificationTo:w,notificationCc:M,notificationBcc:X,notificationSubject:R,domainId:re,notificationToRoles:a,notificationId:Te,notificationData:Je})};console.log(he),console.log(Oe),fetch(h.k+"/api/notification/edit",n).then((function(t){console.log(t),e.history.push("/admin/notification/list")}))},children:[Object(n.jsx)(b.a,{})," Save"]})}),Object(n.jsx)(r.k,{xs:"2",className:"text-md-left",children:Object(n.jsxs)(r.e,{color:"danger",onClick:function(){return e.history.push("/admin/notification/list")},children:[Object(n.jsx)(u.a,{}),"Cancel"]})})]})]})})]})})})}))},697:function(e,t,c){"use strict";var a=c(1),n=c(1054);t.a=Object(n.a)(a.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")}}]);
//# sourceMappingURL=89.1002ef4b.chunk.js.map