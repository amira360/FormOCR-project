(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[56],{3084:function(e,t,a){"use strict";a.r(t);var s=a(13),c=a(680),n=a(89),r=a(1),i=a.n(r),o=(a(650),a(658),a(789),a(790),a(791),a(667)),l=(a(743),a(792),a(793),a(733),a(794),a(661),a(795),a(796),a(805),a(764),a(633)),j=a(697),u=a(704),d=a(115),b=a(875);a(742);t.default=function(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),m=(a[0],a[1],Object(r.useState)(!1)),h=Object(n.a)(m,2),O=(h[0],h[1],Object(r.useState)("")),p=Object(n.a)(O,2),x=p[0],g=p[1],f=Object(r.useState)(""),v=Object(n.a)(f,2),S=v[0],y=v[1],k=Object(r.useState)(""),N=Object(n.a)(k,2),C=N[0],w=N[1],T=Object(r.useState)(""),D=Object(n.a)(T,2),A=D[0],I=D[1],z=Object(r.useState)(""),F=Object(n.a)(z,2),R=F[0],L=F[1],E=Object(r.useState)(""),H=Object(n.a)(E,2),J=H[0],G=H[1],P=Object(r.useState)(""),B=Object(n.a)(P,2),X=B[0],_=B[1],K=Object(r.useState)(""),M=Object(n.a)(K,2),V=M[0],U=M[1],q=Object(r.useState)(""),W=Object(n.a)(q,2),Z=W[0],Y=W[1],$=Object(r.useState)(""),Q=Object(n.a)($,2),ee=Q[0],te=Q[1],ae=Object(r.useState)(""),se=Object(n.a)(ae,2),ce=se[0],ne=se[1],re=Object(r.useState)(""),ie=Object(n.a)(re,2),oe=ie[0],le=ie[1],je=Object(r.useState)(""),ue=Object(n.a)(je,2),de=ue[0],be=ue[1],me=Object(r.useState)(""),he=Object(n.a)(me,2),Oe=he[0],pe=he[1],xe=Object(r.useState)(""),ge=Object(n.a)(xe,2),fe=ge[0],ve=ge[1],Se=Object(r.useState)(""),ye=Object(n.a)(Se,2),ke=ye[0],Ne=ye[1],Ce=Object(r.useState)(""),we=Object(n.a)(Ce,2),Te=we[0],De=we[1],Ae=Object(r.useState)(""),Ie=Object(n.a)(Ae,2),ze=Ie[0],Fe=Ie[1],Re=Object(r.useState)(""),Le=Object(n.a)(Re,2),Ee=Le[0],He=Le[1],Je=Object(r.useState)(""),Ge=Object(n.a)(Je,2),Pe=Ge[0],Be=Ge[1],Xe=Object(r.useState)(""),_e=Object(n.a)(Xe,2),Ke=_e[0],Me=_e[1],Ve=Object(r.useState)(null),Ue=Object(n.a)(Ve,2),qe=Ue[0],We=Ue[1],Ze=Object(r.useState)({}),Ye=Object(n.a)(Ze,2),$e=(Ye[0],Ye[1],i.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainId)),Qe=Object(n.a)($e,2),et=Qe[0],tt=(Qe[1],i.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName)),at=Object(n.a)(tt,2),st=at[0],ct=(at[1],i.a.useState(localStorage.getItem("username"))),nt=Object(n.a)(ct,2),rt=nt[0],it=(nt[1],Object(r.useState)(0)),ot=Object(n.a)(it,2),lt=(ot[0],ot[1],Object(r.useRef)(null),Object(r.useRef)(null),i.a.useState([])),jt=Object(n.a)(lt,2),ut=jt[0],dt=jt[1],bt=Object(r.useState)(),mt=Object(n.a)(bt,2),ht=mt[0],Ot=mt[1];Object(r.useEffect)((function(){var e={method:"GET",headers:{"X-Tenant":st,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(d.v+"/api/auth/role/getRoles",e).then((function(e){return e.json()})).then((function(e){var t=[],a=[];e.map((function(e){t.push({name:e.roleName,key:e.roleName,checked:e.default}),!0===e.default&&a.push({name:e.roleName,key:e.roleName,checked:e.default})})),Ot(a),dt(t)})).catch((function(e){console.log(e)}))}),[]);var pt=function(e){var t=Object(c.a)(ht);if(e.checked)t.push(e.value);else for(var a=0;a<t.length;a++){if(t[a].key===e.value.key){t.splice(a,1);break}}Ot(t)},xt=function(e,t){return e.length>=t};return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(l.f,{children:[Object(s.jsx)(l.j,{children:Object(s.jsx)("h3",{children:"Cr\xe9er un nouveau utilisateur"})}),Object(s.jsxs)(l.g,{children:[Object(s.jsxs)(l.ab,{activeTab:"user",children:[Object(s.jsxs)(l.J,{variant:"tabs",children:[Object(s.jsx)(l.K,{children:Object(s.jsx)(l.L,{"data-tab":"user",children:"Information d'utilisateur"})}),Object(s.jsx)(l.K,{children:Object(s.jsx)(l.L,{"data-tab":"role",children:"Roles"})})]}),Object(s.jsxs)(l.Y,{children:[Object(s.jsx)(l.Z,{"data-tab":"user",children:Object(s.jsxs)(l.u,{noValidate:!0,style:{marginTop:"20px"},children:[Object(s.jsxs)(l.v,{row:!0,className:"my-0",children:[Object(s.jsx)(l.k,{sm:12,md:6,children:Object(s.jsxs)("div",{className:"profile-pic",children:[Object(s.jsxs)("label",{className:"-label",htmlFor:"file",children:[Object(s.jsx)("i",{style:{fontWeight:"bold"},className:"pi pi-camera"}),Object(s.jsx)("span",{style:{fontWeight:"bold"},children:"Changer l'image"})]}),Object(s.jsx)("input",{id:"file",type:"file",onChange:function(e){return function(e){var t=document.getElementById("output"),a=e.target.files;/(\.jpg|\.jpeg|\.png|\.gif)$/i.exec(a[0].name)?(We(a[0]),t.src=URL.createObjectURL(a[0]),We(a[0])):alert("Format invalid!")}(e)}}),Object(s.jsx)("img",{src:b.a,id:"output",width:"200"})]})}),Object(s.jsxs)(l.k,{sm:12,md:6,children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"lastname",children:"Nom"}),Object(s.jsx)(l.A,{invalid:"error"===V,id:"lastname",onChange:function(e){y(e.target.value),xt(e.target.value,3)?U("success"):(U("error"),Y("Le nom est obligatoire !"))},value:S}),Object(s.jsx)(l.G,{className:"help-block",children:Z})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"firstname",children:"Pr\xe9nom"}),Object(s.jsx)(l.A,{style:{width:"100%"},id:"firstname",invalid:"error"===ce,onChange:function(e){g(e.target.value),xt(e.target.value,3)?ne("success"):(ne("error"),te("Le pr\xe9nom est obligatoire !"))},value:x}),Object(s.jsx)(l.G,{className:"help-block",children:ee})]})})]})]}),Object(s.jsxs)(l.v,{row:!0,className:"my-0",children:[Object(s.jsx)(l.k,{sm:12,md:6,children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"username",children:"Nom d'utilisateur"}),Object(s.jsx)(l.A,{invalid:"error"===J||"exist"===J||"notValid"===J,id:"username",onChange:function(e){L(e.target.value),xt(e.target.value,3)?(G("success"),function(e){var t={method:"POST",headers:{"X-Tenant":st,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({username:e})};fetch(d.v+"/api/auth/verifyUsername",t).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){null===e?G("success"):(G("existe"),_("Nom d'utilisateur indisponible!"))})).catch((function(e){console.log(e)}))}(e.target.value)):(G("error"),_("Le nom d'utilisateur est obligatoire !"))}}),Object(s.jsx)(l.G,{className:"help-block",children:X})]})}),Object(s.jsx)(l.k,{sm:12,md:6,children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"email",children:"Email"}),Object(s.jsx)(l.A,{id:"email",invalid:"error"===fe,onChange:function(e){w(e.target.value),xt(e.target.value,3)?ve("success"):(ve("error"),Ne("L'adresse email  est obligatoire !"))},value:C}),Object(s.jsx)(l.G,{className:"help-block",children:ke})]})})]}),Object(s.jsxs)(l.v,{row:!0,className:"my-0",children:[Object(s.jsx)(l.k,{sm:12,md:6,children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"phone",children:"T\xe9l\xe9phone"}),Object(s.jsx)(l.A,{id:"phone",invalid:"error"===Te,onChange:function(e){I(e.target.value),xt(e.target.value,3)?De("success"):(De("error"),Fe("Le num\xe9ro de t\xe9l\xe9phone email  est obligatoire !"))},value:A}),Object(s.jsx)(l.G,{className:"help-block",children:ze})]})}),Object(s.jsx)(l.k,{sm:12,md:6,children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"password",children:"Mot de passe"}),Object(s.jsx)(l.A,{id:"password",type:"password",invalid:"error"===Ee,onChange:function(e){Me(e.target.value),xt(e.target.value,3)?He("success"):(He("error"),Be("Le mot de passe  est obligatoire !"))},value:Ke}),Object(s.jsx)(l.G,{className:"help-block",children:Pe})]})}),Object(s.jsx)(l.k,{sm:12,md:6,children:Object(s.jsxs)(l.v,{children:[Object(s.jsx)(l.H,{htmlFor:"password",children:"Confirmer le mot de passe"}),Object(s.jsx)(l.A,{id:"repeat_password",type:"password",invalid:"error"===de,valid:"success"===de,onChange:function(e){le(e.target.value),Ke===e.target.value?be("success"):(be("error"),pe("Mot de passe invalide !"))},value:oe}),Object(s.jsx)(l.G,{className:"help-block",children:Oe})]})})]})]})}),Object(s.jsx)(l.Z,{"data-tab":"role",children:Object(s.jsx)(l.g,{children:ut.map((function(e){return Object(s.jsxs)("div",{className:"field-checkbox",style:{margin:"10px"},children:[Object(s.jsx)(o.Checkbox,{inputId:e.key,name:"role",value:e,onChange:pt,checked:ht.some((function(t){return t.key===e.key}))}),Object(s.jsxs)("label",{style:{position:"absolute"},htmlFor:e.key,children:[" \xa0",e.name]})]},e.key)}))})})]})]}),Object(s.jsxs)(l.O,{xs:"4",style:{marginTop:"50px"},children:[Object(s.jsx)(l.k,{col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0",children:Object(s.jsxs)(l.e,{block:!0,variant:"outline",color:"info",id:"workflowSave",onClick:function(){if(""===J&&G("error"),""===ce&&ne("error"),""===V&&U("error"),""===Te&&De("error"),""===fe&&ve("error"),""===Ee&&He("error"),""===de&&be("error"),"success"===J&&"success"===ce&&"success"===V&&"success"===Te&&"success"===fe&&"success"===Ee&&"success"===de){var t=new FormData;if(null!==qe){t.append("image",qe,qe.name),t.append("domainId",et),t.append("domainName",st),t.append("username",rt);var a={method:"POST",headers:{"X-Tenant":st,Authorization:"Bearer "+localStorage.getItem("Authorization")},body:t},s=(new Date).getDate();fetch(d.v+"/api/auth/user/upload",a).then((function(e){return e.json()})).then((function(a){var c={domainName:st,domainId:et,url:a.url,username:R,firstname:x,lastname:S,email:C,phone:A,photo:t,selectedRoles:ht,password:Ke,formCodes:[{formCode:"FORRC14"}],processDefinitionKey:"Process_Recrutement",startEvent:[{titreDutilisateur:"",nomDutilisateur:R,dateDinscription:s,prenom:x,nom:S,dateDeNaissance:"",departement:"",designation:"",domaine:"",statutDeLemploye:"",email:C,remarque:"",numeroDeTelephone:A,manager:"",address:"",etatDeContrat:"",password:Ke}]},n={method:"POST",headers:{"X-Tenant":st,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify(c)};fetch(d.v+"/api/auth/user/add",n).then((function(e){console.log(e)})),e.history.push("/admin/user/list")}))}else{var c={domainName:st,domainId:et,url:"",username:R,firstname:x,lastname:S,email:C,phone:A,photo:t,selectedRoles:ht,password:Ke,processStart:{domainName:st,domainId:et,formCodes:[{formCode:"FORRC14"}],processDefinitionKey:"Process_Recrutement",startEvent:[{titreDutilisateur:"",nomDutilisateur:R,dateDinscription:s,prenom:x,nom:S,dateDeNaissance:"",departement:"",phone:A,designation:"",domaine:"",statutDeLemploye:"",email:C,remarque:"",numeroDeTelephone:A,manager:"",address:"",etatDeContrat:"",password:Ke}]}},n={method:"POST",headers:{"X-Tenant":st,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify(c)};fetch(d.v+"/api/auth/user/add",n).then((function(e){console.log(e)})),e.history.push("/admin/user/list")}}},children:[Object(s.jsx)(j.a,{})," Enregister"]})}),Object(s.jsx)(l.k,{col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0",children:Object(s.jsxs)(l.e,{block:!0,variant:"outline",color:"danger",onClick:function(){return e.history.push("/admin/user/list")},children:[Object(s.jsx)(u.a,{}),"Annuler"]})})]})]})]})})}},697:function(e,t,a){"use strict";var s=a(1),c=a(1054);t.a=Object(c.a)(s.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},704:function(e,t,a){"use strict";var s=a(1),c=a(1054);t.a=Object(c.a)(s.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel")},805:function(e,t,a){}}]);
//# sourceMappingURL=56.d4806d57.chunk.js.map