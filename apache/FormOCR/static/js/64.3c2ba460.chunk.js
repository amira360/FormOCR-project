(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[64],{3043:function(e,t,a){"use strict";a.r(t);var o=a(39),n=a(13),r=a(89),c=a(1),s=a.n(c),i=a(633),l=a(115),d=a(3025),j=a(701),m=a(719),b=(a(816),a(827)),u=a(817),h=a(818),p=a.n(h),x=a(819),O=a.n(x),f=(a(821),a(822),a(697)),w=a(704),g=a(679),v=Object(d.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=Object(j.a)(Object(o.a)({},v),{withTheme:!0})((function(e){var t=s.a.useState(!0),a=Object(r.a)(t,2),o=(a[0],a[1],s.a.useState(!0)),d=Object(r.a)(o,2),j=(d[0],d[1],s.a.useState("")),h=Object(r.a)(j,2),x=h[0],k=h[1],S=s.a.useState(""),N=Object(r.a)(S,2),M=(N[0],N[1],s.a.useState("")),y=Object(r.a)(M,2),P=y[0],I=y[1],C=s.a.useState(""),L=Object(r.a)(C,2),z=(L[0],L[1],s.a.useState("")),B=Object(r.a)(z,2),E=B[0],T=(B[1],s.a.useState("workflow")),A=Object(r.a)(T,2),F=(A[0],A[1],s.a.useState("")),V=Object(r.a)(F,2),D=V[0],H=V[1],J=s.a.useState(""),_=Object(r.a)(J,2),X=(_[0],_[1]),R=s.a.useState(""),W=Object(r.a)(R,2),G=W[0],U=W[1],q=s.a.useState(""),K=Object(r.a)(q,2),Q=(K[0],K[1]),Y=s.a.useState(""),Z=Object(r.a)(Y,2),$=(Z[0],Z[1],s.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainId)),ee=Object(r.a)($,2),te=ee[0],ae=(ee[1],s.a.useState([])),oe=Object(r.a)(ae,2),ne=oe[0],re=oe[1],ce=s.a.useState([]),se=Object(r.a)(ce,2),ie=(se[0],se[1],s.a.useState([])),le=Object(r.a)(ie,2),de=le[0],je=le[1],me=s.a.useState(null),be=Object(r.a)(me,2),ue=(be[0],be[1]),he=(v(),s.a.useState(null)),pe=Object(r.a)(he,2),xe=pe[0],Oe=pe[1],fe=s.a.useState(localStorage.getItem("username")),we=Object(r.a)(fe,2),ge=we[0],ve=(we[1],s.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName)),ke=Object(r.a)(ve,2),Se=ke[0];ke[1];Object(c.useEffect)((function(){var e={method:"GET",headers:{"X-Tenant":Se,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(l.v+"/api/auth/role/getRoles",e).then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){t.push({key:e.roleId,value:e.roleName,label:e.roleName,id:e.roleId})})),je(t)})).catch((function(e){console.log(e)}));var t=new b.a({container:"#bpmnview",propertiesPanel:{parent:"#propview"},additionalModules:[p.a,O.a],moddleExtensions:{camunda:u}});t.importXML(m.a,(function(e){if(e)return console.log("fail import xml");var a=null;(a=t.get("canvas")).zoom("fit-viewport"),ue(a._rootElement.businessObject),Oe(t)}))}),[]);var Ne=function(e,t){return e.length>=t};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(i.k,{xs:"12",sm:"12",children:Object(n.jsxs)(i.f,{children:[Object(n.jsx)(i.j,{children:Object(n.jsx)("h2",{children:"Cr\xe9er un workflow"})}),Object(n.jsx)(i.g,{children:Object(n.jsxs)(i.u,{noValidate:!0,children:[Object(n.jsxs)(i.v,{row:!0,className:"my-0",children:[Object(n.jsx)(i.k,{xs:"6",children:Object(n.jsxs)(i.v,{children:[Object(n.jsx)(i.H,{htmlFor:"workflowId",children:"S No"}),Object(n.jsx)(i.A,{id:"workflowId",disabled:!0})]})}),Object(n.jsx)(i.k,{xs:"6",children:Object(n.jsxs)(i.v,{children:[Object(n.jsx)(i.H,{htmlFor:"workflowName",children:"Workflow name"}),Object(n.jsx)(i.A,{id:"workflowName",onChange:function(e){k(e.target.value),Ne(e.target.value,3)?H("success"):(H("error"),X("Le nom du workflow est obligatoire !"))},invalid:"error"===D,value:x})]})})]}),Object(n.jsxs)(i.v,{row:!0,className:"my-0",children:[Object(n.jsx)(i.k,{xs:"6",children:Object(n.jsxs)(i.v,{children:[Object(n.jsx)(i.H,{htmlFor:"workflowVersion",children:"Version"}),Object(n.jsx)(i.A,{id:"workflowVersion",onChange:function(e){I(e.target.value),Ne(e.target.value,3)?U("success"):(U("error"),Q("Le nom du workflow est obligatoire !"))},invalid:"error"===G,value:P})]})}),Object(n.jsx)(i.k,{sm:12,md:6,children:Object(n.jsxs)(i.v,{children:[Object(n.jsx)(i.H,{htmlFor:"roles",children:"Access control"}),Object(n.jsx)(g.a,{name:"roles",value:ne,onChange:re,placeholder:"Globale",options:de,isMulti:!0})]})})]}),Object(n.jsxs)(i.f,{children:[Object(n.jsx)(i.j,{style:{backgroundColor:"#F5F5F5"},children:"Editeur de workflow"}),Object(n.jsx)(i.g,{style:{paddingTop:"0px",paddingLeft:"0px",paddingRight:"0px"},children:Object(n.jsx)("div",{className:"panel panel-default",style:{width:"100%",borderColor:"#ddd !important"},children:Object(n.jsx)("div",{className:"panel-body",children:Object(n.jsxs)("div",{id:"bpmncontainer",style:{height:"750px",border:"1px solid grey"},children:[Object(n.jsx)("div",{id:"propview",style:{position:"absolute",top:"161px",bottom:"300px",right:"15px",width:"260px",zIndex:10,borderLeft:"1px solid #cc",borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc",overflow:"auto"}}),Object(n.jsx)("div",{id:"bpmnview",style:{width:"100%",height:"100%",position:"relative",float:"left",backgroundColor:"white"}})]})})})})]}),Object(n.jsxs)(i.O,{xs:"4",children:[Object(n.jsx)(i.k,{col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0",children:Object(n.jsxs)(i.e,{block:!0,variant:"outline",color:"info",id:"workflowSave",onClick:function(){var t={workflowId:E,workflowName:x,workflowVersion:P,workflowRoles:ne,xml:null,domainId:te,username:ge};xe.saveXML({format:!0},(function(a,o){t.xml=o;var n={method:"POST",headers:{"X-Tenant":Se,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify(t)};"success"===D&&"success"===G?fetch(l.x+"/api/workflow/save",n).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){t.workflowId;e.history.push("/admin/workflow/list")})):alert("Pri\xe8re de remplir les champs obligatores ! ")}))},children:[Object(n.jsx)(f.a,{})," Enregister"]})}),Object(n.jsx)(i.k,{col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0",children:Object(n.jsxs)(i.e,{block:!0,variant:"outline",color:"danger",onClick:function(){return e.history.push("/admin/workflow/list")},children:[Object(n.jsx)(w.a,{}),"Annuler"]})})]})]})})]})})})}))},697:function(e,t,a){"use strict";var o=a(1),n=a(1054);t.a=Object(n.a)(o.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},704:function(e,t,a){"use strict";var o=a(1),n=a(1054);t.a=Object(n.a)(o.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel")},719:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var o='<?xml version="1.0" encoding="UTF-8" standalone="no"?><bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">\n                            <bpmn2:process id="'.concat(function(e){for(var t=["Process_"],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=a.length,n=0;n<e;n++)t.push(a.charAt(Math.floor(Math.random()*o)));return t.join("")}(7),'" isExecutable="true"/>\n                            <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n                              <bpmndi:BPMNPlane bpmnElement="Process_1bzh145" id="BPMNPlane_1"/>\n                            </bpmndi:BPMNDiagram>\n                          </bpmn2:definitions>')}}]);
//# sourceMappingURL=64.3c2ba460.chunk.js.map