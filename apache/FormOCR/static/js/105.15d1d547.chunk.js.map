{"version":3,"sources":["views/Administration/subscription/SubscriptionOrganization.js"],"names":["SubscriptionOrganization","props","useState","setPhoto","React","JSON","parse","localStorage","getItem","domainId","domainName","useRef","companyName","setCompanyName","address","setAddress","zip","setZip","type","setType","webSite","setWebSite","city","setCity","email","setEmail","phone","setPhone","country","setCountry","image","setImage","useEffect","company_data","method","headers","fetch","DOMAIN_SERVICE","then","response","json","data","company","domain","catch","error","console","log","noValidate","style","marginTop","row","className","sm","md","src","id","width","htmlFor","value","disabled","name","xs","col","xl","block","variant","color","onClick","history","push"],"mappings":"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","file":"static/js/105.15d1d547.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n// import { Form, Field } from 'react-final-form';\nimport { InputText } from 'primereact/inputtext';\nimport { Button } from 'primereact/button';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Calendar } from 'primereact/calendar';\nimport { Password } from 'primereact/password';\nimport { Checkbox } from 'primereact/checkbox';\nimport { Dialog } from 'primereact/dialog';\nimport { Divider } from 'primereact/divider';\nimport { classNames } from 'primereact/utils';\nimport { Toast } from 'primereact/toast';\nimport { FileUpload } from 'primereact/fileupload';\nimport { ProgressBar } from 'primereact/progressbar';\nimport { Tooltip } from 'primereact/tooltip';\nimport { Tag } from 'primereact/tag';\nimport Select from 'react-select';\nimport axios from 'axios';\nimport {\n    CButton,\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCol,\n    CForm,\n    CFormGroup,\n    CInput,\n    CInvalidFeedback,\n    CValidFeedback,\n    CLabel, CNav, CNavItem, CNavLink,\n    CRow, CTabContent, CTabPane, CTabs\n} from \"@coreui/react\";\nimport {Cancel, Save, Edit} from \"@material-ui/icons\";\nimport {SERVER_URL, USER_SERVICE, DOMAIN_SERVICE} from \"../../../constants\";\nimport Editor from \"@monaco-editor/react\";\n// import { CountryService } from '../service/CountryService';\n//import './FormDemo.css';\n\nconst SubscriptionOrganization = (props) => {\n    // const [countries, setCountries] = useState([]);\n    const [showMessage, setShowMessage] = useState(false);\n\n\n\n    const [photo, setPhoto] = useState(null);\n    const [formData, setFormData] = useState({});\n    const [domainId, setDomainId] = React.useState(JSON.parse(localStorage.getItem('domain_data')).domainId);\n    const [domainName, setDomainName] = React.useState(JSON.parse(localStorage.getItem('domain_data')).domainName);\n    const [username, setUsername] = React.useState(localStorage.getItem('username'));\n    // const countryservice = new CountryService();\n    const [totalSize, setTotalSize] = useState(0);\n    const toast = useRef(null);\n    const fileUploadRef = useRef(null);\n    const [userRoles, setUserRoles] = React.useState([]);\n    const [selectedRoles, setSelectedRoles] = useState();\n    const [types, setTypes] = useState([]);\n    const [selectedType, setSelectedType] = useState(null);\n\n    const [companyName, setCompanyName] = useState(\"\");\n    const [address, setAddress] = useState(\"\");\n    const [zip, setZip] = useState(\"\");\n    const [type, setType] = useState(\"\");\n    const [webSite, setWebSite] = useState(\"\");\n    const [city, setCity] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [phone, setPhone] = useState(\"\");\n    const [country, setCountry] = useState(\"\");\n    const [image, setImage] = useState(null);\n\n    useEffect(() => {\n        const company_data = {\n            method: 'GET',\n            headers: {\n                \"X-Tenant\": domainName,\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"Authorization\")\n            }\n        };\n        fetch(DOMAIN_SERVICE + \"/api/auth/getByDomainName/\"+domainName, company_data)\n            .then((response) => {\n                return response.json();\n            })\n            .then(data => {\n                const company = JSON.parse(data.domain)\n                var img = null\n\n                setPhone(company.phone)\n                setWebSite(company.webSite)\n                setCompanyName(company.companyName)\n                setCity(company.city)\n                setEmail(company.email)\n                setAddress(company.address)\n                setCountry(company.country)\n                setPhoto(img)\n                setImage(img)\n                setZip(company.zip)\n                setType(company.type)\n\n            })\n            .catch(error => {\n                console.log(error);\n            });\n        var companyTypes = [\n            {label:\"Automobile\", value:\"Automobile\"},\n            {label:\"Education\", value:\"Education\"},\n            {label:\"Banque/Financement/Assurance\", value:\"Banque/Financement/Assurance\"},\n            {label:\"Chimique\", value:\"Chimique\"},\n            {label:\"Construction\", value:\"Construction\"},\n            {label:\"Consultant\", value:\"Consultant\"},\n            {label:\"IT/ITES\", value:\"IT/ITES\"},\n            {label:\"Fabrication\", value:\"Fabrication\"},\n            {label:\"Huile/Gaz\", value:\"Huile/Gaz\"},\n            {label:\"Emballage\", value:\"Emballage\"},\n            {label:\"Pharmaceutique\", value:\"Pharmaceutique\"},\n            {label:\"Vendre au détail\", value:\"Vendre au détail\"},\n            {label:\"Service\", value:\"Service\"},\n            {label:\"Logiciel\", value:\"Logiciel\"},\n            {label:\"Commerce\", value:\"Commerce\"},\n            {label:\"Transport\", value:\"Transport\"},\n            {label:\"Entreposage\", value:\"Entreposage\"},\n            {label:\"Autres\", value:\"Autres\"}\n        ]\n\n        // setTypes(companyTypes)\n\n\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n    const onRoleChange = (e) => {\n        let _selectedRoles = [...selectedRoles];\n\n        if (e.checked) {\n            _selectedRoles.push(e.value);\n        }\n        else {\n            for (let i = 0; i < _selectedRoles.length; i++) {\n                const selectedRoles = _selectedRoles[i];\n\n                if (selectedRoles.key === e.value.key) {\n                    _selectedRoles.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        setSelectedRoles(_selectedRoles);\n    }\n    const validate = (data) => {\n        let errors = {};\n\n        if (!data.name) {\n            errors.name = 'Name is required.';\n        }\n\n        if (!data.email) {\n            errors.email = 'Email is required.';\n        }\n        else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)) {\n            errors.email = 'Invalid email address. E.g. example@email.com';\n        }\n\n        if (!data.password) {\n            errors.password = 'Password is required.';\n        }\n\n        if (!data.accept) {\n            errors.accept = 'You need to agree to the terms and conditions.';\n        }\n\n        return errors;\n    };\n\n    const editCompanyProfile = () =>{\n        props.history.push(\"/admin/company/profile/edit\");\n    }\n\n\n\n    var loadFile = function (event) {\n        var image = document.getElementById(\"output\");\n        const files = event.target.files\n        // Allowing file type\n        const allowedExtensions =\n            /(\\.jpg|\\.jpeg|\\.png|\\.gif)$/i;\n\n        /*let reader = new FileReader();\n        reader.readAsDataURL(files[0] )*/\n        if (!allowedExtensions.exec(files[0].name)) {\n            alert( \"Format invalid!\")\n        }\n        else {\n            setPhoto(files[0])\n            image.src = URL.createObjectURL(files[0]);\n            setPhoto(files[0])\n        }\n    };\n    return (\n        <>\n            <CCard>\n                <CCardHeader>\n                    <h3>Profile de l'entreprise</h3>\n                </CCardHeader>\n\n                <CCardBody>\n\n                    <CForm  noValidate style={{marginTop: \"20px\"}}>\n                        <CFormGroup row className=\"my-0\">\n                            <CCol sm={12} md={6}>\n                                <div className=\"profile-pic\" >\n                                    <img src={image} id=\"output\"\n                                         width=\"200\"/>\n                                </div>\n                            </CCol>\n                            <CCol sm={12} md={6}>\n                                <div className=\"row\">\n\n\n                                    <CFormGroup>\n                                        <CLabel htmlFor=\"companyName\">Nom de l'entreprise</CLabel>\n                                        <CInput   id=\"companyName\"\n                                                  value={companyName}\n                                                  disabled\n                                        />\n\n                                    </CFormGroup>\n                                </div>\n                                <div className=\"row\">\n\n                                    <CFormGroup>\n                                        <CLabel htmlFor=\"email\">Email de l'entreprise</CLabel>\n                                        <CInput style={{width:\"100%\"}} id=\"email\"\n                                                value={email}\n                                                disabled\n                                        />\n\n                                    </CFormGroup>\n                                </div>\n                            </CCol>\n                        </CFormGroup>\n\n                        <CFormGroup row className=\"my-0\">\n                            <CCol sm={12} md={6}>\n\n                                <CFormGroup>\n                                    <CLabel htmlFor=\"address\">Adresse</CLabel>\n                                    <CInput\n                                        id=\"address\"\n                                        value={address}\n                                        disabled\n                                    />\n\n                                </CFormGroup>\n                            </CCol>\n                            <CCol sm={12} md={6}>\n                                <CFormGroup>\n\n                                    <CLabel htmlFor=\"phone\">Téléphone</CLabel>\n                                    <CInput id=\"phone\"\n                                            value={phone}\n                                            disabled\n                                    />\n\n                                </CFormGroup>\n                            </CCol>\n                        </CFormGroup>\n                        <CFormGroup row className=\"my-0\">\n\n                            <CCol sm={12} md={6}>\n                                <CFormGroup>\n                                    <CLabel htmlFor=\"zip\">Code postal</CLabel>\n                                    <CInput id=\"zip\"\n                                            value={zip}\n                                            disabled\n                                    />\n\n                                </CFormGroup>\n                            </CCol>\n\n                            <CCol sm={12} md={6}>\n                                <CFormGroup>\n                                    <CLabel htmlFor=\"webSite\">Site web</CLabel>\n                                    <CInput id=\"webSite\"\n                                            value={webSite}\n                                            disabled\n                                    />\n\n                                </CFormGroup>\n                            </CCol>\n                            <CCol sm={12} md={6}>\n\n                                <CFormGroup>\n                                    <CLabel htmlFor=\"city\">Ville</CLabel>\n                                    <CInput id=\"city\"\n                                            value={city}\n                                            disabled\n                                    />\n                                </CFormGroup>\n                            </CCol>\n                            <CCol sm={12} md={6}>\n                                <CFormGroup>\n                                    <CLabel htmlFor=\"type\">Type de l'entreprise</CLabel>\n                                    <CInput\n                                        name=\"type\"\n                                        value={type}\n                                        disabled\n                                    />\n                                </CFormGroup>\n                            </CCol>\n                            <CCol sm={12} md={6}>\n                                <CFormGroup>\n\n                                    <CLabel htmlFor=\"country\">Pays</CLabel>\n                                    <CInput id=\"country\"\n                                            value={country}\n                                            disabled\n                                    />\n\n                                </CFormGroup>\n                            </CCol>\n                            {/*<CCol sm={12} md={6}>\n                        <div className=\"p-field-checkbox\">\n                            <Checkbox inputId=\"default\" name=\"defaut\" value=\"defaut\" onChange={e => setChecked(e.checked)} checked={checked} />\n                            <label htmlFor=\"default\"> Defaut</label>\n\n                        </div>\n                        </CCol>*/}\n\n                        </CFormGroup>\n                    </CForm>\n\n                    <CRow xs=\"4\" style={{marginTop: \"50px\"}}>\n                        <CCol col=\"6\" sm=\"4\" md=\"2\" xl className=\"mb-3 mb-xl-0\">\n                            <CButton block variant=\"outline\" color=\"info\" id=\"editProfile\" onClick={editCompanyProfile}><Edit/>Modifier</CButton>\n                        </CCol>\n                    </CRow>\n                </CCardBody>\n            </CCard>\n        </>\n\n    );\n}\nexport default SubscriptionOrganization"],"sourceRoot":""}