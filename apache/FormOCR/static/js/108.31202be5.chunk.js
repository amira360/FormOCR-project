(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[108],{3103:function(e,t,a){"use strict";a.r(t);var n=a(13),s=a(680),o=a(89),c=a(1),r=a.n(c),i=a(1171),u=a(633),l=(a(685),a(686),a(687),a(688),a(689),a(639),a(653),a(681)),h=a(3025),m=a(637),p=a.n(m),d=(a(754),a(755),a(115)),f=(a(802),a(661));Object(h.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=function(e){Object(c.useRef)(null);var t=r.a.useState(""),a=Object(o.a)(t,2),h=(a[0],a[1],r.a.useState({})),m=Object(o.a)(h,2),b=m[0],O=m[1],j=r.a.useState(""),S=Object(o.a)(j,2),g=(S[0],S[1],r.a.useState("")),N=Object(o.a)(g,2),v=N[0],I=N[1],y=r.a.useState(""),x=Object(o.a)(y,2),J=(x[0],x[1],r.a.useState([])),T=Object(o.a)(J,2),w=(T[0],T[1]),C=r.a.useState([]),A=Object(o.a)(C,2),P=A[0],z=A[1],_=r.a.useState(""),B=Object(o.a)(_,2),k=(B[0],B[1],r.a.useState([])),F=Object(o.a)(k,2),X=(F[0],F[1],r.a.useState("")),E=Object(o.a)(X,2),K=E[0],W=E[1],L=r.a.useState(""),M=Object(o.a)(L,2),V=(M[0],M[1]),q=r.a.useState(""),D=Object(o.a)(q,2),R=(D[0],D[1],r.a.useState([])),G=Object(o.a)(R,2),H=(G[0],G[1],r.a.useState([])),Q=Object(o.a)(H,2),U=(Q[0],Q[1]),Y=r.a.useState([]),Z=Object(o.a)(Y,2),$=(Z[0],Z[1]),ee=r.a.useState([]),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],se=r.a.useState([]),oe=Object(o.a)(se,2),ce=oe[0],re=oe[1],ie=r.a.useState([]),ue=Object(o.a)(ie,2),le=(ue[0],ue[1],r.a.useState([])),he=Object(o.a)(le,2),me=(he[0],he[1]),pe=r.a.useState([]),de=Object(o.a)(pe,2),fe=(de[0],de[1],r.a.useState({})),be=Object(o.a)(fe,2),Oe=(be[0],be[1],r.a.useState([])),je=Object(o.a)(Oe,2),Se=(je[0],je[1],r.a.useState([])),ge=Object(o.a)(Se,2),Ne=(ge[0],ge[1],r.a.useState([])),ve=Object(o.a)(Ne,2),Ie=ve[0],ye=ve[1],xe=r.a.useState(!1),Je=Object(o.a)(xe,2),Te=(Je[0],Je[1],r.a.useState("center")),we=Object(o.a)(Te,2),Ce=(we[0],we[1],r.a.useState("")),Ae=Object(o.a)(Ce,2),Pe=(Ae[0],Ae[1]),ze=r.a.useState(localStorage.getItem("workflowMasterName")),_e=Object(o.a)(ze,2),Be=_e[0],ke=(_e[1],r.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName)),Fe=Object(o.a)(ke,2),Xe=Fe[0],Ee=(Fe[1],r.a.useState(!0)),Ke=Object(o.a)(Ee,2),We=Ke[0],Le=Ke[1];Object(c.useEffect)((function(){var t=e.match.params.processKey,a=e.match.params.workflowMasterId,n=e.match.params.processInstanceId;W(t),O(JSON.parse(i.a)),Pe(a),V(n);var s={method:"POST",headers:{"X-Tenant":Xe,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({processKey:t,domainName:Xe})};fetch(d.s+"/api/process/createNewInstance",s).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){var a=[],n=[];t.map((function(e,t){n.push({formCode:e.id}),void 0===e.validationConstraints[0]?a.push({id:e.id,label:e.label,constraint:null}):a.push({id:e.id,label:e.label,constraint:e.validationConstraints[0].name})})),w(n),I(n),ye(a),void 0!==n[0]?Me(n):e.history.push("/dashboard")})).catch((function(e){console.log(e)}));localStorage.getItem("username");localStorage.setItem("processInstanceId",n),s={method:"POST",headers:{"X-Tenant":Xe,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({processInstanceId:n})},fetch(d.s+"/api/process/auth/historic",s).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){var t=JSON.parse(e.historicVariableInstances);JSON.parse(e.historicTaskInstances);$(t);var a=[];t.map((function(e){if("object"===typeof e.value){e.variableName;null===e.value||Array.isArray(e.value)||a.some((function(t){return p.a.isEqual(t,e.value)}))||a.push(e.value)}})),w(a),z(a),re(a),U(JSON.parse(e.historicVariableInstances)),Le(!1)})).catch((function(e){console.log(e)}))}),[]);var Me=function(e){var t={method:"POST",headers:{"X-Tenant":Xe,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({formCodes:e})};fetch(d.g+"/api/form/getByFormCodes",t).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(e){var t=JSON.parse(e.forms_json),a=[],n=[];t.map((function(e,t){n.push(e.components),a.push(e.components)})),me(a),ne(t)})).catch((function(e){console.log(e)}))},Ve=function(e,t){return"readonly"===Ie[t].constraint?Object(n.jsx)(l.Form,{form:e,options:{readOnly:!0},submission:{data:P[ce.length-1-t]}}):Object(n.jsx)(l.Form,{form:e,options:{readOnly:!1},submission:{data:ce[ce.length-1-t]},onChange:function(e){return function(e,t){if(e.changed){var a=Object(s.a)(ce);a[ce.length-1-t]=e.data,re(a)}}(e,t)}})},qe=We;return Object(n.jsx)("div",{children:Object(n.jsxs)(u.f,{children:[Object(n.jsx)(u.j,{children:Object(n.jsx)("div",{className:"m-subheader",children:Object(n.jsxs)("div",{className:"d-flex align-items-center",children:[Object(n.jsxs)("div",{className:"mr-auto col-xs-6 ",children:[Object(n.jsx)("h4",{className:"m-subheader__title m-subheader__title--separator",children:Object(n.jsxs)("span",{className:"ng-tns-c2-0",children:["Aper\xe7u  -  ",Be]})}),"              "]}),Object(n.jsx)("div",{className:"card-header-actions"})]})})}),Object(n.jsxs)(u.g,{children:[qe&&Object(n.jsx)(f.ProgressBar,{mode:"indeterminate",style:{height:"6px"}}),ae.map((function(e,t){return Ve(e,t)})),!qe&&Object(n.jsx)(l.Form,{form:b,onSubmit:function(t){return function(t){console.log(ce);var a=ce,n=JSON.parse(localStorage.getItem("domain_data")).domainName,s=JSON.parse(localStorage.getItem("domain_data")).domainId,o=localStorage.getItem("username"),c={method:"POST",headers:{"X-Tenant":n,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({username:o,domainId:s,domainName:n,startEvent:a,formCodes:v,processDefinitionKey:K})};fetch(d.s+"/api/process/startProcess",c).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){V(t.processInstanceId),e.history.push("/process/instances/"+localStorage.getItem("processName"))})).catch((function(e){console.log(e)}))}()}})]})]})})}}}]);
//# sourceMappingURL=108.31202be5.chunk.js.map