(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[85],{3044:function(e,t,n){"use strict";n.r(t);var a=n(39),o=n(13),c=n(89),i=n(1),s=n.n(i),r=n(633),l=(n(639),n(653),n(681),n(3025)),d=n(701),j=(n(719),n(816),n(827)),h=n(817),u=n(818),m=n.n(u),b=n(819),p=n.n(b),x=(n(821),n(822),n(697)),O=n(704),f=n(3120),w=n(3107),g=n(3113),v=n(3045),k=n(115),S=Object(l.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),N={PaperProps:{style:{maxHeight:224,width:250}}};t.default=Object(d.a)(Object(a.a)({},S),{withTheme:!0})((function(e){var t=s.a.useState(!0),n=Object(c.a)(t,2),a=(n[0],n[1],s.a.useState(!0)),l=Object(c.a)(a,2),d=(l[0],l[1],s.a.useState("")),u=Object(c.a)(d,2),b=u[0],y=u[1],M=s.a.useState(""),P=Object(c.a)(M,2),I=(P[0],P[1],s.a.useState("")),B=Object(c.a)(I,2),C=(B[0],B[1],s.a.useState("")),A=Object(c.a)(C,2),T=(A[0],A[1],s.a.useState("")),J=Object(c.a)(T,2),L=(J[0],J[1],s.a.useState("workflow")),z=Object(c.a)(L,2),D=(z[0],z[1],s.a.useState("")),E=Object(c.a)(D,2),W=(E[0],E[1],s.a.useState("")),X=Object(c.a)(W,2),F=(X[0],X[1],s.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainId)),H=Object(c.a)(F,2),V=H[0],_=(H[1],s.a.useState([])),R=Object(c.a)(_,2),G=R[0],U=R[1],q=s.a.useState(null),K=Object(c.a)(q,2),Q=(K[0],K[1],s.a.useState([])),Y=Object(c.a)(Q,2),Z=Y[0],$=Y[1],ee=s.a.useState(null),te=Object(c.a)(ee,2),ne=(te[0],te[1]),ae=s.a.useState({}),oe=Object(c.a)(ae,2),ce=oe[0],ie=oe[1],se=s.a.useState(""),re=Object(c.a)(se,2),le=(re[0],re[1],s.a.useState([])),de=Object(c.a)(le,2),je=de[0],he=de[1],ue=s.a.useState(null),me=Object(c.a)(ue,2),be=me[0],pe=me[1],xe=s.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),Oe=Object(c.a)(xe,2),fe=Oe[0],we=(Oe[1],S());Object(i.useEffect)((function(){var t={method:"GET",headers:{"X-Tenant":fe,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(k.v+"/api/auth/role/getRoles",t).then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){t.push({key:e.roleId,value:e.roleName,display:e.roleName,id:e.roleId})})),$(t)})).catch((function(e){console.log(e)}));var n=e.match.params.workflowId,a={method:"POST",headers:{"X-Tenant":fe,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({id:n})};fetch(k.x+"/api/workflow/getByWorkflowId",a).then((function(e){return new Promise((function(t,n){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){n(e)}))}))})).then((function(e){ie(JSON.parse(e.workflow));var t=JSON.parse(e.workflow),n=JSON.parse(e.roles);y(t.name);var a=[];n.map((function(e){a.push(e.roleName)})),he(a);var o=new j.a({container:"#bpmnview",propertiesPanel:{parent:"#propview"},additionalModules:[m.a,p.a],moddleExtensions:{camunda:h}});o.importXML(e.xml,(function(e){if(e)return console.log("fail import xml");var t=null;(t=o.get("canvas")).zoom("fit-viewport"),ne(t._rootElement.businessObject),pe(o)}))})).catch((function(e){console.log(e)}))}),[]);return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(r.k,{xs:"12",sm:"12",children:Object(o.jsxs)(r.f,{children:[Object(o.jsx)(r.j,{children:Object(o.jsxs)("h2",{children:["Modifier  -   ",ce.name]})}),Object(o.jsx)(r.g,{children:Object(o.jsxs)(r.u,{noValidate:!0,children:[Object(o.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(o.jsx)(r.k,{xs:"6",children:Object(o.jsxs)(r.v,{children:[Object(o.jsx)(r.H,{htmlFor:"workflowId",children:"S No"}),Object(o.jsx)(r.A,{id:"workflowId",value:ce.sno,disabled:!0})]})}),Object(o.jsx)(r.k,{xs:"6",children:Object(o.jsxs)(r.v,{children:[Object(o.jsx)(r.H,{htmlFor:"workflowName",children:"Workflow name"}),Object(o.jsx)(r.A,{id:"workflowName",onChange:function(e){return y(e.target.value)},value:b})]})})]}),Object(o.jsxs)(r.v,{row:!0,className:"my-0",children:[Object(o.jsx)(r.k,{xs:"6",children:Object(o.jsxs)(r.v,{children:[Object(o.jsx)(r.H,{htmlFor:"workflowVersion",children:"Version"}),Object(o.jsx)(r.A,{id:"workflowVersion",value:ce.version,disabled:!0})]})}),Object(o.jsx)(r.k,{xs:"6",children:Object(o.jsxs)(r.v,{children:[Object(o.jsx)(r.k,{xs:"12",children:Object(o.jsx)(r.H,{htmlFor:"AccessConntrol",children:"Access control"})}),Object(o.jsx)(r.k,{xs:"12",children:Object(o.jsx)(w.a,{style:{marginLeft:"0px !important",width:"100%",color:"black"},labelId:"demo-mutiple-chip-label",id:"accessControl",value:je,onChange:function(e){return he(e.target.value)},multiple:!0,input:Object(o.jsx)(v.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(o.jsx)("div",{className:we.chips,style:{display:"flex",flexWrap:"wrap"},children:e.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)(f.a,{onMouseDown:function(e){e.stopPropagation()},icon:undefined,label:e,onDelete:function(t){return function(e){var t=G.filter((function(t){return t!==e}));U(t)}(e)},className:we.chip})},e)}))})},MenuProps:N,children:Z.map((function(e){return Object(o.jsx)(g.a,{value:e.value,children:e.display},e.value)}))})})]})})]}),Object(o.jsx)(r.f,{children:Object(o.jsxs)(r.O,{children:[Object(o.jsx)(r.k,{xs:"12",children:Object(o.jsx)(r.M,{expandable:"sm",color:"info",children:Object(o.jsx)(r.N,{children:"Workflow Builder"})})}),Object(o.jsx)(r.k,{xs:"12",children:Object(o.jsx)("div",{className:"col-sm-12 row",children:Object(o.jsx)("div",{className:"panel panel-default",style:{width:"100%",borderColor:"#ddd !important"},children:Object(o.jsx)("div",{className:"panel-body",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-sm-12",children:Object(o.jsxs)("div",{id:"bpmncontainer",children:[Object(o.jsx)("div",{id:"propview",style:{width:"25%",height:"110vh",float:"right",maxHeight:"98vh",overflowX:"auto"}}),Object(o.jsx)("div",{id:"bpmnview",style:{width:"75%",height:"110vh",float:"left",backgroundColor:"white"}})]})})})})})})})]})}),Object(o.jsxs)(r.O,{xs:"4",children:[Object(o.jsx)(r.k,{xs:"2",className:"text-md-right",children:Object(o.jsxs)(r.e,{color:"success",id:"workflowSave",onClick:function(){var t={workflowId:ce.id,workflowName:b,workflowVersion:ce.version,workflowRoles:je,xml:null,domainId:V};be.saveXML({format:!0},(function(e,n){t.xml=n;var a={method:"POST",headers:{"X-Tenant":fe,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify(t)};fetch(k.x+"/api/workflow/edit",a).then((function(e){console.log(e)}))})),e.history.push("/admin/workflow/list")},children:[Object(o.jsx)(x.a,{})," Save"]})}),Object(o.jsx)(r.k,{xs:"2",className:"text-md-left",children:Object(o.jsxs)(r.e,{color:"danger",onClick:function(){return e.history.push("/admin/workflow/list")},children:[Object(o.jsx)(O.a,{}),"Cancel"]})})]})]})})]})})})}))},719:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a='<?xml version="1.0" encoding="UTF-8" standalone="no"?><bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">\n                            <bpmn2:process id="'.concat(function(e){for(var t=["Process_"],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t.push(n.charAt(Math.floor(Math.random()*a)));return t.join("")}(7),'" isExecutable="true"/>\n                            <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n                              <bpmndi:BPMNPlane bpmnElement="Process_1bzh145" id="BPMNPlane_1"/>\n                            </bpmndi:BPMNDiagram>\n                          </bpmn2:definitions>')}}]);
//# sourceMappingURL=85.2e4ab576.chunk.js.map