(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[74],{3080:function(e,t,a){"use strict";a.r(t);var c=a(39),n=a(13),s=a(89),r=a(1),i=a.n(r),o=a(633),l=a(115),j=a(3025),u=a(701),h=a(697),d=a(704),b=a(679),m=a(742),O=Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:"0px !important",minWidth:220,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=Object(u.a)(Object(c.a)({},O),{withTheme:!0})((function(e){var t=i.a.useState(!0),a=Object(s.a)(t,2),c=(a[0],a[1],i.a.useState(!0)),j=Object(s.a)(c,2),u=(j[0],j[1],i.a.useState("")),p=Object(s.a)(u,2),x=p[0],g=p[1],f=i.a.useState(""),S=Object(s.a)(f,2),v=(S[0],S[1],i.a.useState("")),N=Object(s.a)(v,2),k=N[0],C=N[1],y=i.a.useState(""),w=Object(s.a)(y,2),z=(w[0],w[1],i.a.useState("")),A=Object(s.a)(z,2),I=(A[0],A[1],i.a.useState("script")),F=Object(s.a)(I,2),T=(F[0],F[1],i.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainId)),V=Object(s.a)(T,2),H=V[0],J=(V[1],i.a.useState([])),E=Object(s.a)(J,2),L=E[0],M=E[1],W=i.a.useState(null),B=Object(s.a)(W,2),G=B[0],P=B[1],R=i.a.useState([]),X=Object(s.a)(R,2),_=X[0],U=X[1],q=i.a.useState(null),D=Object(s.a)(q,2),K=(D[0],D[1],O(),i.a.useState(localStorage.getItem("username"))),Q=Object(s.a)(K,2),Y=Q[0],Z=(Q[1],i.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName)),$=Object(s.a)(Z,2),ee=$[0];$[1];Object(r.useEffect)((function(){var e={method:"GET",headers:{"X-Tenant":ee,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}};fetch(l.v+"/api/auth/role/getRoles",e).then((function(e){return e.json()})).then((function(e){console.log(e);var t=[];e.map((function(e){t.push({value:e.roleName,label:e.roleName})})),U(t),console.log(_)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(o.k,{xs:"12",sm:"12",children:Object(n.jsxs)(o.f,{children:[Object(n.jsx)(o.j,{children:Object(n.jsx)("h2",{children:"Cr\xe9er un script"})}),Object(n.jsx)(o.g,{children:Object(n.jsxs)(o.u,{noValidate:!0,children:[Object(n.jsxs)(o.v,{row:!0,className:"my-0",children:[Object(n.jsx)(o.k,{xs:"6",children:Object(n.jsxs)(o.v,{children:[Object(n.jsx)(o.H,{htmlFor:"scriptId",children:"S No"}),Object(n.jsx)(o.A,{id:"scriptId",disabled:!0})]})}),Object(n.jsx)(o.k,{xs:"6",children:Object(n.jsxs)(o.v,{children:[Object(n.jsx)(o.H,{htmlFor:"scriptName",children:"Nom du script"}),Object(n.jsx)(o.A,{id:"scriptName",onChange:function(e){return g(e.target.value)},value:x})]})})]}),Object(n.jsxs)(o.v,{row:!0,className:"my-0",children:[Object(n.jsx)(o.k,{xs:"6",children:Object(n.jsxs)(o.v,{children:[Object(n.jsx)(o.H,{htmlFor:"scriptVersion",children:"Version"}),Object(n.jsx)(o.A,{id:"scriptVersion",onChange:function(e){return C(e.target.value)},value:k})]})}),Object(n.jsx)(o.k,{sm:12,md:6,children:Object(n.jsxs)(o.v,{children:[Object(n.jsx)(o.H,{htmlFor:"AccessControlUser",children:"Contr\xf4le d'acc\xe8s"}),Object(n.jsx)(b.a,{name:"form-field-name2",placeholder:"Global",value:L,options:_,onChange:M,isMulti:!0})]})})]}),Object(n.jsxs)(o.f,{children:[Object(n.jsx)(o.j,{style:{backgroundColor:"#F5F5F5"},children:"Script"}),Object(n.jsx)(o.g,{style:{padding:"0px"},children:Object(n.jsx)(m.a,{height:"70vh",defaultLanguage:"javascript",onChange:function(e,t){return P(e)}})})]}),Object(n.jsxs)(o.O,{xs:"4",children:[Object(n.jsx)(o.k,{col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0",children:Object(n.jsxs)(o.e,{block:!0,variant:"outline",color:"info",id:"workflowSave",onClick:function(){var t={scriptName:x,scriptVersion:k,scriptRoles:L,script:G,domainId:H,username:Y},a={method:"POST",headers:{"X-Tenant":ee,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify(t)};fetch(l.t+"/api/script/save",a).then((function(e){return new Promise((function(t,a){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){a(e)}))}))})).then((function(t){e.history.push("/admin/script/list")}))},children:[Object(n.jsx)(h.a,{})," Enregister"]})}),Object(n.jsx)(o.k,{col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0",children:Object(n.jsxs)(o.e,{block:!0,variant:"outline",color:"danger",onClick:function(){return e.history.push("/admin/script/list")},children:[Object(n.jsx)(d.a,{}),"Annuler"]})})]})]})})]})})})}))},697:function(e,t,a){"use strict";var c=a(1),n=a(1054);t.a=Object(n.a)(c.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},704:function(e,t,a){"use strict";var c=a(1),n=a(1054);t.a=Object(n.a)(c.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel")}}]);
//# sourceMappingURL=74.88340a93.chunk.js.map