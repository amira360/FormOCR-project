(this["webpackJsonpisct-group"]=this["webpackJsonpisct-group"]||[]).push([[92],{3061:function(e,t,n){"use strict";n.r(t);var o=n(13),a=n(680),i=n(89),s=n(1),c=n.n(s),r=(n(91),n(994),n(3106)),u=n(115),l=n(639),h=n(21),d=n(633),m=n(716);t.default=function(e){var t=Object(s.useState)({showLeafIcon:!1}),n=Object(i.a)(t,2),f=n[0],b=(n[1],Object(s.useState)({})),O=Object(i.a)(b,2),p=(O[0],O[1]),g=c.a.useState({}),j=Object(i.a)(g,2),S=(j[0],j[1]),v=Object(s.useState)(!0),x=Object(i.a)(v,2),I=x[0],y=(x[1],Object(s.useState)(null)),w=Object(i.a)(y,2),N=w[0],k=w[1],C=Object(s.useState)(null),J=Object(i.a)(C,2),M=J[0],T=J[1],A=Object(s.useState)([]),z=Object(i.a)(A,2),_=z[0],P=z[1],B=c.a.useState(JSON.parse(localStorage.getItem("domain_data")).domainName),E=Object(i.a)(B,2),G=E[0],L=(E[1],c.a.useState([])),X=Object(i.a)(L,2),V=X[0],q=X[1];Object(h.g)();Object(s.useEffect)((function(){var e={method:"GET",headers:{"X-Tenant":G,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")}},t=[],n=localStorage.getItem("username");fetch(u.h+"/api/menu/auth/allImsMenu/"+n,e).then((function(e){return new Promise((function(t,n){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){n(e)}))}))})).then((function(e){var n=JSON.parse(e.menu),a=JSON.parse(e.submenu),i={};n.map((function(e,n){if(i.title=e.name,i.key="3-17-"+e.id,i.icon=Object(o.jsx)(l.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"===e._tag)i.to=e.to,t.push(i),i={};else{var s=a[n];i.expanded=!0;var c=[],r={};s.map((function(t){r.title=t.name,r.key="3-17-"+e.id+"-"+t.id,r.icon=Object(o.jsx)(l.a,{name:t.icon,customClasses:"c-sidebar-nav-icon"}),r.to=t.to,c.push(r),r={}})),i.children=c}t.push(i),i={}}))})),fetch(u.o+"/api/menu/auth/allMenu/"+n,e).then((function(e){return new Promise((function(t,n){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){n(e)}))}))})).then((function(e){var n=[],a=JSON.parse(JSON.parse(e.menu).menu),i=[],s={};a.filter((function(e){return"SGI"===e.name})).map((function(e){if(s.key=e.id,s.title=e.name,s.icon=Object(o.jsx)(l.a,{name:e.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"!==e._tag){var a=e._children,c=[],r={};a.map((function(a){r.key=e.id+"-"+a.id,r.title=a.name,r.icon=Object(o.jsx)(l.a,{name:a.icon,customClasses:"c-sidebar-nav-icon"}),"CSidebarNavItem"===a._tag?(c.push(r),r={}):("SGI"===e.name&&"QMS"===a.name&&(r.children=t,n.push(r.key)),c.push(r),r={})})),s.children=c,n.push(s.key)}i.push(s),s={}})),q(i),console.log(i),P(n),console.log(n)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(d.j,{children:Object(o.jsx)("h3",{children:"Choisir un dossier"})}),Object(o.jsx)(r.a,{showLine:f,showIcon:I,expandedKeys:Object(a.a)(_),onExpand:P,onSelect:function(e,t){console.log("selected",e,t),p(t.node);var n="",o="",a="",i=t.node.key;if(-1!==i.indexOf("-"))if(o=i.substr(0,i.indexOf("-")),console.log(o),-1!==(i=i.substr(i.indexOf("-")+1,i.length-1)).indexOf("-")){var s=i.substr(0,i.indexOf("-"));i=i.substr(i.indexOf("-")+1,i.length-1),console.log(s),-1!==i.indexOf("-")?(a=i.substr(0,i.indexOf("-")),console.log(a),i=i.substr(i.indexOf("-")+1,i.length-1),console.log("ims sub menu "),k(a)):(a=i,console.log(a),console.log("ims menu"),k(a),T("IMSMenu"))}else n=i,console.log(n),console.log("sub menu  "),k(n),T("Submenu");else o=i,console.log(o),console.log("menu "),k(o),T("Menu")},treeData:V}),Object(o.jsx)(d.h,{children:Object(o.jsxs)(d.e,{onClick:function(){return function(){var t=e.match.params.workflowMasterId;console.log(t);var n={method:"POST",headers:{"X-Tenant":G,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify({id:t})};fetch(u.w+"/api/workflowMaster/getByWorkflowMasterId",n).then((function(e){return new Promise((function(t,n){e.text().then((function(e){t(e.length?JSON.parse(e):null)})).catch((function(e){n(e)}))}))})).then((function(n){S(n),console.log(n);var o={name:n.name,_tag:"CSidebarNavItem",icon:"cil-border-all",to:"/process/instances/"+n.workflowId+"_"+n.name+"/"+n.id,imsqmsmenuid:N,menuLevel:M},a={method:"POST",headers:{"X-Tenant":G,"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("Authorization")},body:JSON.stringify(o)};fetch(u.i+"/api/imsSubMenu/addMenu",a).then((function(e){return new Promise((function(t,n){e.text().then((function(e){console.log(e),t(e.length?JSON.parse(e):null)})).catch((function(e){n(e)}))}))})).then((function(n){""===n.insertId?alert("please select a repository"):e.history.push("/admin/indexView/edit/"+t)}))}))}()},color:"success",className:"mt-3 -item-right",active:!0,tabIndex:-1,style:{textAlign:"right"},children:[Object(o.jsx)(m.a,{}),"Submit"]})})]})}},716:function(e,t,n){"use strict";var o=n(1),a=n(1054);t.a=Object(a.a)(o.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")}}]);
//# sourceMappingURL=92.994fa0ea.chunk.js.map